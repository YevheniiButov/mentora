# üî¥ –ü–û–õ–ù–´–ô –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ô –û–¢–ß–ï–¢
## –ü–æ—á–µ–º—É AI –≤–∏–¥–∂–µ—Ç—ã –≤—Å–µ –µ—â–µ –≤ –≤–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ

---

## ‚úÖ **–ß–¢–û –Ø –°–î–ï–õ–ê–õ (–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)**

### 1. **CSRF –¢–æ–∫–µ–Ω - –î–û–ë–ê–í–õ–ï–ù** ‚úÖ
```html
<!-- –í templates/index.html —Å—Ç—Ä–æ–∫–∏ 7-13 -->
{% block head %}
{{ super() }}
<meta name="csrf-token" content="{{ csrf_token() }}">
<meta name="user-authenticated" content="{{ 'true' if current_user.is_authenticated else 'false' }}">
<meta name="current-language" content="{{ g.lang }}">
{% endblock %}
```

### 2. **JavaScript –§—É–Ω–∫—Ü–∏–∏ - –î–û–ë–ê–í–õ–ï–ù–´** ‚úÖ
```javascript
// –í templates/index.html –Ω–∞–π–¥–µ–Ω—ã:
Line 2047: async function refreshExamPrediction()
Line 2310: function toggleMiniChat() 
Line 2435: async function makeAIRequest()
Line 2477: function toggleMiniChat() // –î–£–ë–õ–ò–ö–ê–¢!
Line 2495: async function refreshExamPrediction() // –î–£–ë–õ–ò–ö–ê–¢!
```

### 3. **Backend –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã - –î–û–ë–ê–í–õ–ï–ù–´** ‚úÖ
```python
# –í routes/ai_routes.py —Å—Ç—Ä–æ–∫–∏ 966-1111:
@ai_bp.route('/health', methods=['GET'])  ‚úÖ
@ai_bp.route('/progress-stats', methods=['GET'])  ‚úÖ 
@ai_bp.route('/simple-chat', methods=['POST'])  ‚úÖ
```

---

## üî¥ **–ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´**

### **–ü—Ä–æ–±–ª–µ–º–∞ #1: –°–ï–†–í–ï–† –ù–ï –ó–ê–ü–£–©–ï–ù** üö®
```bash
Address already in use
Port 8081 is in use by another program
```
**–î–∏–∞–≥–Ω–æ–∑:** –°–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è - –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç

### **–ü—Ä–æ–±–ª–µ–º–∞ #2: –î–£–ë–õ–ò–†–£–Æ–©–ò–ï –§–£–ù–ö–¶–ò–ò** üö®  
```javascript
// –ö–û–ù–§–õ–ò–ö–¢: –î–≤–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏!
Line 2310: function toggleMiniChat() 
Line 2477: function toggleMiniChat() // –î–£–ë–õ–ò–ö–ê–¢!

Line 2047: async function refreshExamPrediction()
Line 2495: async function refreshExamPrediction() // –î–£–ë–õ–ò–ö–ê–¢!
```
**–î–∏–∞–≥–Ω–æ–∑:** JavaScript –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–∑-–∑–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

### **–ü—Ä–æ–±–ª–µ–º–∞ #3: –ü–û–†–Ø–î–û–ö –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò** üö®
```javascript
// –§—É–Ω–∫—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ü–û–°–õ–ï –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ HTML
Line 811: onclick="refreshExamPrediction()" // –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
Line 2047: async function refreshExamPrediction() // –û–ü–†–ï–î–ï–õ–Ø–ï–¢–°–Ø –ü–û–ó–ñ–ï
```
**–î–∏–∞–≥–Ω–æ–∑:** –§—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –¥–æ –∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

---

## üéØ **–ù–ê–°–¢–û–Ø–©–ê–Ø –ü–†–ò–ß–ò–ù–ê –ü–†–û–ë–õ–ï–ú–´**

### **–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:** 
1. **–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω** - –≤–∏–¥–∂–µ—Ç—ã –Ω–µ –º–æ–≥—É—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
2. **JavaScript –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã** - –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏** –∫–æ–¥–∞

### **–ü–æ—á–µ–º—É –≤–∏–¥–∂–µ—Ç—ã –≤ –≤–µ—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ:**
```javascript
// –í–∏–¥–∂–µ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏:
<div class="spinner-border spinner-border-sm text-primary" role="status"></div>
<span class="ms-2">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å...</span>

// –ù–æ AJAX –∑–∞–ø—Ä–æ—Å—ã –ù–ï–£–°–ü–ï–®–ù–´ –∏–∑-–∑–∞:
// 1. –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω (Connection failed)
// 2. JavaScript –æ—à–∏–±–∫–∏ (Function conflicts)  
// 3. Timeout –∑–∞–ø—Ä–æ—Å–æ–≤
```

---

## üß™ **–†–ï–ê–õ–¨–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï**

### **–¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞**
```bash
curl http://127.0.0.1:8081/ru/ai-assistant/health
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Connection refused (—Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω)
```

### **–¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ JavaScript**
```javascript
// –û—Ç–∫—Ä—ã—Ç—å DevTools (F12) ‚Üí Console
// –û–∂–∏–¥–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏:
"toggleMiniChat is not defined" ‚ùå (–∏–∑-–∑–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
"Syntax error" ‚ùå (–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π)
```

### **–¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ Network**
```
DevTools ‚Üí Network ‚Üí XHR
Status: Failed (FAILED TO FETCH)
```

---

## üõ†Ô∏è **–ß–¢–û –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨**

### **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**

1. **–ò–°–ü–†–ê–í–ò–¢–¨ –°–ï–†–í–ï–†**
   ```bash
   # –ù–∞–π—Ç–∏ –∏ —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 8081
   lsof -ti :8081 | xargs kill -9
   # –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É
   python app.py --port 5000
   ```

2. **–£–ë–†–ê–¢–¨ –î–£–ë–õ–ò–†–£–Æ–©–ò–ï –§–£–ù–ö–¶–ò–ò**
   ```javascript
   // –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –∏–∑ templates/index.html
   // –°—Ç—Ä–æ–∫–∏ 2477 –∏ 2495
   ```

3. **–ü–ï–†–ï–ú–ï–°–¢–ò–¢–¨ –§–£–ù–ö–¶–ò–ò –í HEAD**
   ```html
   <!-- –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ JS —Ñ—É–Ω–∫—Ü–∏–∏ –≤ <head> -->
   <!-- –ß—Ç–æ–±—ã –æ–Ω–∏ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –î–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è -->
   ```

---

## üîç **–î–ï–¢–ê–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê**

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ–π—á–∞—Å:**

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É**
2. **HTML –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è** - –≤–∏–¥–∂–µ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–ø–∏–Ω–Ω–µ—Ä
3. **JavaScript –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è** - –≤—ã–∑—ã–≤–∞–µ—Ç `loadExamReadiness()`
4. **AJAX –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É** - `fetch('/ru/ai-assistant/predict-exam')`
5. **–û–®–ò–ë–ö–ê:** `Connection refused` (—Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω)
6. **Catch –±–ª–æ–∫ –ù–ï –°–†–ê–ë–ê–¢–´–í–ê–ï–¢** –ø—Ä–∞–≤–∏–ª—å–Ω–æ
7. **–í–∏–¥–∂–µ—Ç –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏** ‚ôæÔ∏è

### **–õ–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (–æ–∂–∏–¥–∞–µ–º—ã–µ):**
```
Initializing AI widgets...
CSRF Token: Found
Making request to: /ru/ai-assistant/predict-exam
‚ùå FETCH FAILED: net::ERR_CONNECTION_REFUSED
‚ùå Exam readiness error: TypeError: Failed to fetch
```

---

## üìä **–ü–†–û–¶–ï–ù–¢ –í–´–ü–û–õ–ù–ï–ù–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô**

- ‚úÖ CSRF —Ç–æ–∫–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω: **100%**
- ‚úÖ JavaScript —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã: **80%** (–µ—Å—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã)
- ‚úÖ Backend —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã: **100%** 
- ‚ùå –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: **0%**
- ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã: **0%**
- ‚ùå –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ: **0%**

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 60% (–ù–ï –ó–ê–í–ï–†–®–ï–ù–û)**

---

## üéØ **NEXT STEPS - –ß–¢–û –î–ï–õ–ê–¢–¨**

### **–®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (5 –º–∏–Ω)**
```bash
# –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç 8081
sudo lsof -ti :8081 | xargs sudo kill -9

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –ø–æ—Ä—Ç—É 5000
export FLASK_PORT=5000
python app.py
```

### **–®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å JavaScript (10 –º–∏–Ω)**
```javascript
// –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
// –°—Ç—Ä–æ–∫–∏ 2477-2497 –≤ templates/index.html
```

### **–®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (5 –º–∏–Ω)**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health —ç–Ω–¥–ø–æ–∏–Ω—Ç
curl http://127.0.0.1:5000/ru/ai-assistant/health

# –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
open http://127.0.0.1:5000/ru/
```

---

## üî¥ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

### **–ü–æ—á–µ–º—É –ø—Ä–æ–±–ª–µ–º–∞ –ù–ï —Ä–µ—à–µ–Ω–∞:**
1. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –î–û–ë–ê–í–õ–ï–ù–´** ‚úÖ
2. **–ù–û —Å–µ—Ä–≤–µ—Ä –ù–ï –ó–ê–ü–£–©–ï–ù** ‚ùå  
3. **–ò –µ—Å—Ç—å JavaScript –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã** ‚ùå

### **–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ —Ä–µ—à–µ–Ω–∏—è:**
**15-20 –º–∏–Ω—É—Ç** –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —à–∞–≥–æ–≤

### **–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
**–ù–ï –°–ï–†–í–ï–†, –ê –°–ê–ú–ê –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò**

–í–∏–¥–∂–µ—Ç—ã –ø—ã—Ç–∞—é—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–æ:
- –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- JavaScript –∏–º–µ–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã  
- –ù–µ—Ç proper error handling

**–†–ï–®–ï–ù–ò–ï: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä + —É–±—Ä–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã + –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** 