{% from "includes/_macros.html" import language_url %}

<header class="modern-header">
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <!-- Logo -->
      <a class="navbar-brand" href="{{ url_for('main_bp.home', lang=lang) }}">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Become a Tandarts" height="40">
      </a>
      
      <!-- Mobile Toggle -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain" aria-controls="navbarMain" aria-expanded="false" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
      <!-- Navigation -->
      <div class="collapse navbar-collapse" id="navbarMain">
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <a class="nav-link {{ 'active' if request.endpoint == 'main_bp.home' }}" 
               href="{{ url_for('main_bp.home', lang=lang) }}">
 
              {{ t('home', lang) }}
            </a>
          </li>
          
          {% if current_user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link {{ 'active' if request.endpoint == 'learning_map_bp.learning_map' }}" 
               href="{{ url_for('learning_map_bp.learning_map', lang=lang) }}">
            
              {{ t('learning_map', lang) }}
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link {{ 'active' if request.endpoint == 'dashboard_bp.learning_dashboard' }}" 
               href="{{ url_for('dashboard_bp.learning_dashboard', lang=lang) }}">
         
              {{ t('dashboard', lang) }}
            </a>
          </li>

          <!-- Assessment Dropdown Menu -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle {{ 'active' if 'assessment_bp.' in request.endpoint }}" 
               href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"
               title="{{ t('navigation.assessment_desc', lang)|default('Knowledge assessment and personalized learning plan') }}">
              <i class="bi bi-clipboard-check me-1"></i>
              {{ t('navigation.assessment', lang)|default('Assessment') }}
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{{ url_for('assessment_bp.intro', lang=lang) }}">
                <i class="bi bi-clipboard-data me-2"></i>
                {{ t('general_assessment', lang)|default('–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∑–Ω–∞–Ω–∏–π') }}
              </a></li>
              
              <!-- –î–æ–±–∞–≤–∏—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –º–µ–Ω—é Assessment -->
              <div class="dropdown-divider"></div>
              <h6 class="dropdown-header">üá≥üá± {{ t('for_netherlands_work', lang)|default('–î–ª—è —Ä–∞–±–æ—Ç—ã –≤ –ù–∏–¥–µ—Ä–ª–∞–Ω–¥–∞—Ö') }}</h6>
              <li><a class="dropdown-item" href="{{ url_for('assessment_bp.dutch_intro', lang=lang) }}">
                <i class="bi bi-flag-fill text-warning me-2"></i>
                {{ t('dutch_assessment_title', lang)|default('–û—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —Ä–∞–±–æ—Ç–µ –≤ NL') }}
              </a></li>
              <li><a class="dropdown-item" href="{{ url_for('assessment_bp.big_exam_prep', lang=lang) }}">
                <i class="bi bi-heart-pulse text-danger me-2"></i>
                {{ t('big_exam_prep', lang)|default('–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ BIG —ç–∫–∑–∞–º–µ–Ω—É') }}
              </a></li>
            </ul>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('main_bp.big_info', lang=lang) }}">
           
              {{ t('about_big', lang) }}
            </a>
          </li>
          {% endif %}
        </ul>
        
        <!-- Right Side Actions -->
        <div class="navbar-actions d-flex align-items-center">
          <!-- Language Dropdown -->
          <div class="dropdown me-3 language-dropdown" style="position: relative; z-index: 9999;">
            <button class="btn language-btn-modern" 
                    type="button" id="languageDropdown" aria-expanded="false"
                    style="pointer-events: auto !important; cursor: pointer !important;"
                    title="{{ t('language', lang)|default('–Ø–∑—ã–∫') }}: {{ lang|upper }}">
              <i class="bi bi-globe"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end language-menu" aria-labelledby="languageDropdown"
                style="z-index: 10000 !important; position: absolute !important; display: none;">
              <li><a class="dropdown-item {% if lang == 'en' %}active{% endif %}" 
                     href="{{ language_url('en') }}"
                     onclick="console.log('Switching to English');">
                üá∫üá∏ English
              </a></li>
              <li><a class="dropdown-item {% if lang == 'ru' %}active{% endif %}" 
                     href="{{ language_url('ru') }}"
                     onclick="console.log('Switching to Russian');">
                üá∑üá∫ –†—É—Å—Å–∫–∏–π
              </a></li>
              <li><a class="dropdown-item {% if lang == 'nl' %}active{% endif %}" 
                     href="{{ language_url('nl') }}"
                     onclick="console.log('Switching to Dutch');">
                üá≥üá± Nederlands
              </a></li>
              <li><a class="dropdown-item {% if lang == 'uk' %}active{% endif %}" 
                     href="{{ language_url('uk') }}"
                     onclick="console.log('Switching to Ukrainian');">
                üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞
              </a></li>
              <li><a class="dropdown-item {% if lang == 'fa' %}active{% endif %}" 
                     href="{{ language_url('fa') }}"
                     onclick="console.log('Switching to Persian');">
                üáÆüá∑ ŸÅÿßÿ±ÿ≥€å
              </a></li>
              <li><a class="dropdown-item {% if lang == 'es' %}active{% endif %}" 
                     href="{{ language_url('es') }}"
                     onclick="console.log('Switching to Spanish');">
                üá™üá∏ Espa√±ol
              </a></li>
              <li><a class="dropdown-item {% if lang == 'pt' %}active{% endif %}" 
                     href="{{ language_url('pt') }}"
                     onclick="console.log('Switching to Portuguese');">
                üáµüáπ Portugu√™s
              </a></li>
              <li><a class="dropdown-item {% if lang == 'tr' %}active{% endif %}" 
                     href="{{ language_url('tr') }}"
                     onclick="console.log('Switching to Turkish');">
                üáπüá∑ T√ºrk√ße
              </a></li>
              <li><a class="dropdown-item {% if lang == 'ar' %}active{% endif %}" 
                     href="{{ language_url('ar') }}"
                     onclick="console.log('Switching to Arabic');">
                üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©
              </a></li>
            </ul>
          </div>
          
          {% if current_user.is_authenticated %}
          <!-- User Menu with Everything Inside -->
          <div class="dropdown" style="position: relative; z-index: 1002;">
            <button class="btn user-btn-modern" 
                    type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false"
                    title="{{ current_user.name }}">
              <div class="user-avatar">
                <i class="bi bi-person-circle"></i>
              </div>
            </button>
            <ul class="dropdown-menu dropdown-menu-end user-dropdown" aria-labelledby="userDropdown">
              <!-- User Info Header -->
              <li class="dropdown-header">
                <div class="user-info">
                  <div class="user-details">
                    <strong>{{ current_user.name }}</strong>
                    <small class="text-muted d-block">{{ current_user.email }}</small>
                  </div>
                </div>
              </li>
              
              <!-- Gamification Section -->
              <li class="dropdown-header border-bottom">
                <div class="user-stats">
                  <div class="stat-item">
                    <span class="level-badge">
                      <i class="bi bi-star-fill"></i>
                      Level {{ get_user_level() }}
                    </span>
                    <span class="xp-counter">
                      <i class="bi bi-lightning-fill"></i>
                      {{ get_user_xp() }} XP
                    </span>
                  </div>
                  <div class="achievements-link-wrapper mt-2">
                    <a href="{{ url_for('virtual_patient_bp.achievements', lang=lang) }}" 
                       class="achievements-link">
                      <i class="bi bi-trophy-fill"></i>
                      {{ t('achievements', lang)|default('–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è') }}
                    </a>
                  </div>
                </div>
              </li>
              
              <!-- Navigation Items -->
              <li><a class="dropdown-item" href="{{ url_for('main_bp.profile', lang=lang) }}">
                <i class="bi bi-person"></i>
                {{ t('profile', lang) }}
              </a></li>
              
              {% if current_user.is_admin %}
              <li><a class="dropdown-item" href="{{ url_for('admin_bp.dashboard', lang=lang) }}">
                <i class="bi bi-gear"></i>
                {{ t('admin_panel', lang) }}
              </a></li>
              {% endif %}
              
              <li><hr class="dropdown-divider"></li>
              
              <!-- Theme Switcher -->
              <li class="dropdown-header">
                <span class="text-muted small">{{ t('themes', lang)|default('–¢–µ–º—ã') }}</span>
              </li>
              <li>
                <div class="theme-switcher-inline">
                  <button class="theme-btn" data-theme="light" title="{{ t('light_theme', lang)|default('–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞') }}">
                    <i class="bi bi-sun-fill"></i>
                  </button>
                  <button class="theme-btn" data-theme="dark" title="{{ t('dark_theme', lang)|default('–¢–µ–º–Ω–∞—è —Ç–µ–º–∞') }}">
                    <i class="bi bi-moon-fill"></i>
                  </button>
                  <button class="theme-btn" data-theme="gradient" title="{{ t('gradient_theme', lang)|default('–°—Ç–µ–∫–ª—è–Ω–Ω–∞—è —Ç–µ–º–∞') }}">
                    <i class="bi bi-droplet-half"></i>
                  </button>
                </div>
              </li>
              
              <li><hr class="dropdown-divider"></li>
              
              <!-- Logout -->
              <li><a class="dropdown-item text-danger" href="{{ url_for('auth_bp.logout', lang=lang) }}">
                <i class="bi bi-box-arrow-right"></i>
                {{ t('logout', lang) }}
              </a></li>
            </ul>
          </div>
          
          {% else %}
          <!-- Guest Actions -->
          <div class="guest-actions d-flex">
            <a href="{{ url_for('auth_bp.login', lang=lang) }}" 
               class="btn btn-outline-primary me-2">
              <i class="bi bi-box-arrow-in-right"></i>
              <span class="d-none d-md-inline ms-1">{{ t('login', lang) }}</span>
            </a>
            <a href="{{ url_for('auth_bp.register', lang=lang) }}" 
               class="btn btn-primary">
              <i class="bi bi-person-plus"></i>
              <span class="d-none d-md-inline ms-1">{{ t('register', lang) }}</span>
            </a>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
/* ===== –†–ê–î–ò–ö–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –®–ê–ü–ö–ò - –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ô –ü–†–ò–û–†–ò–¢–ï–¢ ===== */

/* –ü–û–õ–ù–û–ï –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï BOOTSTRAP –°–¢–ò–õ–ï–ô */
header.modern-header {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  height: 70px !important;
  min-height: 70px !important;
  max-height: 70px !important;
  z-index: 1000 !important;
  background: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(10px) !important;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;
  display: flex !important;
  align-items: center !important;
  padding: 0 !important;
  margin: 0 !important;
  overflow: visible !important;
}

header.modern-header nav.navbar {
  width: 100% !important;
  height: 100% !important;
  min-height: 100% !important;
  max-height: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-wrap: nowrap !important;
}

header.modern-header nav.navbar .container {
  width: 100% !important;
  max-width: 1200px !important;
  height: 100% !important;
  min-height: 100% !important;
  max-height: 100% !important;
  margin: 0 auto !important;
  padding: 0 1.5rem !important;
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  flex-wrap: nowrap !important;
  flex-direction: row !important;
}

header.modern-header .navbar-brand {
  display: flex !important;
  align-items: center !important;
  height: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
  flex-shrink: 0 !important;
  order: 1 !important;
}

header.modern-header .navbar-brand img {
  height: 40px !important;
  width: auto !important;
  max-height: 40px !important;
  object-fit: contain !important;
}

header.modern-header .navbar-collapse {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  flex: 1 !important;
  height: 100% !important;
  margin: 0 1rem !important;
  flex-wrap: nowrap !important;
  flex-direction: row !important;
  order: 2 !important;
}

header.modern-header .navbar-nav {
  display: flex !important;
  align-items: center !important;
  flex-direction: row !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  list-style: none !important;
  flex-wrap: nowrap !important;
  gap: 0.5rem !important;
}

header.modern-header .navbar-nav .nav-item {
  display: flex !important;
  align-items: center !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
}

header.modern-header .navbar-nav .nav-link {
  display: flex !important;
  align-items: center !important;
  height: auto !important;
  padding: 0.5rem 1rem !important;
  margin: 0 !important;
  color: #333 !important;
  text-decoration: none !important;
  border-radius: 8px !important;
  transition: all 0.3s ease !important;
  white-space: nowrap !important;
  flex-shrink: 0 !important;
}

header.modern-header .navbar-actions {
  display: flex !important;
  align-items: center !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  gap: 0.5rem !important;
  flex-wrap: nowrap !important;
  flex-direction: row !important;
  flex-shrink: 0 !important;
}

header.modern-header .dropdown,
header.modern-header .btn,
header.modern-header .dropdown-toggle {
  display: flex !important;
  align-items: center !important;
  height: auto !important;
  padding: 0.5rem 1rem !important;
  margin: 0 !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
  border-radius: 8px !important;
  background: rgba(255, 255, 255, 0.8) !important;
  color: #333 !important;
  text-decoration: none !important;
  transition: all 0.3s ease !important;
  white-space: nowrap !important;
  flex-shrink: 0 !important;
}

header.modern-header .navbar-toggler {
  display: none !important;
  order: 3 !important;
}

/* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
[data-theme="dark"] header.modern-header {
  background: rgba(15, 23, 42, 0.95) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
}

[data-theme="dark"] header.modern-header .nav-link {
  color: #f8fafc !important;
}

[data-theme="dark"] header.modern-header .dropdown,
[data-theme="dark"] header.modern-header .btn,
[data-theme="dark"] header.modern-header .dropdown-toggle {
  background: rgba(30, 41, 59, 0.8) !important;
  border-color: rgba(255, 255, 255, 0.1) !important;
  color: #f8fafc !important;
}

/* –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */
@media (max-width: 992px) {
  header.modern-header {
    height: 60px !important;
    min-height: 60px !important;
    max-height: 60px !important;
  }
  
  header.modern-header .navbar-brand img {
    height: 32px !important;
    max-height: 32px !important;
  }
  
  header.modern-header .navbar-toggler {
    display: block !important;
    border: none !important;
    background: none !important;
    padding: 0.25rem !important;
    margin-left: auto !important;
  }
  
  header.modern-header .navbar-collapse {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    right: 0 !important;
    background: rgba(255, 255, 255, 0.98) !important;
    backdrop-filter: blur(20px) !important;
    border-radius: 0 0 16px 16px !important;
    padding: 1rem !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
    flex-direction: column !important;
    align-items: stretch !important;
    height: auto !important;
    z-index: 1001 !important;
    display: none !important;
  }
  
  header.modern-header .navbar-collapse.show {
    display: flex !important;
  }
  
  header.modern-header .navbar-nav {
    flex-direction: column !important;
    width: 100% !important;
    height: auto !important;
    gap: 0.5rem !important;
  }
  
  header.modern-header .navbar-actions {
    flex-direction: column !important;
    width: 100% !important;
    height: auto !important;
    margin-top: 1rem !important;
    padding-top: 1rem !important;
    border-top: 1px solid rgba(0, 0, 0, 0.1) !important;
  }
}

/* –ü–õ–ê–ù–®–ï–¢–´ (768px - 1024px) - –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ü–†–ê–í–ò–õ–ê */
@media (min-width: 768px) and (max-width: 1024px) {
  header.modern-header {
    height: 65px !important;
  }
  
  header.modern-header .navbar-brand img {
    height: 36px !important;
  }
  
  /* –ù–ê –ü–õ–ê–ù–®–ï–¢–ê–• –ù–ê–í–ò–ì–ê–¶–ò–Ø –û–°–¢–ê–ï–¢–°–Ø –ì–û–†–ò–ó–û–ù–¢–ê–õ–¨–ù–û–ô */
  header.modern-header .navbar-collapse {
    position: static !important;
    display: flex !important;
    flex-direction: row !important;
    background: transparent !important;
    backdrop-filter: none !important;
    border-radius: 0 !important;
    padding: 0 !important;
    box-shadow: none !important;
    height: 100% !important;
    z-index: auto !important;
  }
  
  header.modern-header .navbar-nav {
    flex-direction: row !important;
    height: 100% !important;
    gap: 0.25rem !important;
  }
  
  header.modern-header .navbar-actions {
    flex-direction: row !important;
    height: 100% !important;
    margin-top: 0 !important;
    padding-top: 0 !important;
    border-top: none !important;
    gap: 0.25rem !important;
  }
  
  /* –°–ö–†–´–í–ê–ï–ú –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –ù–ê –ü–õ–ê–ù–®–ï–¢–ê–• */
  header.modern-header .navbar-toggler {
    display: none !important;
  }
  
  /* –£–ú–ï–ù–¨–®–ê–ï–ú –†–ê–ó–ú–ï–†–´ –≠–õ–ï–ú–ï–ù–¢–û–í */
  header.modern-header .nav-link,
  header.modern-header .dropdown-toggle,
  header.modern-header .btn {
    padding: 0.4rem 0.8rem !important;
    font-size: 0.9rem !important;
  }
}

/* –¢–û–õ–¨–ö–û –¢–ï–õ–ï–§–û–ù–´ (–¥–æ 768px) */
@media (max-width: 767px) {
  header.modern-header {
    height: 60px !important;
  }
  
  header.modern-header .navbar-brand img {
    height: 32px !important;
  }
  
  header.modern-header .navbar-toggler {
    display: block !important;
  }
  
  header.modern-header .navbar-collapse {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    right: 0 !important;
    background: rgba(255, 255, 255, 0.98) !important;
    backdrop-filter: blur(20px) !important;
    border-radius: 0 0 16px 16px !important;
    padding: 1rem !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
    flex-direction: column !important;
    align-items: stretch !important;
    height: auto !important;
    z-index: 1001 !important;
    display: none !important;
  }
  
  header.modern-header .navbar-collapse.show {
    display: flex !important;
  }
}

/* ===== –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –°–¢–ò–õ–ò –®–ê–ü–ö–ò ===== */

/* –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */


.modern-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: var(--header-z-index);
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border-bottom: 1px solid var(--border-color);
  transition: all var(--transition-slow);
  box-shadow: var(--shadow-sm);
  height: var(--header-height);
  display: flex;
  align-items: center;
}

.modern-header.scrolled {
  background: var(--glass-hover);
  box-shadow: var(--shadow-lg);
}

.modern-header.hidden {
  transform: translateY(-100%);
}

.navbar {
  padding: 0;
  height: 100%;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.navbar .container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1.5rem;
  height: 100%;
  flex-wrap: nowrap;
}

.navbar-brand {
  font-weight: 800;
  font-size: 1.5rem;
  transition: transform var(--transition-normal);
  text-decoration: none;
  display: flex;
  align-items: center;
  height: 100%;
}

.navbar-brand:hover {
  transform: scale(1.05);
}

.navbar-brand img {
  transition: all var(--transition-normal);
  height: 40px;
  width: auto;
}

.navbar-brand:hover img {
  filter: brightness(1.1);
}

/* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
.navbar-collapse {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex: 1;
  height: 100%;
  flex-wrap: nowrap;
}

.navbar-nav {
  display: flex;
  align-items: center;
  margin: 0;
  padding: 0;
  list-style: none;
  height: 100%;
  flex-wrap: nowrap;
}

.navbar-nav .nav-item {
  display: flex;
  align-items: center;
  height: 100%;
}

.navbar-actions {
  display: flex;
  align-items: center;
  margin-left: auto;
  height: 100%;
  flex-wrap: nowrap;
  gap: 0.5rem;
}

/* Hamburger Menu */
.navbar-toggler {
  border: none;
  padding: 0.5rem;
  background: var(--glass-bg);
  border-radius: var(--radius-md);
  width: 40px;
  height: 40px;
  position: relative;
  transition: all var(--transition-normal);
  display: none;
}

.navbar-toggler:focus {
  box-shadow: none;
}

.navbar-toggler span {
  display: block;
  width: 20px;
  height: 2px;
  background: var(--text-primary);
  margin: 4px auto;
  transition: all var(--transition-normal);
  border-radius: 1px;
}

.navbar-toggler:not(.collapsed) span:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}

.navbar-toggler:not(.collapsed) span:nth-child(2) {
  opacity: 0;
}

.navbar-toggler:not(.collapsed) span:nth-child(3) {
  transform: rotate(-45deg) translate(7px, -6px);
}

/* Navigation Links */
.nav-link {
  color: var(--text-secondary) !important;
  font-weight: 500;
  padding: 0.5rem 1rem !important;
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
  position: relative;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  height: 100%;
  white-space: nowrap;
}

.nav-link::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  transform: translateX(-50%);
  transition: width var(--transition-normal);
}

.nav-link:hover::before {
  width: 80%;
}

.nav-link:hover {
  color: var(--primary-color) !important;
  background: var(--glass-bg);
  transform: translateY(-2px);
}

.nav-link.active {
  color: var(--primary-color) !important;
  background: var(--glass-bg);
  box-shadow: var(--shadow-sm);
}

.nav-link.active::before {
  width: 80%;
}

/* Dropdown Styles */
.dropdown-toggle,
.btn {
  border-radius: var(--radius-md) !important;
  transition: all var(--transition-normal);
  border: 1px solid var(--border-color) !important;
  display: flex;
  align-items: center;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.8);
  color: var(--text-primary);
  text-decoration: none;
  height: auto;
  white-space: nowrap;
  flex-shrink: 0;
  cursor: pointer;
  pointer-events: auto !important;
  z-index: 1001;
  position: relative;
}

.dropdown-toggle:hover,
.btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
  background: rgba(255, 255, 255, 1);
}

.dropdown-menu {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  backdrop-filter: var(--glass-blur);
  padding: 0.5rem;
  margin-top: 0.5rem;
  animation: dropdownSlide 0.3s ease;
  min-width: 220px;
  z-index: 1050 !important;
  position: absolute !important;
  max-height: 70vh !important;
  overflow-y: auto !important;
}

/* –¢–ï–ú–ù–ê–Ø –¢–ï–ú–ê - –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–õ–Ø DROPDOWN */
[data-theme="dark"] .dropdown-menu {
  background: rgba(30, 41, 59, 0.95) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  backdrop-filter: blur(20px) !important;
  color: #f8fafc !important;
}

[data-theme="dark"] .dropdown-item {
  color: #f8fafc !important;
}

[data-theme="dark"] .dropdown-item:hover {
  background: rgba(62, 205, 193, 0.2) !important;
  color: #ffffff !important;
}

[data-theme="dark"] .dropdown-header {
  color: #f8fafc !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
}

[data-theme="dark"] .user-details strong {
  color: #f8fafc !important;
}

[data-theme="dark"] .user-details small {
  color: #cbd5e1 !important;
}

/* –ì–†–ê–î–ò–ï–ù–¢–ù–ê–Ø –¢–ï–ú–ê - –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–õ–Ø DROPDOWN */
[data-theme="gradient"] .dropdown-menu {
  background: rgba(0, 0, 0, 0.8) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(25px) !important;
  color: #ffffff !important;
}

[data-theme="gradient"] .dropdown-item {
  color: #ffffff !important;
}

[data-theme="gradient"] .dropdown-item:hover {
  background: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
}

/* –î–£–ë–õ–ò–†–£–Æ–©–ò–ï–°–Ø –°–¢–ò–õ–ò –£–î–ê–õ–ï–ù–´ - –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø –°–¢–ò–õ–ò –ù–ò–ñ–ï */

/* –ú–û–ë–ò–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–õ–Ø –ü–û–ó–ò–¶–ò–û–ù–ò–†–û–í–ê–ù–ò–Ø */
@media (max-width: 767px) {
  .dropdown-menu {
    position: static !important;
    width: 100% !important;
    margin-top: 0.5rem !important;
    border: none !important;
    box-shadow: none !important;
    max-height: none !important;
    overflow-y: visible !important;
  }
  
  .language-menu {
    position: static !important;
    width: 100% !important;
    margin-top: 0.5rem !important;
    border: none !important;
    box-shadow: none !important;
  }
}

@keyframes dropdownSlide {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.dropdown-item {
  color: var(--text-secondary);
  padding: 0.75rem 1rem;
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-weight: 500;
  text-decoration: none;
  border: none;
  background: none;
  width: 100%;
  text-align: left;
}

.dropdown-item:hover {
  background: var(--glass-bg);
  color: var(--primary-color);
  transform: translateX(5px);
}

.dropdown-item.active {
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  color: white;
}

.dropdown-item.text-danger {
  color: var(--danger-color);
}

.dropdown-item.text-danger:hover {
  background: rgba(231, 76, 60, 0.1);
  color: var(--danger-color);
}

.dropdown-item i {
  width: 16px;
  text-align: center;
  transition: transform var(--transition-normal);
}

.dropdown-item:hover i {
  transform: scale(1.1);
}

.dropdown-header {
  padding: 1rem;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 0.5rem;
}

.dropdown-header.border-bottom {
  border-bottom: 1px solid var(--border-color);
}

/* User Info Styles */
.user-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.user-details strong {
  color: var(--text-primary);
  font-size: 1rem;
}

.user-details small {
  font-size: 0.8rem;
  opacity: 0.8;
}

/* User Stats in Dropdown */
.user-stats {
  text-align: center;
}

.stat-item {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin-bottom: 0.5rem;
}

.level-badge {
  background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: var(--radius-full);
  font-size: 0.8rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.25rem;
  box-shadow: var(--shadow-sm);
}

.xp-counter {
  color: var(--text-secondary);
  font-size: 0.8rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.achievements-link-wrapper {
  display: flex;
  justify-content: center;
}

.achievements-link {
  color: var(--accent-color);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
}

.achievements-link:hover {
  background: var(--glass-bg);
  transform: scale(1.05);
}

/* Language Button */
.language-btn {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  min-width: 70px;
  justify-content: center;
}

/* User Button */
.user-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)) !important;
  border: none !important;
  position: relative;
  overflow: visible;
  padding: 0.5rem 1rem !important;
}

.user-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s ease;
}

.user-btn:hover::before {
  left: 100%;
}

.user-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(62, 205, 193, 0.3);
}

.user-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
}

/* Button Enhancements */
.btn {
  border-radius: var(--radius-md) !important;
  font-weight: 600;
  transition: all var(--transition-normal);
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem 1rem !important;
}

.btn-primary {
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)) !important;
  border: none !important;
  position: relative;
  overflow: visible;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(62, 205, 193, 0.3);
}

.btn-outline-primary {
  border-color: var(--primary-color) !important;
  color: var(--primary-color) !important;
  background: transparent;
}

.btn-outline-primary:hover {
  background: var(--primary-color) !important;
  border-color: var(--primary-color) !important;
  color: white !important;
  transform: translateY(-2px);
}

/* Theme Toggle in Dropdown */
.theme-toggle-inline {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-normal);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  width: 100%;
  text-align: left;
  padding: 0.75rem 1rem;
  border-radius: var(--radius-md);
}

.theme-toggle-inline:hover {
  background: var(--glass-bg);
  color: var(--primary-color);
  transform: translateX(5px);
}

.theme-icon {
  font-size: 1rem;
  transition: transform var(--transition-normal);
  width: 16px;
  text-align: center;
}

.theme-toggle-inline:hover .theme-icon {
  transform: rotate(180deg);
}

/* ===== –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–¢–°–¢–£–ü–û–í ===== */

/* –£–ë–ò–†–ê–ï–ú –≥–ª–æ–±–∞–ª—å–Ω—ã–π padding-top —É body */
body {
  padding-top: 0 !important;
  margin: 0;
}

/* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã –¢–û–õ–¨–ö–û –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ */
.main-content {
  margin-top: var(--header-height);
  min-height: calc(100vh - var(--header-height));
  padding-top: 0 !important;
}

/* –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è hero-—Å–µ–∫—Ü–∏–∏ */
.hero-section {
  padding-top: calc(var(--header-height) + 2rem);
  min-height: 100vh;
}

/* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∫–∞—Ä—Ç—ã –æ–±—É—á–µ–Ω–∏—è */
.learning-map-container .main-container {
  margin-top: var(--header-height);
  min-height: calc(100vh - var(--header-height));
}

/* Mobile Responsive */
@media (max-width: 992px) {
  
  
  .navbar-toggler {
    display: block;
    order: 3;
    margin-left: auto;
  }
  
  .navbar-brand {
    order: 1;
  }
  
  .navbar-collapse {
    order: 4;
    width: 100%;
  }
  
  .navbar-collapse {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    margin-top: 1rem;
    padding: 1.5rem;
    box-shadow: var(--shadow-xl);
    backdrop-filter: var(--glass-blur);
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    flex-direction: column;
    align-items: stretch;
  }

  .navbar-nav {
    flex-direction: column;
    width: 100%;
  }

  .nav-link {
    margin: 0.25rem 0;
  }

  .navbar-actions {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border-color);
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 1rem;
    margin-left: 0;
  }

  .dropdown {
    width: 100%;
  }

  .dropdown-toggle {
    width: 100%;
    justify-content: space-between;
  }

  .guest-actions {
    flex-direction: column !important;
    gap: 0.5rem;
  }

  .guest-actions .btn {
    width: 100%;
    justify-content: center;
  }

  .user-dropdown {
    position: static !important;
    transform: none !important;
    border: none;
    box-shadow: none;
    background: var(--glass-bg);
    margin-top: 1rem;
  }
  
  .hero-section {
    padding-top: calc(var(--header-mobile-height) + 1rem);
  }
}

@media (max-width: 576px) {
  .navbar {
    padding: 0.75rem 0;
  }
  
  .navbar-brand img {
    height: 32px;
  }
  
  .btn span {
    display: none;
  }
  
  .language-btn {
    min-width: 45px;
  }
}

/* ===== –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –Ø–ó–´–ö–û–í–û–ô –ö–ù–û–ü–ö–ò –ë–ï–ó BOOTSTRAP –ö–û–ù–§–õ–ò–ö–¢–û–í ===== */
.language-dropdown {
  position: relative !important;
  z-index: 9999 !important;
  display: inline-block !important;
}

.language-dropdown .language-btn {
  pointer-events: auto !important;
  cursor: pointer !important;
  user-select: none !important;
  border: 1px solid var(--primary-color) !important;
  background: rgba(255, 255, 255, 0.9) !important;
  color: var(--primary-color) !important;
  transition: all 0.3s ease !important;
  font-weight: 500 !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.25rem !important;
}

.language-dropdown .language-btn:hover,
.language-dropdown .language-btn:focus {
  background-color: var(--primary-color) !important;
  color: white !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
  outline: none !important;
}

.language-dropdown .language-btn[aria-expanded="true"] {
  background-color: var(--primary-color) !important;
  color: white !important;
}

.language-menu {
  position: absolute !important;
  top: calc(100% + 0.5rem) !important;
  right: 0 !important;
  z-index: 10000 !important;
  min-width: 180px !important;
  border: 1px solid rgba(0, 0, 0, 0.15) !important;
  border-radius: 8px !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
  background: white !important;
  backdrop-filter: blur(10px) !important;
  opacity: 0 !important;
  visibility: hidden !important;
  transform: translateY(-10px) !important;
  transition: all 0.2s ease !important;
  padding: 0.5rem 0 !important;
  list-style: none !important;
  margin: 0 !important;
}

/* –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –î–õ–Ø –¢–ï–ú–ù–û–ô –¢–ï–ú–´ */
[data-theme="dark"] .language-menu {
  background: rgba(30, 41, 59, 0.95) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  backdrop-filter: blur(20px) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4) !important;
}

[data-theme="gradient"] .language-menu {
  background: rgba(0, 0, 0, 0.8) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(25px) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6) !important;
}

.language-menu.show {
  opacity: 1 !important;
  visibility: visible !important;
  transform: translateY(0) !important;
  display: block !important;
}

.language-menu .dropdown-item {
  padding: 0.5rem 1rem !important;
  font-size: 0.9rem !important;
  transition: all 0.2s ease !important;
  border: none !important;
  cursor: pointer !important;
  color: #333 !important;
}

.language-menu .dropdown-item:hover {
  background-color: var(--primary-color) !important;
  color: white !important;
  transform: translateX(2px) !important;
}

.language-menu .dropdown-item.active {
  background-color: rgba(var(--primary-color), 0.1) !important;
  color: var(--primary-color) !important;
  font-weight: 600 !important;
}

/* –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –¢–ï–ö–°–¢–ê –î–õ–Ø –¢–ï–ú–ù–û–ô –¢–ï–ú–´ */
[data-theme="dark"] .language-menu .dropdown-item {
  color: #f8fafc !important;
}

[data-theme="dark"] .language-menu .dropdown-item:hover {
  background-color: var(--primary-color) !important;
  color: white !important;
}

[data-theme="dark"] .language-menu .dropdown-item.active {
  background-color: rgba(62, 205, 193, 0.2) !important;
  color: #3ECDC1 !important;
}

/* –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –¢–ï–ö–°–¢–ê –î–õ–Ø –ì–†–ê–î–ò–ï–ù–¢–ù–û–ô –¢–ï–ú–´ */
[data-theme="gradient"] .language-menu .dropdown-item {
  color: #ffffff !important;
}

[data-theme="gradient"] .language-menu .dropdown-item:hover {
  background-color: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
}

[data-theme="gradient"] .language-menu .dropdown-item.active {
  background-color: rgba(255, 255, 255, 0.1) !important;
  color: #ffffff !important;
}

/* –ú–æ–±–∏–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —è–∑—ã–∫–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ */
@media (max-width: 768px) {
  .language-dropdown {
    width: 100% !important;
  }
  
  .language-dropdown .dropdown-toggle {
    width: 100% !important;
    justify-content: space-between !important;
  }
  
  .language-menu {
    position: static !important;
    width: 100% !important;
    margin-top: 0.5rem !important;
    border: none !important;
    box-shadow: none !important;
    background: rgba(255, 255, 255, 0.05) !important;
  }
  
  /* –¢–ï–ú–ù–ê–Ø –¢–ï–ú–ê –ù–ê –ú–û–ë–ò–õ–¨–ù–´–• */
  [data-theme="dark"] .language-menu {
    background: rgba(30, 41, 59, 0.95) !important;
  }
  
  [data-theme="gradient"] .language-menu {
    background: rgba(0, 0, 0, 0.8) !important;
  }
  }
</style>

<!-- ===== –°–¢–ò–õ–ò –î–õ–Ø INLINE –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–Ø –¢–ï–ú ===== -->
<style>
.theme-switcher-inline {
  display: flex !important;
  gap: 0.5rem !important;
  padding: 0.5rem 1rem !important;
  justify-content: center !important;
  align-items: center !important;
  background: rgba(0, 0, 0, 0.02) !important;
  border-radius: 8px !important;
  margin: 0.25rem 0 !important;
}

.theme-btn {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 36px !important;
  height: 36px !important;
  border: 2px solid transparent !important;
  border-radius: 50% !important;
  background: transparent !important;
  color: var(--text-secondary, #666) !important;
  font-size: 16px !important;
  cursor: pointer !important;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
  position: relative !important;
  overflow: hidden !important;
}

.theme-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: var(--primary-color, #3ECDC1);
  opacity: 0.1;
  transform: translate(-50%, -50%);
  transition: all 0.3s ease;
  z-index: 0;
}

.theme-btn:hover::before {
  width: 100%;
  height: 100%;
}

.theme-btn:hover {
  color: var(--primary-color, #3ECDC1) !important;
  transform: translateY(-3px) scale(1.05) !important;
  box-shadow: 
    0 8px 25px rgba(62, 205, 193, 0.25),
    0 2px 0 rgba(255, 255, 255, 0.3) inset !important;
  background: var(--bg-surface, rgba(255, 255, 255, 0.15)) !important;
}

.theme-btn:active {
  transform: translateY(0) scale(0.95) !important;
}

.theme-btn i {
  position: relative;
  z-index: 1;
}

/* ===== –°–û–°–¢–û–Ø–ù–ò–Ø –ê–ö–¢–ò–í–ù–´–• –¢–ï–ú ===== */
.theme-btn.active {
  color: #ffffff !important;
  border-color: var(--primary-color, #3ECDC1) !important;
  background: var(--primary-color, #3ECDC1) !important;
  box-shadow: 
    0 4px 15px rgba(62, 205, 193, 0.3),
    0 0 0 3px rgba(62, 205, 193, 0.1) !important;
  transform: scale(1.1) !important;
}

.theme-btn.active::before {
  width: 100%;
  height: 100%;
  opacity: 0.2;
  background: #ffffff;
}

/* ===== –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ö–ê–ñ–î–û–ô –¢–ï–ú–´ ===== */
.theme-btn[data-theme="light"]:hover {
  color: #f59e0b !important;
  border-color: #f59e0b !important;
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2) !important;
}

.theme-btn[data-theme="light"].active {
  background: #f59e0b !important;
  border-color: #f59e0b !important;
  box-shadow: 
    0 4px 15px rgba(245, 158, 11, 0.3),
    0 0 0 3px rgba(245, 158, 11, 0.1) !important;
}

.theme-btn[data-theme="dark"]:hover {
  color: #8b5cf6 !important;
  border-color: #8b5cf6 !important;
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2) !important;
}

.theme-btn[data-theme="dark"].active {
  background: #8b5cf6 !important;
  border-color: #8b5cf6 !important;
  box-shadow: 
    0 4px 15px rgba(139, 92, 246, 0.3),
    0 0 0 3px rgba(139, 92, 246, 0.1) !important;
}

.theme-btn[data-theme="gradient"]:hover {
  color: #06b6d4 !important;
  border-color: #06b6d4 !important;
  box-shadow: 0 4px 12px rgba(6, 182, 212, 0.2) !important;
}

.theme-btn[data-theme="gradient"].active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  border-color: #667eea !important;
  box-shadow: 
    0 4px 15px rgba(102, 126, 234, 0.3),
    0 0 0 3px rgba(102, 126, 234, 0.1) !important;
}

/* ===== –ê–ù–ò–ú–ê–¶–ò–Ø –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø ===== */
@keyframes themeSwitch {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1.1);
  }
}

.theme-btn.switching {
  animation: themeSwitch 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .theme-switcher-inline {
    padding: 0.75rem 1rem !important;
    gap: 0.75rem !important;
  }
  
  .theme-btn {
    width: 40px !important;
    height: 40px !important;
    font-size: 18px !important;
  }
}
</style>

<!-- ===== –°–û–í–†–ï–ú–ï–ù–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ö–û–ú–ü–ê–ö–¢–ù–´–• –ö–ù–û–ü–û–ö ===== -->
<style>
/* ===== –ö–û–ú–ü–ê–ö–¢–ù–´–ï –ö–ù–û–ü–ö–ò –Ø–ó–´–ö–ê –ò –ü–†–û–§–ò–õ–Ø ===== */
.language-btn-modern,
.user-btn-modern {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 44px !important;
  height: 44px !important;
  border: none !important;
  border-radius: 50% !important;
  background: var(--bg-surface-alpha, rgba(255, 255, 255, 0.1)) !important;
  backdrop-filter: blur(10px) !important;
  color: var(--text-primary, #333) !important;
  font-size: 18px !important;
  cursor: pointer !important;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
  position: relative !important;
  overflow: hidden !important;
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.1),
    0 1px 0 rgba(255, 255, 255, 0.2) inset !important;
  text-decoration: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

.language-btn-modern::before,
.user-btn-modern::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: var(--primary-color, #3ECDC1);
  opacity: 0.15;
  transform: translate(-50%, -50%);
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  z-index: 0;
}

.language-btn-modern:hover::before,
.user-btn-modern:hover::before {
  width: 120%;
  height: 120%;
  opacity: 0.2;
}

.language-btn-modern:hover,
.user-btn-modern:hover {
  color: var(--primary-color, #3ECDC1) !important;
  border: none !important;
  transform: translateY(-3px) scale(1.05) !important;
  box-shadow: 
    0 8px 25px rgba(62, 205, 193, 0.25),
    0 2px 0 rgba(255, 255, 255, 0.3) inset !important;
  background: var(--bg-surface, rgba(255, 255, 255, 0.15)) !important;
}

.language-btn-modern:active,
.user-btn-modern:active {
  transform: translateY(-1px) scale(0.98) !important;
  box-shadow: 
    0 4px 15px rgba(62, 205, 193, 0.2),
    0 1px 0 rgba(255, 255, 255, 0.2) inset !important;
}

.language-btn-modern i,
.user-btn-modern i {
  position: relative;
  z-index: 1;
  font-size: 18px !important;
  transition: all 0.3s ease !important;
}

.language-btn-modern:hover i,
.user-btn-modern:hover i {
  transform: scale(1.1) !important;
}

/* ===== –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø USER AVATAR ===== */
.user-btn-modern .user-avatar {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 100% !important;
  height: 100% !important;
  position: relative !important;
  z-index: 1 !important;
}

.user-btn-modern .user-avatar i {
  font-size: 20px !important;
}

/* ===== –ê–ù–ò–ú–ê–¶–ò–Ø –ü–£–õ–¨–°–ê–¶–ò–ò ===== */
@keyframes buttonPulse {
  0% {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 0 0 0 rgba(62, 205, 193, 0.4);
  }
  50% {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 0 0 8px rgba(62, 205, 193, 0);
  }
  100% {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 0 0 0 rgba(62, 205, 193, 0);
  }
}

.language-btn-modern:focus,
.user-btn-modern:focus {
  outline: none !important;
  animation: buttonPulse 1.5s infinite !important;
}

/* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ===== */
@media (max-width: 768px) {
  .language-btn-modern,
  .user-btn-modern {
    width: 40px !important;
    height: 40px !important;
    font-size: 16px !important;
  }
  
  .user-btn-modern .user-avatar i {
    font-size: 18px !important;
  }
}

@media (max-width: 576px) {
  .language-btn-modern,
  .user-btn-modern {
    width: 38px !important;
    height: 38px !important;
    font-size: 15px !important;
  }
  
  .user-btn-modern .user-avatar i {
    font-size: 17px !important;
  }
}

/* ===== LOADING STATE ===== */
.language-btn-modern.loading,
.user-btn-modern.loading {
  pointer-events: none !important;
  opacity: 0.7 !important;
}

.language-btn-modern.loading::after,
.user-btn-modern.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  border: 2px solid transparent;
  border-top: 2px solid var(--primary-color, #3ECDC1);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  animation: spin 1s linear infinite;
  z-index: 2;
}

@keyframes spin {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* ===== –¢–ï–ú–ù–ê–Ø –¢–ï–ú–ê –î–õ–Ø –ö–ù–û–ü–û–ö ===== */
[data-theme="dark"] .language-btn-modern,
[data-theme="dark"] .user-btn-modern {
  background: rgba(30, 41, 59, 0.8) !important;
  color: #f8fafc !important;
  border: none !important;
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.3),
    0 1px 0 rgba(255, 255, 255, 0.1) inset !important;
}

[data-theme="dark"] .language-btn-modern:hover,
[data-theme="dark"] .user-btn-modern:hover {
  background: rgba(30, 41, 59, 0.9) !important;
  color: #3ECDC1 !important;
  border: none !important;
  box-shadow: 
    0 8px 25px rgba(62, 205, 193, 0.3),
    0 2px 0 rgba(255, 255, 255, 0.2) inset !important;
}

/* ===== –ì–†–ê–î–ò–ï–ù–¢–ù–ê–Ø –¢–ï–ú–ê –î–õ–Ø –ö–ù–û–ü–û–ö ===== */
[data-theme="gradient"] .language-btn-modern,
[data-theme="gradient"] .user-btn-modern {
  background: rgba(0, 0, 0, 0.4) !important;
  color: #ffffff !important;
  border: none !important;
  backdrop-filter: blur(15px) !important;
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.4),
    0 1px 0 rgba(255, 255, 255, 0.2) inset !important;
}

[data-theme="gradient"] .language-btn-modern:hover,
[data-theme="gradient"] .user-btn-modern:hover {
  background: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
  border: none !important;
  box-shadow: 
    0 8px 25px rgba(255, 255, 255, 0.2),
    0 2px 0 rgba(255, 255, 255, 0.3) inset !important;
}

/* ===== –£–ë–ò–†–ê–ï–ú –ë–ï–õ–´–ï –ö–û–ù–¢–ï–ô–ù–ï–†–´ –í–û–ö–†–£–ì –ö–ù–û–ü–û–ö ===== */

/* –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ —è–∑—ã–∫–∞ –∏ –ø—Ä–æ—Ñ–∏–ª—è */
.language-btn-modern,
.user-btn-modern {
  /* –£–ë–ò–†–ê–ï–ú –ë–ï–õ–´–ô –§–û–ù */
  background: transparent !important;
  /* –£–ë–ò–†–ê–ï–ú –ì–†–ê–ù–ò–¶–´ */
  border: none !important;
  /* –£–ë–ò–†–ê–ï–ú PADDING */
  padding: 0 !important;
  /* –†–ê–ó–ú–ï–†–´ */
  width: 44px !important;
  height: 44px !important;
  border-radius: 50% !important;
  /* –¶–ï–ù–¢–†–ò–†–û–í–ê–ù–ò–ï –ò–ö–û–ù–ö–ò */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  /* –ö–£–†–°–û–† */
  cursor: pointer !important;
  /* –ê–ù–ò–ú–ê–¶–ò–Ø */
  transition: all 0.3s ease !important;
  /* –¶–í–ï–¢ –ò–ö–û–ù–ö–ò */
  color: #6b7280 !important;
  font-size: 20px !important;
}

/* Hover —ç—Ñ—Ñ–µ–∫—Ç –±–µ–∑ –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞ */
.language-btn-modern:hover,
.user-btn-modern:hover {
  background: rgba(62, 205, 193, 0.1) !important;
  color: #3ECDC1 !important;
  transform: scale(1.1) !important;
  border: none !important;
}

/* –£–±–∏—Ä–∞–µ–º Bootstrap —Å—Ç–∏–ª–∏ –¥–ª—è dropdown –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ */
.language-dropdown,
.navbar-actions .dropdown {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–±—â–∏–µ —Å—Ç–∏–ª–∏ header –¥–ª—è dropdown –∫–Ω–æ–ø–æ–∫ */
header.modern-header .dropdown,
header.modern-header .btn {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
}

/* –£–±–∏—Ä–∞–µ–º —Ñ–æ–Ω —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ navbar-actions */
header.modern-header .navbar-actions {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  gap: 1rem !important;
}

/* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è dropdown-toggle */
.language-dropdown .dropdown-toggle,
.navbar-actions .dropdown-toggle {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
  width: 44px !important;
  height: 44px !important;
  border-radius: 50% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  color: #6b7280 !important;
  font-size: 20px !important;
}

/* Focus —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–µ–∑ –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞ */
.language-btn-modern:focus,
.user-btn-modern:focus,
.language-btn-modern:focus-visible,
.user-btn-modern:focus-visible {
  background: rgba(62, 205, 193, 0.1) !important;
  border: none !important;
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(62, 205, 193, 0.3) !important;
}

/* Active —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–µ–∑ –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞ */
.language-btn-modern:active,
.user-btn-modern:active {
  background: rgba(62, 205, 193, 0.2) !important;
  transform: scale(0.95) !important;
  border: none !important;
}

/* –£–±–∏—Ä–∞–µ–º –±–µ–ª—ã–π —Ñ–æ–Ω —É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ */
.navbar-actions .dropdown,
.navbar-actions .language-dropdown {
  background: transparent !important;
  border: none !important;
}

/* –£–±–∏—Ä–∞–µ–º box-shadow —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π */
.navbar-actions * {
  box-shadow: none !important;
  border: none !important;
}

/* –£–±–∏—Ä–∞–µ–º padding —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ actions */
.navbar-actions {
  padding: 0 !important;
  margin: 0 !important;
  background: transparent !important;
}

/* –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫–∏ */
.language-btn-modern i,
.user-btn-modern i {
  font-size: inherit !important;
  color: inherit !important;
}

/* –£–±–∏—Ä–∞–µ–º –ª—é–±—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –±–µ–ª—ã–µ —Ñ–æ–Ω—ã */
.language-dropdown *,
.user-dropdown * {
  background: transparent !important;
  border: none !important;
}

/* –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è dropdown –º–µ–Ω—é (–Ω–µ –∫–Ω–æ–ø–æ–∫) */
.dropdown-menu {
  background: white !important;
  border: 1px solid rgba(0, 0, 0, 0.15) !important;
  border-radius: 8px !important;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175) !important;
}

/* ===== –£–î–ê–õ–Ø–ï–ú –°–¢–ê–†–´–ï –°–¢–ò–õ–ò –°–í–ï–¢–õ–û–ô –¢–ï–ú–´ ===== */

[data-theme="light"] .language-btn-modern:hover,
[data-theme="light"] .user-btn-modern:hover {
  background: rgba(62, 205, 193, 0.1) !important;
  color: #20b2aa !important;
  border: none !important;
}

/* ===== –¢–ï–ú–ù–ê–Ø –¢–ï–ú–ê –ë–ï–ó –ë–ï–õ–û–ì–û –§–û–ù–ê ===== */
[data-theme="dark"] .language-btn-modern,
[data-theme="dark"] .user-btn-modern {
  background: transparent !important;
  color: #e2e8f0 !important;
  border: none !important;
}

[data-theme="dark"] .language-btn-modern:hover,
[data-theme="dark"] .user-btn-modern:hover {
  background: rgba(62, 205, 193, 0.2) !important;
  color: #3ECDC1 !important;
  border: none !important;
}

/* ===== –ì–†–ê–î–ò–ï–ù–¢–ù–ê–Ø –¢–ï–ú–ê –ë–ï–ó –ë–ï–õ–û–ì–û –§–û–ù–ê ===== */
[data-theme="gradient"] .language-btn-modern,
[data-theme="gradient"] .user-btn-modern {
  background: transparent !important;
  color: rgba(255, 255, 255, 0.8) !important;
  border: none !important;
}

[data-theme="gradient"] .language-btn-modern:hover,
[data-theme="gradient"] .user-btn-modern:hover {
  background: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
  border: none !important;
}

/* ===== –°–í–ï–¢–õ–ê–Ø –¢–ï–ú–ê –ë–ï–ó –ë–ï–õ–û–ì–û –§–û–ù–ê ===== */
[data-theme="light"] .language-btn-modern,
[data-theme="light"] .user-btn-modern {
  background: transparent !important;
  color: #64748b !important;
  border: none !important;
}

/* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –ë–ï–ó –ë–ï–õ–û–ì–û –§–û–ù–ê ===== */
@media (max-width: 768px) {
  .language-btn-modern,
  .user-btn-modern {
    width: 40px !important;
    height: 40px !important;
    font-size: 18px !important;
    background: transparent !important;
    border: none !important;
  }
}

@media (max-width: 576px) {
  .language-btn-modern,
  .user-btn-modern {
    width: 38px !important;
    height: 38px !important;
    font-size: 16px !important;
    background: transparent !important;
    border: none !important;
  }
}
</style>

<script>
// –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –Ø–ó–´–ö–û–í–û–ì–û DROPDOWN –ë–ï–ó BOOTSTRAP –ö–û–ù–§–õ–ò–ö–¢–û–í
document.addEventListener('DOMContentLoaded', function() {
  console.log('üîß Initializing language dropdown fix...');
  
  const langDropdown = document.getElementById('languageDropdown');
  const langMenu = document.querySelector('.language-menu');
  
  if (langDropdown && langMenu) {
    console.log('‚úÖ Language dropdown elements found');
    
    // –û—Ç–∫–ª—é—á–∞–µ–º Bootstrap –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    langDropdown.removeAttribute('data-bs-toggle');
    langDropdown.removeAttribute('data-bs-auto-close');
    
    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏
    langDropdown.style.pointerEvents = 'auto';
    langDropdown.style.cursor = 'pointer';
    langDropdown.style.userSelect = 'none';
    langDropdown.style.zIndex = '9999';
    
    langMenu.style.zIndex = '10000';
    langMenu.style.position = 'absolute';
    
    // –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
    langDropdown.addEventListener('click', function(e) {
      console.log('üñ±Ô∏è Language dropdown clicked!');
      e.preventDefault();
      e.stopPropagation();
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –¥—Ä—É–≥–∏–µ dropdown
      document.querySelectorAll('.dropdown-menu').forEach(menu => {
        if (menu !== langMenu && menu.style.display === 'block') {
          menu.style.display = 'none';
          menu.classList.remove('show');
        }
      });
      
      // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ç–µ–∫—É—â–∏–π dropdown
      const isVisible = langMenu.style.display === 'block' || langMenu.classList.contains('show');
      
      if (isVisible) {
        langMenu.style.display = 'none';
        langMenu.classList.remove('show');
        langDropdown.setAttribute('aria-expanded', 'false');
        console.log('üì• Language menu closed');
      } else {
        langMenu.style.display = 'block';
        langMenu.classList.add('show');
        langDropdown.setAttribute('aria-expanded', 'true');
        console.log('üì§ Language menu opened');
      }
    });
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –º–µ–Ω—é
    document.addEventListener('click', function(e) {
      if (!langDropdown.contains(e.target) && !langMenu.contains(e.target)) {
        langMenu.style.display = 'none';
        langMenu.classList.remove('show');
        langDropdown.setAttribute('aria-expanded', 'false');
      }
    });
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    langDropdown.addEventListener('touchstart', function(e) {
      console.log('üì± Language dropdown touched');
      e.stopPropagation();
    }, { passive: false });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é
    langMenu.querySelectorAll('.dropdown-item').forEach(item => {
      item.addEventListener('click', function(e) {
        console.log('üåê Language selected:', this.textContent.trim());
        // –ü–æ–∑–≤–æ–ª—è–µ–º –ø–µ—Ä–µ—Ö–æ–¥—É –ø—Ä–æ–∏–∑–æ–π—Ç–∏
      });
    });
    
    console.log('‚úÖ Language dropdown fixes applied successfully!');
  } else {
    console.error('‚ùå Language dropdown elements not found!');
  }
  
  // –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
  console.log('üîç Dropdown —ç–ª–µ–º–µ–Ω—Ç—ã:', document.querySelectorAll('[data-bs-toggle="dropdown"]'));
  console.log('üîç Bootstrap version:', window.bootstrap?.Dropdown ? 'Available' : 'Not available');
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ z-index
  if (langDropdown) {
    const computedStyle = window.getComputedStyle(langDropdown.parentElement);
    console.log('üîç Z-index —Ä–æ–¥–∏—Ç–µ–ª—è:', computedStyle.zIndex);
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const header = document.querySelector('.modern-header');
  let lastScrollTop = 0;
  const scrollThreshold = 50;

  // Header scroll behavior
  if (header) {
    window.addEventListener('scroll', function() {
      let currentScroll = window.pageYOffset || document.documentElement.scrollTop;
      
      // Add scrolled class for styling
      if (currentScroll > 10) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      
      lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
    }, { passive: true });
  }

  // Close mobile menu when clicking outside
  document.addEventListener('click', function(e) {
    const navbar = document.querySelector('.navbar-collapse');
    const toggle = document.querySelector('.navbar-toggler');
    
    if (navbar && navbar.classList.contains('show') && 
        !navbar.contains(e.target) && 
        !toggle.contains(e.target)) {
      const bsCollapse = bootstrap.Collapse.getInstance(navbar);
      if (bsCollapse) {
        bsCollapse.hide();
      }
    }
  });

  // Auto-close mobile menu when clicking nav links
  document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
    link.addEventListener('click', function() {
      const navbar = document.querySelector('.navbar-collapse');
      if (navbar && navbar.classList.contains('show')) {
        const bsCollapse = bootstrap.Collapse.getInstance(navbar);
        if (bsCollapse) {
          bsCollapse.hide();
        }
      }
    });
  });
});
</script>

<script>
// ===== INLINE THEME SWITCHER CONTROLLER =====
document.addEventListener('DOMContentLoaded', function() {
  console.log('üé® –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è inline –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —Ç–µ–º...');
  
  const themeButtons = document.querySelectorAll('.theme-btn');
  const currentTheme = localStorage.getItem('theme') || 'light';
  
  // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
  function updateActiveButton(activeTheme) {
    themeButtons.forEach(btn => {
      btn.classList.remove('active');
      if (btn.dataset.theme === activeTheme) {
        btn.classList.add('active');
      }
    });
  }
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
  updateActiveButton(currentTheme);
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ç–µ–º
  themeButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const selectedTheme = this.dataset.theme;
      console.log(`üé® –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ç–µ–º—É: ${selectedTheme}`);
      
      // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
      this.classList.add('switching');
      setTimeout(() => {
        this.classList.remove('switching');
      }, 400);
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
      if (window.themeController) {
        window.themeController.setTheme(selectedTheme);
      } else {
        // Fallback –µ—Å–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
        localStorage.setItem('theme', selectedTheme);
        document.documentElement.setAttribute('data-theme', selectedTheme);
      }
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
      updateActiveButton(selectedTheme);
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º dropdown –º–µ–Ω—é
      const dropdownMenu = this.closest('.dropdown-menu');
      if (dropdownMenu) {
        // –ò—â–µ–º Bootstrap dropdown instance
        const dropdown = bootstrap.Dropdown.getInstance(dropdownMenu.previousElementSibling);
        if (dropdown) {
          dropdown.hide();
        } else {
          // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–∫—Ä—ã—Ç–∏—è
          dropdownMenu.classList.remove('show');
          dropdownMenu.style.display = 'none';
        }
      }
      
      console.log(`‚úÖ –¢–µ–º–∞ "${selectedTheme}" –ø—Ä–∏–º–µ–Ω–µ–Ω–∞`);
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º hover —ç—Ñ—Ñ–µ–∫—Ç—ã
    button.addEventListener('mouseenter', function() {
      if (!this.classList.contains('active')) {
        this.style.transform = 'translateY(-2px) scale(1.05)';
      }
    });
    
    button.addEventListener('mouseleave', function() {
      if (!this.classList.contains('active')) {
        this.style.transform = '';
      }
    });
  });
  
  // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã –æ—Ç –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
  window.addEventListener('themechange', function(e) {
    console.log(`üé® –¢–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –∏–∑–≤–Ω–µ: ${e.detail.theme}`);
    updateActiveButton(e.detail.theme);
  });
  
  // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–∞ data-theme
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
        const newTheme = document.documentElement.getAttribute('data-theme');
        console.log(`üé® –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã: ${newTheme}`);
        updateActiveButton(newTheme);
      }
    });
  });
  
  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ['data-theme']
  });
  
  console.log('‚úÖ Inline –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
  console.log(`üé® –¢–µ–∫—É—â–∞—è —Ç–µ–º–∞: ${currentTheme}`);
});
</script>

<script>
// ===== –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ï –≠–§–§–ï–ö–¢–´ –î–õ–Ø –ö–û–ú–ü–ê–ö–¢–ù–´–• –ö–ù–û–ü–û–ö =====
document.addEventListener('DOMContentLoaded', function() {
  console.log('üéØ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫...');
  
  const modernButtons = document.querySelectorAll('.language-btn-modern, .user-btn-modern');
  
  modernButtons.forEach(button => {
    // –≠—Ñ—Ñ–µ–∫—Ç –ø—É–ª—å—Å–∞—Ü–∏–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ
    button.addEventListener('click', function(e) {
      // –°–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –≤–æ–ª–Ω—ã
      const ripple = document.createElement('div');
      const rect = this.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const x = e.clientX - rect.left - size / 2;
      const y = e.clientY - rect.top - size / 2;
      
      ripple.style.cssText = `
        position: absolute;
        left: ${x}px;
        top: ${y}px;
        width: ${size}px;
        height: ${size}px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(62, 205, 193, 0.4) 0%, transparent 70%);
        transform: scale(0);
        animation: rippleEffect 0.6s ease-out;
        pointer-events: none;
        z-index: 10;
      `;
      
      this.appendChild(ripple);
      
      // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
      setTimeout(() => {
        if (ripple.parentNode) {
          ripple.parentNode.removeChild(ripple);
        }
      }, 600);
    });
    
    // –≠—Ñ—Ñ–µ–∫—Ç –º–∞–≥–Ω–µ—Ç–∏–∑–º–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
    button.addEventListener('mouseenter', function() {
      this.style.transform = 'translateY(-2px) scale(1.05) rotate(1deg)';
    });
    
    button.addEventListener('mouseleave', function() {
      this.style.transform = '';
    });
  });
  
  console.log('‚úÖ –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã');
});

// ===== SMART DROPDOWN POSITIONING =====
document.addEventListener('DOMContentLoaded', function() {
  console.log('üìç –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è dropdown...');
  
  function adjustDropdownPosition(dropdown, toggle) {
    if (!dropdown || !toggle) return;
    
    const rect = toggle.getBoundingClientRect();
    const dropdownRect = dropdown.getBoundingClientRect();
    const viewportHeight = window.innerHeight;
    const viewportWidth = window.innerWidth;
    
    // –°–±—Ä–æ—Å —Å—Ç–∏–ª–µ–π –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    dropdown.style.position = 'absolute';
    dropdown.style.top = '';
    dropdown.style.bottom = '';
    dropdown.style.left = '';
    dropdown.style.right = '';
    dropdown.style.transform = '';
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–º–µ—â–∞–µ—Ç—Å—è –ª–∏ dropdown —Å–Ω–∏–∑—É
    const spaceBelow = viewportHeight - rect.bottom;
    const spaceAbove = rect.top;
    const dropdownHeight = dropdownRect.height || 300; // –ø—Ä–∏–º–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞
    
    if (spaceBelow >= dropdownHeight + 10) {
      // –†–∞–∑–º–µ—â–∞–µ–º —Å–Ω–∏–∑—É
      dropdown.style.top = '100%';
      dropdown.style.marginTop = '0.5rem';
    } else if (spaceAbove >= dropdownHeight + 10) {
      // –†–∞–∑–º–µ—â–∞–µ–º —Å–≤–µ—Ä—Ö—É
      dropdown.style.bottom = '100%';
      dropdown.style.marginBottom = '0.5rem';
    } else {
      // –†–∞–∑–º–µ—â–∞–µ–º –≤ –¥–æ—Å—Ç—É–ø–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
      if (spaceBelow > spaceAbove) {
        dropdown.style.top = '100%';
        dropdown.style.marginTop = '0.5rem';
        dropdown.style.maxHeight = `${spaceBelow - 20}px`;
      } else {
        dropdown.style.bottom = '100%';
        dropdown.style.marginBottom = '0.5rem';
        dropdown.style.maxHeight = `${spaceAbove - 20}px`;
      }
      dropdown.style.overflowY = 'auto';
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    const spaceRight = viewportWidth - rect.right;
    const dropdownWidth = dropdown.offsetWidth || 220;
    
    if (dropdown.classList.contains('dropdown-menu-end')) {
      if (spaceRight < dropdownWidth && rect.left > dropdownWidth) {
        dropdown.style.right = '0';
      }
    } else {
      if (rect.left + dropdownWidth > viewportWidth && spaceRight < dropdownWidth) {
        dropdown.style.right = '0';
        dropdown.style.left = 'auto';
      }
    }
  }
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö dropdown
  document.addEventListener('show.bs.dropdown', function(e) {
    const toggle = e.target;
    const dropdown = toggle.nextElementSibling;
    
    if (dropdown && dropdown.classList.contains('dropdown-menu')) {
      // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
      setTimeout(() => {
        adjustDropdownPosition(dropdown, toggle);
      }, 10);
    }
  });
  
  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
  window.addEventListener('resize', function() {
    document.querySelectorAll('.dropdown-menu.show').forEach(dropdown => {
      const toggle = dropdown.previousElementSibling;
      adjustDropdownPosition(dropdown, toggle);
    });
  });
  
  console.log('‚úÖ –£–º–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ dropdown –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
});

// –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
const modernButtonStyles = document.createElement('style');
modernButtonStyles.textContent = `
  @keyframes rippleEffect {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    100% {
      transform: scale(2);
      opacity: 0;
    }
  }
`;
document.head.appendChild(modernButtonStyles);
</script>

<!-- ===== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –¢–ï–ú–ù–û–ô –¢–ï–ú–´ –° –í–´–°–û–ö–û–ô –°–ü–ï–¶–ò–§–ò–ß–ù–û–°–¢–¨–Æ ===== -->
<style>
/* –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –î–õ–Ø –¢–ï–ú–ù–û–ô –¢–ï–ú–´ */
html[data-theme="dark"] .dropdown-menu,
html[data-theme="dark"] .language-menu,
[data-theme="dark"] .dropdown-menu.show,
[data-theme="dark"] .language-menu.show {
  background: rgba(30, 41, 59, 0.95) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  color: #f8fafc !important;
}

html[data-theme="dark"] .dropdown-item,
html[data-theme="dark"] .language-menu .dropdown-item {
  color: #f8fafc !important;
  background: transparent !important;
}

html[data-theme="dark"] .dropdown-item:hover,
html[data-theme="dark"] .language-menu .dropdown-item:hover {
  background: rgba(62, 205, 193, 0.2) !important;
  color: #ffffff !important;
}

html[data-theme="dark"] .dropdown-header {
  color: #f8fafc !important;
  border-bottom-color: rgba(255, 255, 255, 0.1) !important;
}

html[data-theme="dark"] .user-details strong {
  color: #f8fafc !important;
}

html[data-theme="dark"] .user-details small {
  color: #cbd5e1 !important;
}

/* –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –î–õ–Ø –ì–†–ê–î–ò–ï–ù–¢–ù–û–ô –¢–ï–ú–´ */
html[data-theme="gradient"] .dropdown-menu,
html[data-theme="gradient"] .language-menu,
[data-theme="gradient"] .dropdown-menu.show,
[data-theme="gradient"] .language-menu.show {
  background: rgba(0, 0, 0, 0.8) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
}

html[data-theme="gradient"] .dropdown-item,
html[data-theme="gradient"] .language-menu .dropdown-item {
  color: #ffffff !important;
  background: transparent !important;
}

html[data-theme="gradient"] .dropdown-item:hover,
html[data-theme="gradient"] .language-menu .dropdown-item:hover {
  background: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
}
</style>

<!-- ===== –°–¢–ò–õ–ò –î–õ–Ø INLINE –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–Ø –¢–ï–ú ===== -->