{% extends "base.html" %}

{% block title %}–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è - Become a Tandarts{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="achievements-header" style="background: linear-gradient(135deg, #3ECDC1, #32A39A); color: white; border-radius: 20px; padding: 2rem; margin-bottom: 2rem; text-align: center;">
        <h1 style="margin: 0 0 1rem;">üèÜ –í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h1>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <div style="background: rgba(255,255,255,0.2); border-radius: 12px; padding: 1rem;">
                <div style="font-size: 1.8rem; font-weight: bold;">LVL {{ gamification_data.current_level }}</div>
                <div style="opacity: 0.9;">–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å</div>
            </div>
            <div style="background: rgba(255,255,255,0.2); border-radius: 12px; padding: 1rem;">
                <div style="font-size: 1.8rem; font-weight: bold;">{{ gamification_data.total_xp }}</div>
                <div style="opacity: 0.9;">–û–±—â–∏–π –æ–ø—ã—Ç</div>
            </div>
            <div style="background: rgba(255,255,255,0.2); border-radius: 12px; padding: 1rem;">
                <div style="font-size: 1.8rem; font-weight: bold;">{{ user_achievements|length }}/{{ all_achievements|length }}</div>
                <div style="opacity: 0.9;">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
            </div>
        </div>
    </div>

    <div class="achievements-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem;">
        {% for achievement in all_achievements %}
        {% set is_earned = achievement.id in earned_achievement_ids %}
        
        <div class="achievement-card" style="background: white; border-radius: 16px; padding: 1.5rem; box-shadow: 0 4px 16px rgba(0,0,0,0.1); transition: transform 0.3s; {{ 'border: 2px solid #3ECDC1;' if is_earned else 'opacity: 0.6;' }}">
            
            <div class="achievement-header" style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <div class="achievement-icon" style="width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; {{ 'background: linear-gradient(135deg, #3ECDC1, #32A39A); color: white;' if is_earned else 'background: #f0f0f0; color: #999;' }}">
                    {% if achievement.icon == 'star' %}‚≠ê
                    {% elif achievement.icon == 'trophy' %}üèÜ
                    {% elif achievement.icon == 'award' %}ü•á
                    {% elif achievement.icon == 'gem' %}üíé
                    {% elif achievement.icon == 'chat-dots' %}üí¨
                    {% elif achievement.icon == 'heart' %}‚ù§Ô∏è
                    {% else %}üéØ
                    {% endif %}
                </div>
                <div>
                    <h3 style="margin: 0; color: {{ '#333' if is_earned else '#999' }};">{{ achievement.name.replace('_', ' ').title() }}</h3>
                    <span class="rarity-badge" style="background: {{ 
                        '#95a5a6' if achievement.rarity == 'common' else
                        '#2ecc71' if achievement.rarity == 'uncommon' else  
                        '#3498db' if achievement.rarity == 'rare' else
                        '#9b59b6' if achievement.rarity == 'epic' else
                        '#f39c12'
                    }}; color: white; padding: 0.2rem 0.6rem; border-radius: 12px; font-size: 0.7rem; text-transform: uppercase;">
                        {{ achievement.rarity }}
                    </span>
                </div>
            </div>
            
            <p style="color: {{ '#666' if is_earned else '#999' }}; margin-bottom: 1rem;">{{ achievement.description }}</p>
            
            <div class="achievement-footer" style="display: flex; justify-content: space-between; align-items: center;">
                <div style="color: #3ECDC1; font-weight: bold;">+{{ achievement.points }} XP</div>
                {% if is_earned %}
                <div style="color: #28a745; font-weight: bold;">
                    ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ
                </div>
                {% else %}
                <div style="color: #999; font-size: 0.8rem;">üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="text-center mt-4">
        <a href="{{ url_for('virtual_patient_bp.scenarios_list', lang=lang) }}" class="btn btn-primary">
            –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ
        </a>
    </div>
</div>

<style>
.achievement-card:hover {
    transform: translateY(-5px);
}
</style>
{% endblock %}