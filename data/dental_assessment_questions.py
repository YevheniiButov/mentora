# dental_assessment_questions.py
# 50 вопросов для предварительной оценки знаний в стоматологии

import json
from datetime import datetime

ASSESSMENT_QUESTIONS = [
    # ===== КАТЕГОРИЯ 1: ТЕОРЕТИЧЕСКИЕ ЗНАНИЯ (15 вопросов) =====
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 1,
        "time_limit": 60,
        "question": "Какая структура зуба отвечает за его питание и иннервацию?",
        "options": [
            "Эмаль зуба",
            "Дентин", 
            "Пульпа зуба",
            "Цемент корня"
        ],
        "correct_answer": 2,
        "explanation": "Пульпа зуба содержит кровеносные сосуды и нервы, обеспечивающие питание и иннервацию зуба.",
        "related_modules": [1, 2]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания", 
        "difficulty": 2,
        "time_limit": 60,
        "question": "Сколько постоянных зубов у взрослого человека при полной зубной формуле?",
        "options": [
            "28 зубов",
            "30 зубов",
            "32 зуба", 
            "34 зуба"
        ],
        "correct_answer": 2,
        "explanation": "У взрослого человека 32 постоянных зуба: 8 резцов, 4 клыка, 8 премоляров и 12 моляров (включая зубы мудрости).",
        "related_modules": [1]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 2,
        "time_limit": 90,
        "question": "Какой материал является самым твердым в организме человека?",
        "options": [
            "Кортикальная кость",
            "Дентин",
            "Эмаль зуба",
            "Цемент корня"
        ],
        "correct_answer": 2,
        "explanation": "Эмаль зуба - самая твердая ткань в организме человека, состоящая на 96% из неорганических веществ.",
        "related_modules": [1, 2]
    },
    {
        "category": "knowledge_center", 
        "category_name": "Теоретические знания",
        "difficulty": 3,
        "time_limit": 90,
        "question": "Какая артерия является основным источником кровоснабжения зубов верхней челюсти?",
        "options": [
            "Лицевая артерия",
            "Верхнечелюстная артерия",
            "Подглазничная артерия",
            "Височная артерия"
        ],
        "correct_answer": 1,
        "explanation": "Верхнечелюстная артерия (a. maxillaris) является основным источником кровоснабжения зубов и тканей верхней челюсти.",
        "related_modules": [2, 3]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 2,
        "time_limit": 60,
        "question": "В каком возрасте обычно прорезываются первые постоянные моляры?",
        "options": [
            "4-5 лет",
            "6-7 лет",
            "8-9 лет", 
            "10-11 лет"
        ],
        "correct_answer": 1,
        "explanation": "Первые постоянные моляры ('шестерки') обычно прорезываются в возрасте 6-7 лет.",
        "related_modules": [1, 4]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 3,
        "time_limit": 90,
        "question": "Какой нерв обеспечивает иннервацию зубов нижней челюсти?",
        "options": [
            "Подглазничный нерв",
            "Нижнечелюстной нерв",
            "Щечный нерв",
            "Язычный нерв"
        ],
        "correct_answer": 1,
        "explanation": "Нижнечелюстной нерв (III ветвь тройничного нерва) через нижний альвеолярный нерв иннервирует зубы нижней челюсти.",
        "related_modules": [2, 3]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 2,
        "time_limit": 60,
        "question": "Какой тип соединения зуба с альвеолой?",
        "options": [
            "Синдесмоз",
            "Гомфоз",
            "Синхондроз",
            "Синостоз"
        ],
        "correct_answer": 1,
        "explanation": "Гомфоз - тип фиброзного соединения, при котором зуб закреплен в альвеоле посредством периодонтальной связки.",
        "related_modules": [1, 2]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Какие клетки ответственны за образование дентина?",
        "options": [
            "Амелобласты",
            "Одонтобласты", 
            "Цементобласты",
            "Остеобласты"
        ],
        "correct_answer": 1,
        "explanation": "Одонтобласты - клетки пульпы зуба, которые синтезируют дентин на протяжении всей жизни зуба.",
        "related_modules": [2, 5]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 3,
        "time_limit": 90,
        "question": "Какой процент воды содержится в дентине?",
        "options": [
            "10-12%",
            "20-25%",
            "30-35%",
            "45-50%"
        ],
        "correct_answer": 1,
        "explanation": "Дентин содержит около 20-25% воды, что делает его менее минерализованным по сравнению с эмалью.",
        "related_modules": [1, 2]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 2,
        "time_limit": 60,
        "question": "Сколько корней обычно имеет первый премоляр верхней челюсти?",
        "options": [
            "1 корень",
            "2 корня",
            "3 корня",
            "4 корня"
        ],
        "correct_answer": 1,
        "explanation": "Первый премоляр верхней челюсти чаще всего имеет 2 корня: щечный и небный.",
        "related_modules": [1, 3]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Какая зона эмали наиболее подвержена кариесу?",
        "options": [
            "Призматическая эмаль",
            "Беспризматическая эмаль",
            "Эмалевые пластинки",
            "Эмалевые пучки"
        ],
        "correct_answer": 2,
        "explanation": "Эмалевые пластинки содержат меньше минералов и больше органических веществ, что делает их более уязвимыми для кариеса.",
        "related_modules": [2, 6]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 3,
        "time_limit": 90,
        "question": "В каком возрасте завершается формирование корней постоянных зубов?",
        "options": [
            "12-14 лет",
            "16-18 лет", 
            "20-25 лет",
            "18-25 лет"
        ],
        "correct_answer": 3,
        "explanation": "Формирование корней постоянных зубов завершается в период от 18 до 25 лет, в зависимости от группы зубов.",
        "related_modules": [1, 4]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 2,
        "time_limit": 60,
        "question": "Какая мышца является основной при открывании рта?",
        "options": [
            "Массетер",
            "Височная мышца",
            "Латеральная крыловидная мышца",
            "Медиальная крыловидная мышца"
        ],
        "correct_answer": 2,
        "explanation": "Латеральная крыловидная мышца является основной мышцей, ответственной за открывание рта.",
        "related_modules": [2, 3]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Какой тип кариеса развивается на контактных поверхностях зубов?",
        "options": [
            "Фиссурный кариес",
            "Пришеечный кариес",
            "Аппроксимальный кариес",
            "Циркулярный кариес"
        ],
        "correct_answer": 2,
        "explanation": "Аппроксимальный кариес развивается на контактных (мезиальных и дистальных) поверхностях зубов.",
        "related_modules": [6, 7]
    },
    {
        "category": "knowledge_center",
        "category_name": "Теоретические знания",
        "difficulty": 3,
        "time_limit": 90,
        "question": "Какой показатель pH критичен для начала деминерализации эмали?",
        "options": [
            "pH 6.5",
            "pH 5.5",
            "pH 4.5",
            "pH 3.5"
        ],
        "correct_answer": 1,
        "explanation": "При pH 5.5 и ниже начинается деминерализация эмали зуба под действием кислот.",
        "related_modules": [6, 7]
    },

    # ===== КАТЕГОРИЯ 2: КОММУНИКАЦИЯ С ПАЦИЕНТАМИ (8 вопросов) =====
    {
        "category": "communication",
        "category_name": "Коммуникация с пациентами",
        "difficulty": 2,
        "time_limit": 90,
        "question": "Какой принцип является основополагающим в общении с тревожным пациентом?",
        "options": [
            "Быстрое выполнение процедур",
            "Активное слушание и эмпатия",
            "Использование медицинской терминологии", 
            "Минимизация объяснений"
        ],
        "correct_answer": 1,
        "explanation": "Активное слушание и демонстрация эмпатии помогают установить доверие и снизить тревожность пациента.",
        "related_modules": [8, 9]
    },
    {
        "category": "communication",
        "category_name": "Коммуникация с пациентами",
        "difficulty": 2,
        "time_limit": 90,
        "question": "Что следует сделать ПЕРВЫМ при работе с пациентом, испытывающим страх перед лечением?",
        "options": [
            "Немедленно начать лечение",
            "Выяснить причины страха",
            "Предложить седацию",
            "Перенести прием"
        ],
        "correct_answer": 1,
        "explanation": "Важно выяснить конкретные причины страха, чтобы адресно работать с ними и выбрать подходящую стратегию.",
        "related_modules": [8, 9]
    },
    {
        "category": "communication",
        "category_name": "Коммуникация с пациентами",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Как лучше всего объяснить сложную процедуру пациенту?",
        "options": [
            "Использовать только медицинские термины",
            "Простым языком с визуальными материалами",
            "Отослать к интернет-ресурсам",
            "Дать письменную инструкцию"
        ],
        "correct_answer": 1,
        "explanation": "Объяснение простым языком с использованием моделей, схем или видео материалов наиболее эффективно для понимания.",
        "related_modules": [8, 9]
    },
    {
        "category": "communication",
        "category_name": "Коммуникация с пациентами",
        "difficulty": 2,
        "time_limit": 90,
        "question": "Какая техника наиболее эффективна для получения согласия на лечение?",
        "options": [
            "Директивный подход",
            "Информированное согласие с обсуждением",
            "Быстрое объяснение рисков",
            "Использование страха как мотивации"
        ],
        "correct_answer": 1,
        "explanation": "Информированное согласие должно включать подробное обсуждение плана лечения, альтернатив, рисков и преимуществ.",
        "related_modules": [8, 10]
    },
    {
        "category": "communication",
        "category_name": "Коммуникация с пациентами",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Как следует реагировать на жалобу пациента на качество лечения?",
        "options": [
            "Отрицать проблему",
            "Выслушать и провести расследование",
            "Сразу предложить компенсацию",
            "Переадресовать к коллегам"
        ],
        "correct_answer": 1,
        "explanation": "Важно внимательно выслушать пациента, провести объективное расследование и принять соответствующие меры.",
        "related_modules": [9, 10]
    },
    {
        "category": "communication",
        "category_name": "Коммуникация с пациентами",
        "difficulty": 2,
        "time_limit": 90,
        "question": "Какой подход наиболее эффективен при работе с детьми в стоматологии?",
        "options": [
            "Строгость и директивность",
            "Игровая терапия и позитивное подкрепление",
            "Быстрое выполнение процедур",
            "Присутствие родителей в любом случае"
        ],
        "correct_answer": 1,
        "explanation": "Игровая терапия, позитивное подкрепление и создание дружественной атмосферы наиболее эффективны с детьми.",
        "related_modules": [9, 11]
    },
    {
        "category": "communication",
        "category_name": "Коммуникация с пациентами",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Как правильно сообщить пациенту о необходимости дорогостоящего лечения?",
        "options": [
            "Сразу назвать итоговую стоимость",
            "Объяснить необходимость, план и поэтапную стоимость",
            "Сравнить с конкурентами",
            "Предложить только самый дешевый вариант"
        ],
        "correct_answer": 1,
        "explanation": "Важно объяснить медицинскую необходимость, представить план лечения по этапам с соответствующими затратами.",
        "related_modules": [8, 10]
    },
    {
        "category": "communication", 
        "category_name": "Коммуникация с пациентами",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Как работать с пациентом, который отказывается от рекомендованного лечения?",
        "options": [
            "Настаивать на своем мнении",
            "Выяснить причины отказа и предложить альтернативы",
            "Прекратить лечение",
            "Напугать последствиями"
        ],
        "correct_answer": 1,
        "explanation": "Важно понять причины отказа (страх, финансы, недопонимание) и предложить альтернативные варианты лечения.",
        "related_modules": [8, 9, 10]
    },

    # ===== КАТЕГОРИЯ 3: ПРАКТИЧЕСКИЕ НАВЫКИ (12 вопросов) =====
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 2,
        "time_limit": 90,
        "question": "Какой инструмент используется для удаления зубного камня?",
        "options": [
            "Экскаватор",
            "Скейлер",
            "Элеватор",
            "Кюрета"
        ],
        "correct_answer": 1,
        "explanation": "Скейлер - специальный инструмент для удаления зубного камня с поверхности зубов.",
        "related_modules": [12, 13]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Какая последовательность этапов при лечении кариеса наиболее правильная?",
        "options": [
            "Препарирование → анестезия → пломбирование",
            "Анестезия → препарирование → изоляция → пломбирование",
            "Изоляция → анестезия → препарирование → пломбирование",
            "Препарирование → изоляция → пломбирование"
        ],
        "correct_answer": 1,
        "explanation": "Правильная последовательность: анестезия, препарирование кариозной полости, изоляция от слюны, пломбирование.",
        "related_modules": [14, 15]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 2,
        "time_limit": 90,
        "question": "Какой материал наиболее подходит для пломбирования жевательных зубов?",
        "options": [
            "Композитная смола",
            "Стеклоиономерный цемент",
            "Амальгама",
            "Керамика"
        ],
        "correct_answer": 0,
        "explanation": "Композитная смола обладает хорошей прочностью, эстетикой и подходит для жевательных зубов при соблюдении технологии.",
        "related_modules": [15, 16]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Какое давление ирригации оптимально при эндодонтическом лечении?",
        "options": [
            "Высокое давление для лучшей очистки",
            "Низкое давление во избежание осложнений",
            "Среднее давление",
            "Давление не важно"
        ],
        "correct_answer": 1,
        "explanation": "Низкое давление ирригации предотвращает выталкивание инфицированного материала за верхушку корня.",
        "related_modules": [17, 18]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Какой угол наклона бора оптимален при препарировании под коронку?",
        "options": [
            "2-4 градуса",
            "6-8 градусов",
            "10-12 градусов",
            "15-20 градусов"
        ],
        "correct_answer": 1,
        "explanation": "Угол конвергенции стенок 6-8 градусов обеспечивает оптимальную ретенцию и легкость наложения коронки.",
        "related_modules": [19, 20]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Какая толщина дентина должна остаться над пульпой при глубоком кариесе?",
        "options": [
            "0.5-1 мм",
            "1-2 мм",
            "2-3 мм", 
            "3-4 мм"
        ],
        "correct_answer": 1,
        "explanation": "Толщина дентина 1-2 мм над пульпой обеспечивает ее защиту и возможность регенерации.",
        "related_modules": [14, 15]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 2,
        "time_limit": 90,
        "question": "Какой инструмент используется для определения глубины пародонтального кармана?",
        "options": [
            "Пародонтальный зонд",
            "Штопфер",
            "Скейлер",
            "Экскаватор"
        ],
        "correct_answer": 0,
        "explanation": "Пародонтальный зонд с градуировкой используется для измерения глубины пародонтальных карманов.",
        "related_modules": [21, 22]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Какой тип движений наиболее эффективен при работе ультразвуковым скейлером?",
        "options": [
            "Круговые движения",
            "Возвратно-поступательные движения",
            "Легкие касательные движения",
            "Сильные нажимающие движения"
        ],
        "correct_answer": 2,
        "explanation": "Легкие касательные движения с минимальным давлением наиболее эффективны и безопасны для тканей.",
        "related_modules": [12, 13]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Какой материал предпочтителен для временного пломбирования корневых каналов?",
        "options": [
            "Гидроксид кальция",
            "Композитная смола",
            "Цинк-оксид эвгеноловая паста",
            "Стеклоиономерный цемент"
        ],
        "correct_answer": 0,
        "explanation": "Гидроксид кальция обладает антибактериальными свойствами и стимулирует регенерацию тканей.",
        "related_modules": [17, 18]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 2,
        "time_limit": 90,
        "question": "Какая методика местной анестезии наиболее часто используется на нижней челюсти?",
        "options": [
            "Инфильтрационная анестезия",
            "Мандибулярная анестезия",
            "Интралигаментарная анестезия",
            "Внутрикостная анестезия"
        ],
        "correct_answer": 1,
        "explanation": "Мандибулярная (проводниковая) анестезия наиболее эффективна для обезболивания зубов нижней челюсти.",
        "related_modules": [23, 24]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Какое условие наиболее важно для успешной адгезии композитного материала?",
        "options": [
            "Высокая температура",
            "Сухое рабочее поле",
            "Быстрое нанесение",
            "Толстый слой адгезива"
        ],
        "correct_answer": 1,
        "explanation": "Сухое рабочее поле критически важно для качественной адгезии композитных материалов к тканям зуба.",
        "related_modules": [15, 16]
    },
    {
        "category": "preclinical_skills",
        "category_name": "Практические навыки",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Какая концентрация хлоргексидина оптимальна для антисептической обработки в стоматологии?",
        "options": [
            "0.05%",
            "0.12%",
            "0.5%",
            "2%"
        ],
        "correct_answer": 1,
        "explanation": "Концентрация 0.12% хлоргексидина обеспечивает эффективную антисептическую активность без значительных побочных эффектов.",
        "related_modules": [12, 25]
    },

    # ===== КАТЕГОРИЯ 4: КЛИНИЧЕСКИЕ СЛУЧАИ (10 вопросов) =====
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 3,
        "time_limit": 120,
        "question": "У пациента острая боль при накусывании на зуб 1.6. На рентгене видно затемнение у верхушки корня. Наиболее вероятный диагноз:",
        "options": [
            "Острый пульпит",
            "Хронический периодонтит",
            "Острый периодонтит",
            "Пародонтит"
        ],
        "correct_answer": 2,
        "explanation": "Сочетание боли при накусывании и рентгенологического затемнения у верхушки характерно для острого периодонтита.",
        "related_modules": [26, 27]
    },
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 4,
        "time_limit": 150,
        "question": "Пациентка 25 лет жалуется на кровоточивость десен и неприятный запах изо рта. При осмотре: отек и гиперемия десен, зубной камень. Какой диагноз наиболее вероятен?",
        "options": [
            "Гингивит",
            "Пародонтит легкой степени",
            "Пародонтоз",
            "Стоматит"
        ],
        "correct_answer": 0,
        "explanation": "Симптомы указывают на гингивит - воспаление десен без нарушения зубодесневого прикрепления.",
        "related_modules": [21, 22]
    },
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 4,
        "time_limit": 150,
        "question": "Ребенок 8 лет получил травму зуба 1.1. Коронка отломана на 1/3, пульпа не вскрыта. Какое лечение показано?",
        "options": [
            "Наблюдение",
            "Покрытие пульпы",
            "Восстановление композитом с покрытием пульпы",
            "Эндодонтическое лечение"
        ],
        "correct_answer": 2,
        "explanation": "При переломе коронки без вскрытия пульпы показано покрытие пульпы и восстановление коронки композитом.",
        "related_modules": [28, 29]
    },
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Пациент жалуется на чувствительность зуба 2.4 к холодному. При осмотре: кариозная полость средней глубины. План лечения:",
        "options": [
            "Лечебная прокладка + пломба",
            "Прямое пломбирование",
            "Эндодонтическое лечение",
            "Покрытие коронкой"
        ],
        "correct_answer": 0,
        "explanation": "При среднем кариесе с чувствительностью показана лечебная прокладка для защиты пульпы.",
        "related_modules": [14, 15]
    },
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 4,
        "time_limit": 150,
        "question": "У пациента на рентгене зуба 3.6 видно расширение периодонтальной щели у верхушки корня, зуб не реагирует на температурные раздражители. Диагноз:",
        "options": [
            "Острый пульпит",
            "Хронический пульпит",
            "Хронический периодонтит",
            "Острый периодонтит"
        ],
        "correct_answer": 2,
        "explanation": "Отсутствие реакции на температуру и расширение периодонтальной щели указывают на хронический периодонтит.",
        "related_modules": [26, 27]
    },
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 3,
        "time_limit": 120,
        "question": "Пациент 45 лет жалуется на подвижность зуба 1.2. Глубина пародонтального кармана 6 мм. Рентгенологически - резорбция кости на 1/2 длины корня. Диагноз:",
        "options": [
            "Гингивит",
            "Пародонтит легкой степени",
            "Пародонтит средней степени",
            "Пародонтит тяжелой степени"
        ],
        "correct_answer": 2,
        "explanation": "Глубина кармана 6 мм и резорбция кости на 1/2 длины корня соответствуют пародонтиту средней степени.",
        "related_modules": [21, 22]
    },
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 4,
        "time_limit": 150,
        "question": "Пациентка беременна (II триместр), острая боль в зубе 4.7. Рентген показал глубокий кариес, близко к пульпе. Какое лечение предпочтительно?",
        "options": [
            "Отложить лечение до родов",
            "Консервативное лечение пульпы",
            "Эндодонтическое лечение",
            "Удаление зуба"
        ],
        "correct_answer": 1,
        "explanation": "Во II триместре беременности предпочтительно консервативное лечение с отсроченным эндодонтическим лечением после родов.",
        "related_modules": [30, 31]
    },
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 3,
        "time_limit": 120,
        "question": "После препарирования кариозной полости появилось точечное вскрытие пульпы диаметром <1мм. Пациент молодой, зуб витальный. Тактика:",
        "options": [
            "Прямое покрытие пульпы",
            "Пульпотомия",
            "Эндодонтическое лечение",
            "Девитализация"
        ],
        "correct_answer": 0,
        "explanation": "При точечном вскрытии пульпы у молодого пациента показано прямое покрытие пульпы препаратами кальция.",
        "related_modules": [17, 18]
    },
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 4,
        "time_limit": 150,
        "question": "Пациент с сахарным диабетом нуждается в удалении зуба. Уровень глюкозы 15 ммоль/л. Тактика врача:",
        "options": [
            "Срочное удаление",
            "Удаление после нормализации гликемии",
            "Отказать в лечении",
            "Удаление под общим наркозом"
        ],
        "correct_answer": 1,
        "explanation": "При некомпенсированном диабете (глюкоза >10 ммоль/л) плановые хирургические вмешательства откладывают до нормализации показателей.",
        "related_modules": [32, 33]
    },
    {
        "category": "clinical_cases",
        "category_name": "Клинические случаи",
        "difficulty": 3,
        "time_limit": 120,
        "question": "У ребенка 6 лет множественный кариес временных зубов. Родители отказываются от лечения. Действия врача:",
        "options": [
            "Принудительное лечение",
            "Обучение гигиене и профилактика",
            "Информирование о последствиях и мотивация",
            "Обращение в органы опеки"
        ],
        "correct_answer": 2,
        "explanation": "Важно информировать родителей о последствиях нелеченого кариеса и мотивировать их на лечение ребенка.",
        "related_modules": [34, 35]
    },

    # ===== КАТЕГОРИЯ 5: ПОДГОТОВКА К ЭКЗАМЕНУ (5 вопросов) =====
    {
        "category": "exam_preparation",
        "category_name": "Подготовка к экзамену",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Согласно протоколам лечения в Нидерландах, какой материал является золотым стандартом для пломбирования корневых каналов?",
        "options": [
            "Силер + штифты",
            "Гуттаперча + силер",
            "Резорцин-формалиновая паста",
            "Цинк-оксид эвгеноловая паста"
        ],
        "correct_answer": 1,
        "explanation": "Гуттаперча с силером является международным стандартом для обтурации корневых каналов.",
        "related_modules": [36, 37]
    },
    {
        "category": "exam_preparation",
        "category_name": "Подготовка к экзамену",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Какой индекс используется для оценки гигиены полости рта в клинических исследованиях?",
        "options": [
            "Индекс DMFT",
            "Плак индекс (PI)",
            "Индекс кровоточивости",
            "Пародонтальный индекс"
        ],
        "correct_answer": 1,
        "explanation": "Плак индекс (Plaque Index) Silness-Löe широко используется для оценки уровня гигиены полости рта.",
        "related_modules": [38, 39]
    },
    {
        "category": "exam_preparation",
        "category_name": "Подготовка к экзамену",
        "difficulty": 4,
        "time_limit": 120,
        "question": "Какая концентрация фторида натрия в зубной пасте рекомендована для профилактики кариеса у взрослых?",
        "options": [
            "500 ppm",
            "1000 ppm",
            "1450 ppm",
            "5000 ppm"
        ],
        "correct_answer": 2,
        "explanation": "Концентрация 1450 ppm фторида натрия в зубной пасте рекомендована для ежедневного использования взрослыми.",
        "related_modules": [40, 41]
    },
    {
        "category": "exam_preparation",
        "category_name": "Подготовка к экзамену",
        "difficulty": 5,
        "time_limit": 150,
        "question": "Согласно современным рекомендациям, какой интервал между профилактическими осмотрами оптимален для взрослых пациентов без факторов риска?",
        "options": [
            "3 месяца",
            "6 месяцев",
            "12 месяцев",
            "24 месяца"
        ],
        "correct_answer": 1,
        "explanation": "Интервал 6 месяцев между профилактическими осмотрами считается оптимальным для большинства взрослых пациентов.",
        "related_modules": [42, 43]
    },
    {
        "category": "exam_preparation",
        "category_name": "Подготовка к экзамену",
        "difficulty": 5,
        "time_limit": 150,
        "question": "Какие антибиотики являются препаратами первого выбора при одонтогенных инфекциях?",
        "options": [
            "Ампициллин/клавуланат",
            "Ципрофлоксацин",
            "Доксициклин",
            "Азитромицин"
        ],
        "correct_answer": 0,
        "explanation": "Ампициллин/клавуланат обладает широким спектром действия против основных возбудителей одонтогенных инфекций.",
        "related_modules": [44, 45]
    }
]

# Функция для создания категорий в базе данных
def create_assessment_categories():
    """Создает категории для предварительной оценки"""
    categories = [
        {
            'name': 'Теоретические знания',
            'slug': 'knowledge_center',
            'description': 'Базовые знания анатомии, гистологии и физиологии зубочелюстной системы',
            'weight': 1.5,
            'min_questions': 12,
            'max_questions': 18,
            'color': '#3498db',
            'icon': 'book'
        },
        {
            'name': 'Коммуникация с пациентами',
            'slug': 'communication',
            'description': 'Навыки общения, получения согласия и работы с различными группами пациентов',
            'weight': 1.0,
            'min_questions': 6,
            'max_questions': 10,
            'color': '#9b59b6',
            'icon': 'chat-dots'
        },
        {
            'name': 'Практические навыки',
            'slug': 'preclinical_skills',
            'description': 'Владение инструментами, техникой препарирования и пломбирования',
            'weight': 1.8,
            'min_questions': 10,
            'max_questions': 15,
            'color': '#1abc9c',
            'icon': 'tools'
        },
        {
            'name': 'Клинические случаи',
            'slug': 'clinical_cases',
            'description': 'Диагностика, планирование лечения и принятие клинических решений',
            'weight': 2.0,
            'min_questions': 8,
            'max_questions': 12,
            'color': '#e74c3c',
            'icon': 'clipboard-data'
        },
        {
            'name': 'Подготовка к экзамену',
            'slug': 'exam_preparation',
            'description': 'Знание протоколов, стандартов лечения и нормативной базы',
            'weight': 1.2,
            'min_questions': 4,
            'max_questions': 8,
            'color': '#f39c12',
            'icon': 'award'
        }
    ]
    
    return categories

# Функция для добавления вопросов в базу данных
def populate_assessment_questions():
    """Добавляет вопросы предварительной оценки в базу данных"""
    from models import AssessmentCategory, AssessmentQuestion
    from extensions import db
    
    # Создаем категории
    categories = create_assessment_categories()
    category_map = {}
    
    for cat_data in categories:
        category = AssessmentCategory.query.filter_by(slug=cat_data['slug']).first()
        if not category:
            category = AssessmentCategory(**cat_data)
            db.session.add(category)
            db.session.flush()
        category_map[cat_data['slug']] = category.id
    
    # Добавляем вопросы
    for q_data in ASSESSMENT_QUESTIONS:
        question = AssessmentQuestion(
            category_id=category_map[q_data['category']],
            question_text=q_data['question'],
            question_type='multiple_choice',
            correct_answer=q_data['correct_answer'],
            explanation=q_data['explanation'],
            difficulty_level=q_data['difficulty'],
            time_limit=q_data['time_limit'],
            points=1
        )
        
        # Устанавливаем опции
        question.set_options(q_data['options'])
        
        # Устанавливаем связанные модули
        if 'related_modules' in q_data:
            question.related_modules = json.dumps(q_data['related_modules'])
        
        db.session.add(question)
    
    db.session.commit()
    print(f"Добавлено {len(ASSESSMENT_QUESTIONS)} вопросов в {len(categories)} категорий")

if __name__ == "__main__":
    # Выполнить при запуске файла
    populate_assessment_questions() 