{
  "template_data": {
    "template_path": "learning/subject_view.html",
    "language": "ru",
    "css_variables": {
      "--Анимированные декоративные элементы -->\n    <div class=\"floating-shape shape-1\"></div>\n    <div class=\"floating-shape shape-2\"></div>\n    <div class=\"floating-shape shape-3\"></div>\n    <div class=\"floating-shape shape-4\"></div>\n    \n    <div class=\"main-container\">\n        <div class=\"left-column\">\n            <div class=\"section-header\">\n                <h2>{{ t('exam', lang) }}</h2>\n            </div>\n            \n            <div class=\"learning-paths\">\n                {% for path in learning_paths %}\n                <div class=\"learning-path-item\">\n                    <button \n                        class=\"learning-path-button {% if path.id == 1 %}knowledge-center{% elif path.id == 2 %}communication{% elif path.id == 3 %}preclinical{% elif path.id == 4 %}workstation{% elif path.id == 5 %}bi-toets{% elif path.id == 6 %}virtual-patients{% endif %}\" \n                        data-path=\"{{ path.id }}\"\n                    >\n                        <div class=\"path-button-content\">\n                            {% if path.id == 1 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 2 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 3 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M9 3h6v2H9zM8 3h8l-1 9-2 2h-2l-2-2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M8 14v.5A5.5 5.5 0 0 0 13.5 20h1a5.5 5.5 0 0 0 5.5-5.5V14\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 4 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></rect>\n                                </svg>\n                            {% elif path.id == 5 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M9 11H7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-2m-6 0V3a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v8m-6 0h6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 6 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z\" fill=\"currentColor\"/>\n                                </svg>\n                            {% endif %}\n                            <span>{{ path.name }}</span>\n                        </div>\n                        <svg class=\"chevron-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                            <polyline points=\"9 18 15 12 9 6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></polyline>\n                        </svg>\n                    </button>\n                    \n                    <div class=\"subject-list {% if selected_subject and selected_subject.learning_path_id == path.id %}expanded{% endif %}\" id=\"path-{{ path.id }}-subjects\">\n                        {% if path.id == 6 %}\n                            <a href=\"{{ url_for('virtual_patient_bp.scenarios_list', lang=lang) }}\" class=\"subject-item\">\n                                <span class=\"subject-name\">{{ t('clinical_cases', lang) | default('Клинические случаи') }}</span>\n                                <div class=\"subject-progress\">\n                                    <div class=\"progress-bar\">\n                                        <div class=\"progress-fill\" style=\"width": "{{ path.vp_stats.percentage if path.vp_stats else 0 }}%\"></div>\n                                    </div>\n                                    <span class=\"progress-percent\">\n                                        {% if path.vp_stats %}\n                                            {{ path.vp_stats.completed }}/{{ path.vp_stats.total }}\n                                        {% else %}\n                                            {{ t('view_all', lang) | default('Показать все') }}\n                                        {% endif %}\n                                    </span>\n                                </div>\n                            </a>\n                        {% else %}\n                            {% for subject_item in subjects if subject_item.learning_path_id == path.id %}\n                            <a href=\"{{ url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item.id) }}\" \n                               class=\"subject-item {% if selected_subject and selected_subject.id == subject_item.id %}active{% endif %}\">\n                                <span class=\"subject-name\">{{ subject_item.name }}</span>\n                                <div class=\"subject-progress\">\n                                    <div class=\"progress-bar\">\n                                        <div class=\"progress-fill\" style=\"width: {{ subject_item.progress|default(0) }}%\"></div>\n                                    </div>\n                                    <span class=\"progress-percent\">{{ subject_item.progress|default(0) }}%</span>\n                                </div>\n                            </a>\n                            {% endfor %}\n                        {% endif %}\n                    </div>\n                </div>\n                {% endfor %}\n            </div>\n            \n            <!-- Секция с контентом -->\n            {% if content_categories %}\n            <div class=\"section-header\" style=\"margin-top: 2rem",
      "--Темы подкатегории -->\n                            <div class=\"topics-list\" style=\"padding-left": "1rem",
      "--Компактные модули без статистики -->\n                <div class=\"modules-grid-compact\">\n                    {% for module in subject_modules %}\n                    <div class=\"module-card-compact\" data-module-id=\"{{ module.id }}\">\n                        <div class=\"module-icon-compact\">\n                            <i class=\"bi bi-book\"></i>\n                        </div>\n                        <div class=\"module-info-compact\">\n                            <h3>{{ module.title }}</h3>\n                            {% if module.is_premium and not user.has_subscription %}\n                                <span class=\"badge premium-badge\">{{ t('premium', lang) }}</span>\n                            {% endif %}\n                        </div>\n                        <a href=\"{{ url_for('learning_map_bp.start_module_redirect', lang=lang, module_id=module.id) }}\" \n                           class=\"module-btn-compact\">\n                            {% if module.progress == 100 %}{{ t('repeat', lang) }}\n                            {% elif module.progress > 0 %}{{ t('continue', lang) }}\n                            {% else %}{{ t('start', lang) }}{% endif %}\n                        </a>\n                    </div>\n                    {% endfor %}\n                </div>\n                {% endif %}\n\n                {% if virtual_patients %}\n                <div class=\"virtual-patients-section\">\n                    <h3 class=\"virtual-patients-title\">\n                        <div class=\"vp-icon\">\n                            <i class=\"bi bi-person-hearts\"></i>\n                        </div>\n                        {{ t('virtual_patients_title', lang) | default('Виртуальные пациенты') }}\n                    </h3>\n                    \n                    <div class=\"virtual-patients-grid\">\n                        {% for scenario in virtual_patients %}\n                        <div class=\"vp-card\">\n                            <div>\n                                <div class=\"vp-card-header\">\n                                    <div class=\"vp-title\">{{ scenario.title }}</div>\n                                    <div class=\"vp-difficulty difficulty-{{ scenario.difficulty|default('medium')|lower }}\">\n                                        {{ scenario.difficulty|default('medium')|title }}\n                                    </div>\n                                </div>\n                                \n                                <div class=\"vp-description\">\n                                    {{ scenario.description|default('')|truncate(120) }}\n                                </div>\n                                \n                                {% if scenario.user_progress and scenario.user_progress.attempts_count > 0 %}\n                                <div class=\"vp-progress\">\n                                    <div class=\"vp-progress-bar\">\n                                        <div class=\"vp-progress-fill\" style=\"width": "{{ scenario.user_progress.percentage|default(0) }}%\"></div>\n                                    </div>\n                                    <div class=\"vp-progress-text\">\n                                        <span>\n                                            {% if scenario.user_progress.completed %}\n                                                {{ t('completed', lang) }}\n                                            {% else %}\n                                                {{ t('in_progress_attempts', lang, count=scenario.user_progress.attempts_count) | default(scenario.user_progress.attempts_count ~ \" \" ~ t('attempts_short', lang)) }}\n                                            {% endif %}\n                                        </span>\n                                        <span>{{ scenario.user_progress.score|default(0) }}/{{ scenario.user_progress.max_score|default(100) }}</span>\n                                    </div>\n                                </div>\n                                {% endif %}\n                            </div>\n                            \n                            <div class=\"vp-actions\">\n                                {% if scenario.is_premium and not user.has_subscription %}\n                                <a href=\"{{ url_for('main_bp.subscribe', lang=lang) }}\" class=\"vp-btn premium\">\n                                    <i class=\"bi bi-star-fill me-1\"></i> {{ t('premium', lang) }}\n                                </a>\n                                {% else %}\n                                <a href=\"{{ url_for('virtual_patient_bp.start_scenario', lang=lang, scenario_id=scenario.id) }}\" \n                                   class=\"vp-btn {% if scenario.user_progress and scenario.user_progress.completed %}completed{% endif %}\">\n                                    <i class=\"bi bi-play-fill me-1\"></i>\n                                    {% if scenario.user_progress and scenario.user_progress.completed %}\n                                        {{ t('try_again', lang) }}\n                                    {% elif scenario.user_progress and scenario.user_progress.attempts_count > 0 %}\n                                        {{ t('continue_vp', lang) | default(t('continue', lang)) }}\n                                    {% else %}\n                                        {{ t('start', lang) }}\n                                    {% endif %}\n                                </a>\n                                {% endif %}\n                                \n                                {% if scenario.user_progress and scenario.user_progress.completed and scenario.user_progress.best_attempt_id %}\n                                <a href=\"{{ url_for('virtual_patient_bp.results', lang=lang, attempt_id=scenario.user_progress.best_attempt_id) }}\" \n                                   class=\"vp-btn\">\n                                    <i class=\"bi bi-chart-line me-1\"></i> {{ t('results', lang) }}\n                                </a>\n                                {% endif %}\n                            </div>\n                        </div>\n                        {% endfor %}\n                    </div>\n                    \n                    <div class=\"view-all-vp\">\n                        <a href=\"{{ url_for('subject_view_bp.all_virtual_patients', lang=lang) }}\">\n                            {{ t('view_all_scenarios', lang) }} <i class=\"bi bi-arrow-right ms-1\"></i>\n                        </a>\n                    </div>\n                </div>\n                {% endif %}\n            </div>\n            {% elif selected_path %}\n            <div class=\"subjects-grid\">\n                {% set filtered_subjects = subjects|selectattr(\"learning_path_id\", \"equalto\", selected_path.id)|list %}\n                {% if filtered_subjects %}\n                    {% for subject_item_path_filtered in filtered_subjects %}\n                    <div class=\"subject-card\">\n                        <a href=\"{{ url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item_path_filtered.id) }}\" class=\"subject-link\">\n                            <div class=\"card-content\">\n                                <div class=\"card-icon\">\n                                    <svg class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                        <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                        <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    </svg>\n                                </div>\n                                <div class=\"card-info\">\n                                    <h3>{{ subject_item_path_filtered.name }}</h3>\n                                    <p>{{ subject_item_path_filtered.description|default('')|truncate(80) }}</p>\n                                    <div class=\"card-footer\">\n                                        <div class=\"progress-bar-container\"><div class=\"progress-bar-fill\" style=\"width: {{ subject_item_path_filtered.progress|default(0) }}%",
      "--subject-view-bg": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
      "--text-primary": "#333333",
      "--bg-primary": "#ffffff",
      "--subject-view-border": "rgba(255, 255, 255, 0.2)",
      "--subject-view-text": "rgba(255, 255, 255, 0.9)",
      "--subject-view-button-bg": "rgba(255, 255, 255, 0.1)",
      "--subject-view-button-text": "white",
      "--category-knowledge": "linear-gradient(135deg, #3498db, #2980b9)",
      "--category-communication": "linear-gradient(135deg, #9b59b6, #8e44ad)",
      "--category-preclinical": "linear-gradient(135deg, #1abc9c, #16a085)",
      "--category-workstation": "linear-gradient(135deg, #e74c3c, #c0392b)",
      "--category-bi-toets": "linear-gradient(135deg, #f39c12, #e67e22)",
      "--category-virtual-patients": "linear-gradient(135deg, #667eea, #764ba2)"
    },
    "preserved_logic": "<div data-jinja-extends=\"base.html\" style=\"display: none;\"></div>\n\n<div data-jinja-block=\"title\">{{ t('learning_map', lang) }} - Dental Academy</div>\n\n<div data-jinja-block=\"styles\">\n{{ super() }}\n<link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/pages/learning_map.css') }}\">\n<link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/category-navigation.css') }}\">\n</div>\n\n<div data-jinja-block=\"content\">\n<div class=\"learning-map-container\">\n    <!-- Анимированные декоративные элементы -->\n    <div class=\"floating-shape shape-1\"></div>\n    <div class=\"floating-shape shape-2\"></div>\n    <div class=\"floating-shape shape-3\"></div>\n    <div class=\"floating-shape shape-4\"></div>\n    \n    <div class=\"main-container\">\n        <div class=\"left-column\">\n            <div class=\"section-header\">\n                <h2>{{ t('exam', lang) }}</h2>\n            </div>\n            \n            <div class=\"learning-paths\">\n                <div data-jinja-for=\"path in learning_paths\">\n                <div class=\"learning-path-item\">\n                    <button \n                        class=\"learning-path-button <div data-jinja-if=\"path.id == 1\">knowledge-center{% elif path.id == 2 %}communication{% elif path.id == 3 %}preclinical{% elif path.id == 4 %}workstation{% elif path.id == 5 %}bi-toets{% elif path.id == 6 %}virtual-patients</div>\" \n                        data-path=\"{{ path.id }}\"\n                    >\n                        <div class=\"path-button-content\">\n                            <div data-jinja-if=\"path.id == 1\">\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 2 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 3 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M9 3h6v2H9zM8 3h8l-1 9-2 2h-2l-2-2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M8 14v.5A5.5 5.5 0 0 0 13.5 20h1a5.5 5.5 0 0 0 5.5-5.5V14\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 4 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></rect>\n                                </svg>\n                            {% elif path.id == 5 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M9 11H7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-2m-6 0V3a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v8m-6 0h6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 6 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z\" fill=\"currentColor\"/>\n                                </svg>\n                            </div>\n                            <span>{{ path.name }}</span>\n                        </div>\n                        <svg class=\"chevron-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                            <polyline points=\"9 18 15 12 9 6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></polyline>\n                        </svg>\n                    </button>\n                    \n                    <div class=\"subject-list <div data-jinja-if=\"selected_subject and selected_subject.learning_path_id == path.id\">expanded</div>\" id=\"path-{{ path.id }}-subjects\">\n                        <div data-jinja-if=\"path.id == 6\">\n                            <a href=\"{{ url_for('virtual_patient_bp.scenarios_list', lang=lang) }}\" class=\"subject-item\">\n                                <span class=\"subject-name\">{{ t('clinical_cases', lang) | default('Клинические случаи') }}</span>\n                                <div class=\"subject-progress\">\n                                    <div class=\"progress-bar\">\n                                        <div class=\"progress-fill\" style=\"width: {{ path.vp_stats.percentage if path.vp_stats else 0 }}%\"></div>\n                                    </div>\n                                    <span class=\"progress-percent\">\n                                        {% if path.vp_stats %}\n                                            {{ path.vp_stats.completed }}/{{ path.vp_stats.total }}\n                                        {% else %}\n                                            {{ t('view_all', lang) | default('Показать все') }}\n                                        </div>\n                                    </span>\n                                </div>\n                            </a>\n                        {% else %}\n                            {% for subject_item in subjects if subject_item.learning_path_id == path.id %}\n                            <a href=\"{{ url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item.id) }}\" \n                               class=\"subject-item <div data-jinja-if=\"selected_subject and selected_subject.id == subject_item.id\">active</div>\">\n                                <span class=\"subject-name\">{{ subject_item.name }}</span>\n                                <div class=\"subject-progress\">\n                                    <div class=\"progress-bar\">\n                                        <div class=\"progress-fill\" style=\"width: {{ subject_item.progress|default(0) }}%\"></div>\n                                    </div>\n                                    <span class=\"progress-percent\">{{ subject_item.progress|default(0) }}%</span>\n                                </div>\n                            </a>\n                            </div>\n                        {% endif %}\n                    </div>\n                </div>\n                {% endfor %}\n            </div>\n            \n            <!-- Секция с контентом -->\n            {% if content_categories %}\n            <div class=\"section-header\" style=\"margin-top: 2rem;\">\n                <h2>{{ t('content', lang)|default('Контент') }}</h2>\n            </div>\n            \n\n            \n            <div class=\"learning-paths\">\n                <div data-jinja-for=\"category in content_categories\">\n                <div class=\"learning-path-item\">\n                    <button class=\"learning-path-button content-category\" data-category=\"{{ category.id }}\">\n                        <div class=\"path-button-content\">\n                            <i class=\"{{ category.icon }}\"></i>\n                            <span>{{ category.name }}</span>\n                        </div>\n                        <svg class=\"chevron-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                            <polyline points=\"9 18 15 12 9 6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></polyline>\n                        </svg>\n                    </button>\n                    \n                    <div class=\"subject-list\" id=\"category-{{ category.id }}-subcategories\">\n                        {% for subcategory in category.subcategories %}\n                        <div class=\"subcategory-item\">\n                            <a href=\"{{ subcategory.url }}\" class=\"subject-item\">\n                                <span class=\"subject-name\">{{ subcategory.name }}</span>\n                                <div class=\"subject-progress\">\n                                    <span class=\"progress-percent\">{{ subcategory.topics_count }} тем</span>\n                                </div>\n                            </a>\n                            \n                            <!-- Темы подкатегории -->\n                            <div class=\"topics-list\" style=\"padding-left: 1rem; display: none;\">\n                                {% for topic in subcategory.topics %}\n                                <a href=\"{{ topic.url }}\" class=\"topic-item\" style=\"display: block; padding: 0.5rem; color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.9rem;\">\n                                    <span>{{ topic.name }}</span>\n                                    <span style=\"float: right; font-size: 0.8rem; opacity: 0.7;\">{{ topic.lessons_count }} уроков</span>\n                                </a>\n                                </div>\n                            </div>\n                        </div>\n                        {% endfor %}\n                    </div>\n                </div>\n                {% endfor %}\n            </div>\n            {% endif %}\n        </div>\n\n        <div class=\"middle-column\">\n            <div class=\"page-header\">\n                <div class=\"breadcrumb\">\n                    <div data-jinja-if=\"selected_subject and selected_subject.learning_path\">\n                        <span>{{ selected_subject.learning_path.name }}</span>\n                        <span class=\"separator\">/</span>\n                        <span class=\"active\">{{ selected_subject.name }}</span>\n                    {% elif selected_path %}\n                        <span class=\"active\">{{ selected_path.name }}</span>\n                    </div>\n                </div>\n                <h1><div data-jinja-if=\"selected_subject\">{{ selected_subject.name }}{% elif selected_path %}{{ selected_path.name }}</div></h1>\n                <p><div data-jinja-if=\"selected_subject\">{{ selected_subject.description|default('') }}{% elif selected_path %}{{ selected_path.description|default(t('select_subject_from_left_list', lang)) }}</div></p>\n            </div>\n\n            {% if selected_subject %}\n            <div class=\"subject-content\">\n                {% if subject_modules %}\n                <!-- Компактные модули без статистики -->\n                <div class=\"modules-grid-compact\">\n                    <div data-jinja-for=\"module in subject_modules\">\n                    <div class=\"module-card-compact\" data-module-id=\"{{ module.id }}\">\n                        <div class=\"module-icon-compact\">\n                            <i class=\"bi bi-book\"></i>\n                        </div>\n                        <div class=\"module-info-compact\">\n                            <h3>{{ module.title }}</h3>\n                            {% if module.is_premium and not user.has_subscription %}\n                                <span class=\"badge premium-badge\">{{ t('premium', lang) }}</span>\n                            {% endif %}\n                        </div>\n                        <a href=\"{{ url_for('learning_map_bp.start_module_redirect', lang=lang, module_id=module.id) }}\" \n                           class=\"module-btn-compact\">\n                            <div data-jinja-if=\"module.progress == 100\">{{ t('repeat', lang) }}\n                            {% elif module.progress > 0 %}{{ t('continue', lang) }}\n                            {% else %}{{ t('start', lang) }}</div>\n                        </a>\n                    </div>\n                    </div>\n                </div>\n                {% endif %}\n\n                {% if virtual_patients %}\n                <div class=\"virtual-patients-section\">\n                    <h3 class=\"virtual-patients-title\">\n                        <div class=\"vp-icon\">\n                            <i class=\"bi bi-person-hearts\"></i>\n                        </div>\n                        {{ t('virtual_patients_title', lang) | default('Виртуальные пациенты') }}\n                    </h3>\n                    \n                    <div class=\"virtual-patients-grid\">\n                        <div data-jinja-for=\"scenario in virtual_patients\">\n                        <div class=\"vp-card\">\n                            <div>\n                                <div class=\"vp-card-header\">\n                                    <div class=\"vp-title\">{{ scenario.title }}</div>\n                                    <div class=\"vp-difficulty difficulty-{{ scenario.difficulty|default('medium')|lower }}\">\n                                        {{ scenario.difficulty|default('medium')|title }}\n                                    </div>\n                                </div>\n                                \n                                <div class=\"vp-description\">\n                                    {{ scenario.description|default('')|truncate(120) }}\n                                </div>\n                                \n                                {% if scenario.user_progress and scenario.user_progress.attempts_count > 0 %}\n                                <div class=\"vp-progress\">\n                                    <div class=\"vp-progress-bar\">\n                                        <div class=\"vp-progress-fill\" style=\"width: {{ scenario.user_progress.percentage|default(0) }}%\"></div>\n                                    </div>\n                                    <div class=\"vp-progress-text\">\n                                        <span>\n                                            {% if scenario.user_progress.completed %}\n                                                {{ t('completed', lang) }}\n                                            {% else %}\n                                                {{ t('in_progress_attempts', lang, count=scenario.user_progress.attempts_count) | default(scenario.user_progress.attempts_count ~ \" \" ~ t('attempts_short', lang)) }}\n                                            {% endif %}\n                                        </span>\n                                        <span>{{ scenario.user_progress.score|default(0) }}/{{ scenario.user_progress.max_score|default(100) }}</span>\n                                    </div>\n                                </div>\n                                {% endif %}\n                            </div>\n                            \n                            <div class=\"vp-actions\">\n                                <div data-jinja-if=\"scenario.is_premium and not user.has_subscription\">\n                                <a href=\"{{ url_for('main_bp.subscribe', lang=lang) }}\" class=\"vp-btn premium\">\n                                    <i class=\"bi bi-star-fill me-1\"></i> {{ t('premium', lang) }}\n                                </a>\n                                {% else %}\n                                <a href=\"{{ url_for('virtual_patient_bp.start_scenario', lang=lang, scenario_id=scenario.id) }}\" \n                                   class=\"vp-btn {% if scenario.user_progress and scenario.user_progress.completed %}completed</div>\">\n                                    <i class=\"bi bi-play-fill me-1\"></i>\n                                    <div data-jinja-if=\"scenario.user_progress and scenario.user_progress.completed\">\n                                        {{ t('try_again', lang) }}\n                                    {% elif scenario.user_progress and scenario.user_progress.attempts_count > 0 %}\n                                        {{ t('continue_vp', lang) | default(t('continue', lang)) }}\n                                    {% else %}\n                                        {{ t('start', lang) }}\n                                    </div>\n                                </a>\n                                {% endif %}\n                                \n                                <div data-jinja-if=\"scenario.user_progress and scenario.user_progress.completed and scenario.user_progress.best_attempt_id\">\n                                <a href=\"{{ url_for('virtual_patient_bp.results', lang=lang, attempt_id=scenario.user_progress.best_attempt_id) }}\" \n                                   class=\"vp-btn\">\n                                    <i class=\"bi bi-chart-line me-1\"></i> {{ t('results', lang) }}\n                                </a>\n                                </div>\n                            </div>\n                        </div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"view-all-vp\">\n                        <a href=\"{{ url_for('subject_view_bp.all_virtual_patients', lang=lang) }}\">\n                            {{ t('view_all_scenarios', lang) }} <i class=\"bi bi-arrow-right ms-1\"></i>\n                        </a>\n                    </div>\n                </div>\n                {% endif %}\n            </div>\n            {% elif selected_path %}\n            <div class=\"subjects-grid\">\n                {% set filtered_subjects = subjects|selectattr(\"learning_path_id\", \"equalto\", selected_path.id)|list %}\n                {% if filtered_subjects %}\n                    <div data-jinja-for=\"subject_item_path_filtered in filtered_subjects\">\n                    <div class=\"subject-card\">\n                        <a href=\"{{ url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item_path_filtered.id) }}\" class=\"subject-link\">\n                            <div class=\"card-content\">\n                                <div class=\"card-icon\">\n                                    <svg class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                        <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                        <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    </svg>\n                                </div>\n                                <div class=\"card-info\">\n                                    <h3>{{ subject_item_path_filtered.name }}</h3>\n                                    <p>{{ subject_item_path_filtered.description|default('')|truncate(80) }}</p>\n                                    <div class=\"card-footer\">\n                                        <div class=\"progress-bar-container\"><div class=\"progress-bar-fill\" style=\"width: {{ subject_item_path_filtered.progress|default(0) }}%;\"></div></div>\n                                        <span>{{ subject_item_path_filtered.progress|default(0) }}%</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </a>\n                    </div>\n                    </div>\n                {% endif %}\n            </div>\n            {% else %}\n            <div class=\"welcome-screen\">\n              <div class=\"welcome-header\">\n                <div class=\"welcome-icon\">\n                  <img src=\"{{ url_for('static', filename='favicon.png') }}\" alt=\"Dental Academy\" class=\"static-favicon-logo\">\n                </div>\n                <h2>{{ t('welcome_title', lang)|default('Добро пожаловать в Dental Academy!') }}</h2>\n                <p class=\"welcome-subtitle\">{{ t('welcome_subtitle', lang)|default('Ваш путь к успешной подготовке к BIG экзамену') }}</p>\n              </div>\n              \n              <div class=\"welcome-content\">\n                <div class=\"welcome-description\">\n                  <p>{{ t('welcome_description', lang)|default('Наша интерактивная платформа поможет вам эффективно подготовиться к экзамену. Выберите раздел для начала обучения или ознакомьтесь с рекомендуемыми темами.') }}</p>\n                </div>\n                \n                <div class=\"welcome-steps\">\n                  <h3>{{ t('getting_started', lang)|default('С чего начать?') }}</h3>\n                  <div class=\"steps-grid\">\n                    <div class=\"step-card\">\n                        <div class=\"step-icon\">\n                            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                            </svg>\n                        </div>\n                        <div class=\"step-content\">\n                            <h4>{{ t('knowledge_center', lang)|default('Центр знаний') }}</h4>\n                            <p>{{ t('knowledge_center_desc', lang)|default('Теоретические основы и ключевые концепции') }}</p>\n                            <button class=\"btn-start\" data-path=\"1\">{{ t('start', lang)|default('Начать') }}</button>\n                        </div>\n                    </div>\n                    \n                    <div class=\"step-card\">\n                        <div class=\"step-icon\">\n                            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                            </svg>\n                        </div>\n                        <div class=\"step-content\">\n                            <h4>{{ t('communication', lang)|default('Коммуникация') }}</h4>\n                            <p>{{ t('communication_desc', lang)|default('Отработка навыков общения с пациентами') }}</p>\n                            <button class=\"btn-start\" data-path=\"2\">{{ t('start', lang)|default('Начать') }}</button>\n                        </div>\n                    </div>\n                    \n                    <div class=\"step-card\">\n                        <div class=\"step-icon\">\n                            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                <path d=\"M9 3h6v2H9zM8 3h8l-1 9-2 2h-2l-2-2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                <path d=\"M8 14v.5A5.5 5.5 0 0 0 13.5 20h1a5.5 5.5 0 0 0 5.5-5.5V14\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                            </svg>\n                        </div>\n                        <div class=\"step-content\">\n                            <h4>{{ t('preclinical_skills', lang)|default('Доклинические навыки') }}</h4>\n                            <p>{{ t('preclinical_desc', lang)|default('Базовые стоматологические процедуры') }}</p>\n                            <button class=\"btn-start\" data-path=\"3\">{{ t('start', lang)|default('Начать') }}</button>\n                        </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div data-jinja-if=\"current_user.is_authenticated and stats and stats.completed_lessons > 0\">\n                <div class=\"welcome-stats\">\n                  <h3>{{ t('your_progress', lang)|default('Ваш прогресс') }}</h3>\n                  <div class=\"stats-summary\">\n                    <div class=\"stat-item\"><div class=\"stat-value\">{{ stats.completed_lessons }}</div><div class=\"stat-label\">{{ t('lessons_completed', lang)|default('уроков завершено') }}</div></div>\n                    <div class=\"stat-item\"><div class=\"stat-value\">{{ stats.overall_progress }}%</div><div class=\"stat-label\">{{ t('overall_progress', lang)|default('общий прогресс') }}</div></div>\n                    <div class=\"stat-item\"><div class=\"stat-value\">{{ stats.active_days }}</div><div class=\"stat-label\">{{ t('days_active', lang)|default('дней активности') }}</div></div>\n                  </div>\n                </div>\n                </div>\n              </div>\n            </div>\n            {% endif %}\n        </div>\n\n        <div class=\"right-column\">\n            <div class=\"stats-section\">\n                <h2>{{ t('overall_progress', lang) }}</h2>\n                <div class=\"progress-circle-container\">\n                    <div class=\"progress-circle\" \n                         data-progress=\"{{ stats.overall_progress|default(0) }}\"\n                         role=\"progressbar\" \n                         aria-valuenow=\"{{ stats.overall_progress|default(0) }}\" \n                         aria-valuemin=\"0\" \n                         aria-valuemax=\"100\"\n                         aria-label=\"Overall progress\">\n                        <div class=\"circle-background\"></div>\n                        <div class=\"circle-progress\" style=\"transform: rotate({{ stats.overall_progress|default(0) * 1.8 }}deg)\"></div>\n                        <div class=\"progress-circle-text\">{{ stats.overall_progress|default(0) }}%</div>\n                    </div>\n                </div>\n                <div class=\"stats-cards\">\n                    <div class=\"stat-card\">\n                        <div class=\"stat-icon blue\">\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                <circle cx=\"12\" cy=\"8\" r=\"7\"></circle>\n                                <polyline points=\"8.21 13.89 7 23 12 20 17 23 15.79 13.88\"></polyline>\n                            </svg>\n                        </div>\n                        <div class=\"stat-content\">\n                            <div class=\"stat-label\">{{ t('lessons_completed', lang) }}</div>\n                            <div class=\"stat-value\">{{ stats.completed_lessons|default(0) }}/{{ stats.total_lessons|default(0) }}</div>\n                        </div>\n                    </div>\n                    <div class=\"stat-card\">\n                        <div class=\"stat-icon purple\">\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                                <polyline points=\"12 6 12 12 16 14\"></polyline>\n                            </svg>\n                        </div>\n                        <div class=\"stat-content\">\n                            <div class=\"stat-label\">{{ t('total_time', lang) }}</div>\n                            <div class=\"stat-value\">{{ stats.total_time_spent|default(0) }} {{ t('min', lang) }}</div>\n                        </div>\n                    </div>\n                    <div class=\"stat-card\">\n                        <div class=\"stat-icon green\">\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"></polyline>\n                            </svg>\n                        </div>\n                        <div class=\"stat-content\">\n                            <div class=\"stat-label\">{{ t('days_active', lang) }}</div>\n                            <div class=\"stat-value\">{{ stats.active_days|default(0) }}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"countdown-section\">\n                <h2>{{ t('countdown', lang) }}</h2>\n                <div class=\"day-counter\">\n                    <span class=\"days-number\">{{ stats.days_until_exam|default(0) }}</span>\n                    <span class=\"days-label\">{{ t('days_until_exam', lang) }}</span>\n                </div>\n                <div class=\"exam-date\">\n                    <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                        <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                        <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line>\n                        <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line>\n                        <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line>\n                    </svg>\n                    <span>{{ stats.next_exam_date or t('not_scheduled', lang) }}</span>\n                </div>\n                <button class=\"schedule-button\" id=\"schedule-exam-button\">{{ t('schedule_exam', lang) }}</button>\n            </div>\n            \n            <div class=\"recommendations-section\">\n                <h2>{{ t('recommendations', lang) }}</h2>\n                <div class=\"recommendations-list\">\n                    {% if recommendations and recommendations|length > 0 %}\n                        <div data-jinja-for=\"rec in recommendations\">\n                        <div class=\"recommendation-item\">\n                            <div class=\"rec-icon {% if loop.index % 2 == 0 %}purple{% else %}blue{% endif %}\">\n                                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                    <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            </div>\n                            <div class=\"rec-info\">\n                                <h4>{{ rec.title }}</h4>\n                                <span>{{ rec.subject_name }}</span>\n                            </div>\n                            <button class=\"rec-action\" onclick=\"startModule({{ rec.module_id }})\">\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                    <polyline points=\"9 18 15 12 9 6\"></polyline>\n                                </svg>\n                            </button>\n                        </div>\n                        </div>\n                    {% else %}\n                    <div class=\"empty-recommendations\">\n                        <p>{{ t('no_recommendations', lang) }}</p>\n                    </div>\n                    {% endif %}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n</div>\n\n<div data-jinja-block=\"scripts\">\n<script src=\"{{ url_for('static', filename='js/universal-category-system.js') }}\"></script>\n<script src=\"{{ url_for('static', filename='js/subject_view.js') }}\"></script>\n<script>\n// Инициализация системы категорий\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Система автоматически инициализируется через universal-category-system.js\n    // Дополнительная настройка не требуется\n});\n\nfunction startModule(moduleId) {\n    window.location.href = '/{{ lang }}/learning-map/module/' + moduleId + '/start';\n}\n</script>\n</div>",
    "components": [
      {
        "id": "component_0",
        "type": "div",
        "content": "<!-- Анимированные декоративные элементы -->\n    <div class=\"floating-shape shape-1\">",
        "styles": {},
        "attributes": {
          "class": "floating-shape shape-1"
        },
        "editable": true,
        "draggable": true,
        "droppable": true,
        "category": "content"
      },
      {
        "id": "component_1",
        "type": "div",
        "content": "<div class=\"left-column\">\n            <div class=\"section-header\">\n                <h2></h2>",
        "styles": {},
        "attributes": {
          "class": "left-column"
        },
        "editable": true,
        "draggable": true,
        "droppable": true,
        "category": "content"
      },
      {
        "id": "component_2",
        "type": "div",
        "content": "<div class=\"progress-bar-fill\" style=\"width: %;\">",
        "styles": {
          "width": "%"
        },
        "attributes": {
          "class": "progress-bar-fill"
        },
        "editable": true,
        "draggable": true,
        "droppable": true,
        "category": "content"
      },
      {
        "id": "component_3",
        "type": "div",
        "content": "<div class=\"progress-circle\" \n                         data-progress=\"\"\n                         role=\"progressbar\" \n                         aria-valuenow=\"\" \n                         aria-valuemin=\"0\" \n                         aria-valuemax=\"100\"\n                         aria-label=\"Overall progress\">\n                        <div class=\"circle-background\">",
        "styles": {},
        "attributes": {
          "class": "progress-circle",
          "progress": "",
          "role": "progressbar",
          "valuenow": "",
          "valuemin": "0",
          "valuemax": "100",
          "label": "Overall progress"
        },
        "editable": true,
        "draggable": true,
        "droppable": true,
        "category": "content"
      }
    ],
    "structure": {
      "extends": [
        "base.html"
      ],
      "includes": [],
      "blocks": [
        "title",
        "styles",
        "content",
        "scripts"
      ],
      "variables": [
        "t('learning_map', lang) ",
        "super() ",
        "url_for('static', filename='css/pages/learning_map.css') ",
        "url_for('static', filename='css/category-navigation.css') ",
        "t('exam', lang) ",
        "path.id ",
        "path.name ",
        "path.id ",
        "url_for('virtual_patient_bp.scenarios_list', lang=lang) ",
        "t('clinical_cases', lang) | default('Клинические случаи') ",
        "path.vp_stats.percentage if path.vp_stats else 0 ",
        "path.vp_stats.completed ",
        "path.vp_stats.total ",
        "t('view_all', lang) | default('Показать все') ",
        "url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item.id) ",
        "subject_item.name ",
        "subject_item.progress|default(0) ",
        "subject_item.progress|default(0) ",
        "t('content', lang)|default('Контент') ",
        "category.id ",
        "category.icon ",
        "category.name ",
        "category.id ",
        "subcategory.url ",
        "subcategory.name ",
        "subcategory.topics_count ",
        "topic.url ",
        "topic.name ",
        "topic.lessons_count ",
        "selected_subject.learning_path.name ",
        "selected_subject.name ",
        "selected_path.name ",
        "selected_subject.name ",
        "selected_path.name ",
        "selected_subject.description|default('') ",
        "selected_path.description|default(t('select_subject_from_left_list', lang)) ",
        "module.id ",
        "module.title ",
        "t('premium', lang) ",
        "url_for('learning_map_bp.start_module_redirect', lang=lang, module_id=module.id) ",
        "t('repeat', lang) ",
        "t('continue', lang) ",
        "t('start', lang) ",
        "t('virtual_patients_title', lang) | default('Виртуальные пациенты') ",
        "scenario.title ",
        "scenario.difficulty|default('medium')|lower ",
        "scenario.difficulty|default('medium')|title ",
        "scenario.description|default('')|truncate(120) ",
        "scenario.user_progress.percentage|default(0) ",
        "t('completed', lang) ",
        "t('in_progress_attempts', lang, count=scenario.user_progress.attempts_count) | default(scenario.user_progress.attempts_count ~ \" \" ~ t('attempts_short', lang)) ",
        "scenario.user_progress.score|default(0) ",
        "scenario.user_progress.max_score|default(100) ",
        "url_for('main_bp.subscribe', lang=lang) ",
        "t('premium', lang) ",
        "url_for('virtual_patient_bp.start_scenario', lang=lang, scenario_id=scenario.id) ",
        "t('try_again', lang) ",
        "t('continue_vp', lang) | default(t('continue', lang)) ",
        "t('start', lang) ",
        "url_for('virtual_patient_bp.results', lang=lang, attempt_id=scenario.user_progress.best_attempt_id) ",
        "t('results', lang) ",
        "url_for('subject_view_bp.all_virtual_patients', lang=lang) ",
        "t('view_all_scenarios', lang) ",
        "url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item_path_filtered.id) ",
        "subject_item_path_filtered.name ",
        "subject_item_path_filtered.description|default('')|truncate(80) ",
        "subject_item_path_filtered.progress|default(0) ",
        "subject_item_path_filtered.progress|default(0) ",
        "url_for('static', filename='favicon.png') ",
        "t('welcome_title', lang)|default('Добро пожаловать в Dental Academy!') ",
        "t('welcome_subtitle', lang)|default('Ваш путь к успешной подготовке к BIG экзамену') ",
        "t('welcome_description', lang)|default('Наша интерактивная платформа поможет вам эффективно подготовиться к экзамену. Выберите раздел для начала обучения или ознакомьтесь с рекомендуемыми темами.') ",
        "t('getting_started', lang)|default('С чего начать?') ",
        "t('knowledge_center', lang)|default('Центр знаний') ",
        "t('knowledge_center_desc', lang)|default('Теоретические основы и ключевые концепции') ",
        "t('start', lang)|default('Начать') ",
        "t('communication', lang)|default('Коммуникация') ",
        "t('communication_desc', lang)|default('Отработка навыков общения с пациентами') ",
        "t('start', lang)|default('Начать') ",
        "t('preclinical_skills', lang)|default('Доклинические навыки') ",
        "t('preclinical_desc', lang)|default('Базовые стоматологические процедуры') ",
        "t('start', lang)|default('Начать') ",
        "t('your_progress', lang)|default('Ваш прогресс') ",
        "stats.completed_lessons ",
        "t('lessons_completed', lang)|default('уроков завершено') ",
        "stats.overall_progress ",
        "t('overall_progress', lang)|default('общий прогресс') ",
        "stats.active_days ",
        "t('days_active', lang)|default('дней активности') ",
        "t('overall_progress', lang) ",
        "stats.overall_progress|default(0) ",
        "stats.overall_progress|default(0) ",
        "stats.overall_progress|default(0) * 1.8 ",
        "stats.overall_progress|default(0) ",
        "t('lessons_completed', lang) ",
        "stats.completed_lessons|default(0) ",
        "stats.total_lessons|default(0) ",
        "t('total_time', lang) ",
        "stats.total_time_spent|default(0) ",
        "t('min', lang) ",
        "t('days_active', lang) ",
        "stats.active_days|default(0) ",
        "t('countdown', lang) ",
        "stats.days_until_exam|default(0) ",
        "t('days_until_exam', lang) ",
        "stats.next_exam_date or t('not_scheduled', lang) ",
        "t('schedule_exam', lang) ",
        "t('recommendations', lang) ",
        "rec.title ",
        "rec.subject_name ",
        "rec.module_id ",
        "t('no_recommendations', lang) ",
        "url_for('static', filename='js/universal-category-system.js') ",
        "url_for('static', filename='js/subject_view.js') ",
        "lang "
      ],
      "loops": [
        "path in learning_paths",
        "category in content_categories",
        "module in subject_modules",
        "scenario in virtual_patients",
        "subject_item_path_filtered in filtered_subjects",
        "rec in recommendations"
      ],
      "conditions": [
        "path.id == 1",
        "path.id == 1",
        "selected_subject and selected_subject.learning_path_id == path.id",
        "path.id == 6",
        "selected_subject and selected_subject.id == subject_item.id",
        "content_categories",
        "selected_subject and selected_subject.learning_path",
        "selected_subject",
        "selected_subject",
        "selected_subject",
        "module.progress == 100",
        "virtual_patients",
        "scenario.is_premium and not user.has_subscription",
        "scenario.user_progress and scenario.user_progress.completed",
        "scenario.user_progress and scenario.user_progress.completed and scenario.user_progress.best_attempt_id",
        "filtered_subjects",
        "current_user.is_authenticated and stats and stats.completed_lessons > 0",
        "recommendations and recommendations|length > 0"
      ],
      "css_files": [],
      "js_files": []
    },
    "original_content": "{% extends \"base.html\" %}\n\n{% block title %}{{ t('learning_map', lang) }} - Dental Academy{% endblock %}\n\n{% block styles %}\n{{ super() }}\n<link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/pages/learning_map.css') }}\">\n<link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/category-navigation.css') }}\">\n{% endblock %}\n\n{% block content %}\n<div class=\"learning-map-container\">\n    <!-- Анимированные декоративные элементы -->\n    <div class=\"floating-shape shape-1\"></div>\n    <div class=\"floating-shape shape-2\"></div>\n    <div class=\"floating-shape shape-3\"></div>\n    <div class=\"floating-shape shape-4\"></div>\n    \n    <div class=\"main-container\">\n        <div class=\"left-column\">\n            <div class=\"section-header\">\n                <h2>{{ t('exam', lang) }}</h2>\n            </div>\n            \n            <div class=\"learning-paths\">\n                {% for path in learning_paths %}\n                <div class=\"learning-path-item\">\n                    <button \n                        class=\"learning-path-button {% if path.id == 1 %}knowledge-center{% elif path.id == 2 %}communication{% elif path.id == 3 %}preclinical{% elif path.id == 4 %}workstation{% elif path.id == 5 %}bi-toets{% elif path.id == 6 %}virtual-patients{% endif %}\" \n                        data-path=\"{{ path.id }}\"\n                    >\n                        <div class=\"path-button-content\">\n                            {% if path.id == 1 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 2 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 3 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M9 3h6v2H9zM8 3h8l-1 9-2 2h-2l-2-2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M8 14v.5A5.5 5.5 0 0 0 13.5 20h1a5.5 5.5 0 0 0 5.5-5.5V14\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 4 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></rect>\n                                </svg>\n                            {% elif path.id == 5 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M9 11H7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-2m-6 0V3a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v8m-6 0h6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 6 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z\" fill=\"currentColor\"/>\n                                </svg>\n                            {% endif %}\n                            <span>{{ path.name }}</span>\n                        </div>\n                        <svg class=\"chevron-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                            <polyline points=\"9 18 15 12 9 6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></polyline>\n                        </svg>\n                    </button>\n                    \n                    <div class=\"subject-list {% if selected_subject and selected_subject.learning_path_id == path.id %}expanded{% endif %}\" id=\"path-{{ path.id }}-subjects\">\n                        {% if path.id == 6 %}\n                            <a href=\"{{ url_for('virtual_patient_bp.scenarios_list', lang=lang) }}\" class=\"subject-item\">\n                                <span class=\"subject-name\">{{ t('clinical_cases', lang) | default('Клинические случаи') }}</span>\n                                <div class=\"subject-progress\">\n                                    <div class=\"progress-bar\">\n                                        <div class=\"progress-fill\" style=\"width: {{ path.vp_stats.percentage if path.vp_stats else 0 }}%\"></div>\n                                    </div>\n                                    <span class=\"progress-percent\">\n                                        {% if path.vp_stats %}\n                                            {{ path.vp_stats.completed }}/{{ path.vp_stats.total }}\n                                        {% else %}\n                                            {{ t('view_all', lang) | default('Показать все') }}\n                                        {% endif %}\n                                    </span>\n                                </div>\n                            </a>\n                        {% else %}\n                            {% for subject_item in subjects if subject_item.learning_path_id == path.id %}\n                            <a href=\"{{ url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item.id) }}\" \n                               class=\"subject-item {% if selected_subject and selected_subject.id == subject_item.id %}active{% endif %}\">\n                                <span class=\"subject-name\">{{ subject_item.name }}</span>\n                                <div class=\"subject-progress\">\n                                    <div class=\"progress-bar\">\n                                        <div class=\"progress-fill\" style=\"width: {{ subject_item.progress|default(0) }}%\"></div>\n                                    </div>\n                                    <span class=\"progress-percent\">{{ subject_item.progress|default(0) }}%</span>\n                                </div>\n                            </a>\n                            {% endfor %}\n                        {% endif %}\n                    </div>\n                </div>\n                {% endfor %}\n            </div>\n            \n            <!-- Секция с контентом -->\n            {% if content_categories %}\n            <div class=\"section-header\" style=\"margin-top: 2rem;\">\n                <h2>{{ t('content', lang)|default('Контент') }}</h2>\n            </div>\n            \n\n            \n            <div class=\"learning-paths\">\n                {% for category in content_categories %}\n                <div class=\"learning-path-item\">\n                    <button class=\"learning-path-button content-category\" data-category=\"{{ category.id }}\">\n                        <div class=\"path-button-content\">\n                            <i class=\"{{ category.icon }}\"></i>\n                            <span>{{ category.name }}</span>\n                        </div>\n                        <svg class=\"chevron-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                            <polyline points=\"9 18 15 12 9 6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></polyline>\n                        </svg>\n                    </button>\n                    \n                    <div class=\"subject-list\" id=\"category-{{ category.id }}-subcategories\">\n                        {% for subcategory in category.subcategories %}\n                        <div class=\"subcategory-item\">\n                            <a href=\"{{ subcategory.url }}\" class=\"subject-item\">\n                                <span class=\"subject-name\">{{ subcategory.name }}</span>\n                                <div class=\"subject-progress\">\n                                    <span class=\"progress-percent\">{{ subcategory.topics_count }} тем</span>\n                                </div>\n                            </a>\n                            \n                            <!-- Темы подкатегории -->\n                            <div class=\"topics-list\" style=\"padding-left: 1rem; display: none;\">\n                                {% for topic in subcategory.topics %}\n                                <a href=\"{{ topic.url }}\" class=\"topic-item\" style=\"display: block; padding: 0.5rem; color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.9rem;\">\n                                    <span>{{ topic.name }}</span>\n                                    <span style=\"float: right; font-size: 0.8rem; opacity: 0.7;\">{{ topic.lessons_count }} уроков</span>\n                                </a>\n                                {% endfor %}\n                            </div>\n                        </div>\n                        {% endfor %}\n                    </div>\n                </div>\n                {% endfor %}\n            </div>\n            {% endif %}\n        </div>\n\n        <div class=\"middle-column\">\n            <div class=\"page-header\">\n                <div class=\"breadcrumb\">\n                    {% if selected_subject and selected_subject.learning_path %}\n                        <span>{{ selected_subject.learning_path.name }}</span>\n                        <span class=\"separator\">/</span>\n                        <span class=\"active\">{{ selected_subject.name }}</span>\n                    {% elif selected_path %}\n                        <span class=\"active\">{{ selected_path.name }}</span>\n                    {% endif %}\n                </div>\n                <h1>{% if selected_subject %}{{ selected_subject.name }}{% elif selected_path %}{{ selected_path.name }}{% endif %}</h1>\n                <p>{% if selected_subject %}{{ selected_subject.description|default('') }}{% elif selected_path %}{{ selected_path.description|default(t('select_subject_from_left_list', lang)) }}{% endif %}</p>\n            </div>\n\n            {% if selected_subject %}\n            <div class=\"subject-content\">\n                {% if subject_modules %}\n                <!-- Компактные модули без статистики -->\n                <div class=\"modules-grid-compact\">\n                    {% for module in subject_modules %}\n                    <div class=\"module-card-compact\" data-module-id=\"{{ module.id }}\">\n                        <div class=\"module-icon-compact\">\n                            <i class=\"bi bi-book\"></i>\n                        </div>\n                        <div class=\"module-info-compact\">\n                            <h3>{{ module.title }}</h3>\n                            {% if module.is_premium and not user.has_subscription %}\n                                <span class=\"badge premium-badge\">{{ t('premium', lang) }}</span>\n                            {% endif %}\n                        </div>\n                        <a href=\"{{ url_for('learning_map_bp.start_module_redirect', lang=lang, module_id=module.id) }}\" \n                           class=\"module-btn-compact\">\n                            {% if module.progress == 100 %}{{ t('repeat', lang) }}\n                            {% elif module.progress > 0 %}{{ t('continue', lang) }}\n                            {% else %}{{ t('start', lang) }}{% endif %}\n                        </a>\n                    </div>\n                    {% endfor %}\n                </div>\n                {% endif %}\n\n                {% if virtual_patients %}\n                <div class=\"virtual-patients-section\">\n                    <h3 class=\"virtual-patients-title\">\n                        <div class=\"vp-icon\">\n                            <i class=\"bi bi-person-hearts\"></i>\n                        </div>\n                        {{ t('virtual_patients_title', lang) | default('Виртуальные пациенты') }}\n                    </h3>\n                    \n                    <div class=\"virtual-patients-grid\">\n                        {% for scenario in virtual_patients %}\n                        <div class=\"vp-card\">\n                            <div>\n                                <div class=\"vp-card-header\">\n                                    <div class=\"vp-title\">{{ scenario.title }}</div>\n                                    <div class=\"vp-difficulty difficulty-{{ scenario.difficulty|default('medium')|lower }}\">\n                                        {{ scenario.difficulty|default('medium')|title }}\n                                    </div>\n                                </div>\n                                \n                                <div class=\"vp-description\">\n                                    {{ scenario.description|default('')|truncate(120) }}\n                                </div>\n                                \n                                {% if scenario.user_progress and scenario.user_progress.attempts_count > 0 %}\n                                <div class=\"vp-progress\">\n                                    <div class=\"vp-progress-bar\">\n                                        <div class=\"vp-progress-fill\" style=\"width: {{ scenario.user_progress.percentage|default(0) }}%\"></div>\n                                    </div>\n                                    <div class=\"vp-progress-text\">\n                                        <span>\n                                            {% if scenario.user_progress.completed %}\n                                                {{ t('completed', lang) }}\n                                            {% else %}\n                                                {{ t('in_progress_attempts', lang, count=scenario.user_progress.attempts_count) | default(scenario.user_progress.attempts_count ~ \" \" ~ t('attempts_short', lang)) }}\n                                            {% endif %}\n                                        </span>\n                                        <span>{{ scenario.user_progress.score|default(0) }}/{{ scenario.user_progress.max_score|default(100) }}</span>\n                                    </div>\n                                </div>\n                                {% endif %}\n                            </div>\n                            \n                            <div class=\"vp-actions\">\n                                {% if scenario.is_premium and not user.has_subscription %}\n                                <a href=\"{{ url_for('main_bp.subscribe', lang=lang) }}\" class=\"vp-btn premium\">\n                                    <i class=\"bi bi-star-fill me-1\"></i> {{ t('premium', lang) }}\n                                </a>\n                                {% else %}\n                                <a href=\"{{ url_for('virtual_patient_bp.start_scenario', lang=lang, scenario_id=scenario.id) }}\" \n                                   class=\"vp-btn {% if scenario.user_progress and scenario.user_progress.completed %}completed{% endif %}\">\n                                    <i class=\"bi bi-play-fill me-1\"></i>\n                                    {% if scenario.user_progress and scenario.user_progress.completed %}\n                                        {{ t('try_again', lang) }}\n                                    {% elif scenario.user_progress and scenario.user_progress.attempts_count > 0 %}\n                                        {{ t('continue_vp', lang) | default(t('continue', lang)) }}\n                                    {% else %}\n                                        {{ t('start', lang) }}\n                                    {% endif %}\n                                </a>\n                                {% endif %}\n                                \n                                {% if scenario.user_progress and scenario.user_progress.completed and scenario.user_progress.best_attempt_id %}\n                                <a href=\"{{ url_for('virtual_patient_bp.results', lang=lang, attempt_id=scenario.user_progress.best_attempt_id) }}\" \n                                   class=\"vp-btn\">\n                                    <i class=\"bi bi-chart-line me-1\"></i> {{ t('results', lang) }}\n                                </a>\n                                {% endif %}\n                            </div>\n                        </div>\n                        {% endfor %}\n                    </div>\n                    \n                    <div class=\"view-all-vp\">\n                        <a href=\"{{ url_for('subject_view_bp.all_virtual_patients', lang=lang) }}\">\n                            {{ t('view_all_scenarios', lang) }} <i class=\"bi bi-arrow-right ms-1\"></i>\n                        </a>\n                    </div>\n                </div>\n                {% endif %}\n            </div>\n            {% elif selected_path %}\n            <div class=\"subjects-grid\">\n                {% set filtered_subjects = subjects|selectattr(\"learning_path_id\", \"equalto\", selected_path.id)|list %}\n                {% if filtered_subjects %}\n                    {% for subject_item_path_filtered in filtered_subjects %}\n                    <div class=\"subject-card\">\n                        <a href=\"{{ url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item_path_filtered.id) }}\" class=\"subject-link\">\n                            <div class=\"card-content\">\n                                <div class=\"card-icon\">\n                                    <svg class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                        <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                        <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    </svg>\n                                </div>\n                                <div class=\"card-info\">\n                                    <h3>{{ subject_item_path_filtered.name }}</h3>\n                                    <p>{{ subject_item_path_filtered.description|default('')|truncate(80) }}</p>\n                                    <div class=\"card-footer\">\n                                        <div class=\"progress-bar-container\"><div class=\"progress-bar-fill\" style=\"width: {{ subject_item_path_filtered.progress|default(0) }}%;\"></div></div>\n                                        <span>{{ subject_item_path_filtered.progress|default(0) }}%</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </a>\n                    </div>\n                    {% endfor %}\n                {% endif %}\n            </div>\n            {% else %}\n            <div class=\"welcome-screen\">\n              <div class=\"welcome-header\">\n                <div class=\"welcome-icon\">\n                  <img src=\"{{ url_for('static', filename='favicon.png') }}\" alt=\"Dental Academy\" class=\"static-favicon-logo\">\n                </div>\n                <h2>{{ t('welcome_title', lang)|default('Добро пожаловать в Dental Academy!') }}</h2>\n                <p class=\"welcome-subtitle\">{{ t('welcome_subtitle', lang)|default('Ваш путь к успешной подготовке к BIG экзамену') }}</p>\n              </div>\n              \n              <div class=\"welcome-content\">\n                <div class=\"welcome-description\">\n                  <p>{{ t('welcome_description', lang)|default('Наша интерактивная платформа поможет вам эффективно подготовиться к экзамену. Выберите раздел для начала обучения или ознакомьтесь с рекомендуемыми темами.') }}</p>\n                </div>\n                \n                <div class=\"welcome-steps\">\n                  <h3>{{ t('getting_started', lang)|default('С чего начать?') }}</h3>\n                  <div class=\"steps-grid\">\n                    <div class=\"step-card\">\n                        <div class=\"step-icon\">\n                            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                            </svg>\n                        </div>\n                        <div class=\"step-content\">\n                            <h4>{{ t('knowledge_center', lang)|default('Центр знаний') }}</h4>\n                            <p>{{ t('knowledge_center_desc', lang)|default('Теоретические основы и ключевые концепции') }}</p>\n                            <button class=\"btn-start\" data-path=\"1\">{{ t('start', lang)|default('Начать') }}</button>\n                        </div>\n                    </div>\n                    \n                    <div class=\"step-card\">\n                        <div class=\"step-icon\">\n                            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                            </svg>\n                        </div>\n                        <div class=\"step-content\">\n                            <h4>{{ t('communication', lang)|default('Коммуникация') }}</h4>\n                            <p>{{ t('communication_desc', lang)|default('Отработка навыков общения с пациентами') }}</p>\n                            <button class=\"btn-start\" data-path=\"2\">{{ t('start', lang)|default('Начать') }}</button>\n                        </div>\n                    </div>\n                    \n                    <div class=\"step-card\">\n                        <div class=\"step-icon\">\n                            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                <path d=\"M9 3h6v2H9zM8 3h8l-1 9-2 2h-2l-2-2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                <path d=\"M8 14v.5A5.5 5.5 0 0 0 13.5 20h1a5.5 5.5 0 0 0 5.5-5.5V14\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                            </svg>\n                        </div>\n                        <div class=\"step-content\">\n                            <h4>{{ t('preclinical_skills', lang)|default('Доклинические навыки') }}</h4>\n                            <p>{{ t('preclinical_desc', lang)|default('Базовые стоматологические процедуры') }}</p>\n                            <button class=\"btn-start\" data-path=\"3\">{{ t('start', lang)|default('Начать') }}</button>\n                        </div>\n                    </div>\n                  </div>\n                </div>\n                \n                {% if current_user.is_authenticated and stats and stats.completed_lessons > 0 %}\n                <div class=\"welcome-stats\">\n                  <h3>{{ t('your_progress', lang)|default('Ваш прогресс') }}</h3>\n                  <div class=\"stats-summary\">\n                    <div class=\"stat-item\"><div class=\"stat-value\">{{ stats.completed_lessons }}</div><div class=\"stat-label\">{{ t('lessons_completed', lang)|default('уроков завершено') }}</div></div>\n                    <div class=\"stat-item\"><div class=\"stat-value\">{{ stats.overall_progress }}%</div><div class=\"stat-label\">{{ t('overall_progress', lang)|default('общий прогресс') }}</div></div>\n                    <div class=\"stat-item\"><div class=\"stat-value\">{{ stats.active_days }}</div><div class=\"stat-label\">{{ t('days_active', lang)|default('дней активности') }}</div></div>\n                  </div>\n                </div>\n                {% endif %}\n              </div>\n            </div>\n            {% endif %}\n        </div>\n\n        <div class=\"right-column\">\n            <div class=\"stats-section\">\n                <h2>{{ t('overall_progress', lang) }}</h2>\n                <div class=\"progress-circle-container\">\n                    <div class=\"progress-circle\" \n                         data-progress=\"{{ stats.overall_progress|default(0) }}\"\n                         role=\"progressbar\" \n                         aria-valuenow=\"{{ stats.overall_progress|default(0) }}\" \n                         aria-valuemin=\"0\" \n                         aria-valuemax=\"100\"\n                         aria-label=\"Overall progress\">\n                        <div class=\"circle-background\"></div>\n                        <div class=\"circle-progress\" style=\"transform: rotate({{ stats.overall_progress|default(0) * 1.8 }}deg)\"></div>\n                        <div class=\"progress-circle-text\">{{ stats.overall_progress|default(0) }}%</div>\n                    </div>\n                </div>\n                <div class=\"stats-cards\">\n                    <div class=\"stat-card\">\n                        <div class=\"stat-icon blue\">\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                <circle cx=\"12\" cy=\"8\" r=\"7\"></circle>\n                                <polyline points=\"8.21 13.89 7 23 12 20 17 23 15.79 13.88\"></polyline>\n                            </svg>\n                        </div>\n                        <div class=\"stat-content\">\n                            <div class=\"stat-label\">{{ t('lessons_completed', lang) }}</div>\n                            <div class=\"stat-value\">{{ stats.completed_lessons|default(0) }}/{{ stats.total_lessons|default(0) }}</div>\n                        </div>\n                    </div>\n                    <div class=\"stat-card\">\n                        <div class=\"stat-icon purple\">\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                                <polyline points=\"12 6 12 12 16 14\"></polyline>\n                            </svg>\n                        </div>\n                        <div class=\"stat-content\">\n                            <div class=\"stat-label\">{{ t('total_time', lang) }}</div>\n                            <div class=\"stat-value\">{{ stats.total_time_spent|default(0) }} {{ t('min', lang) }}</div>\n                        </div>\n                    </div>\n                    <div class=\"stat-card\">\n                        <div class=\"stat-icon green\">\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"></polyline>\n                            </svg>\n                        </div>\n                        <div class=\"stat-content\">\n                            <div class=\"stat-label\">{{ t('days_active', lang) }}</div>\n                            <div class=\"stat-value\">{{ stats.active_days|default(0) }}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"countdown-section\">\n                <h2>{{ t('countdown', lang) }}</h2>\n                <div class=\"day-counter\">\n                    <span class=\"days-number\">{{ stats.days_until_exam|default(0) }}</span>\n                    <span class=\"days-label\">{{ t('days_until_exam', lang) }}</span>\n                </div>\n                <div class=\"exam-date\">\n                    <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                        <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                        <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line>\n                        <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line>\n                        <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line>\n                    </svg>\n                    <span>{{ stats.next_exam_date or t('not_scheduled', lang) }}</span>\n                </div>\n                <button class=\"schedule-button\" id=\"schedule-exam-button\">{{ t('schedule_exam', lang) }}</button>\n            </div>\n            \n            <div class=\"recommendations-section\">\n                <h2>{{ t('recommendations', lang) }}</h2>\n                <div class=\"recommendations-list\">\n                    {% if recommendations and recommendations|length > 0 %}\n                        {% for rec in recommendations %}\n                        <div class=\"recommendation-item\">\n                            <div class=\"rec-icon {% if loop.index % 2 == 0 %}purple{% else %}blue{% endif %}\">\n                                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                    <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            </div>\n                            <div class=\"rec-info\">\n                                <h4>{{ rec.title }}</h4>\n                                <span>{{ rec.subject_name }}</span>\n                            </div>\n                            <button class=\"rec-action\" onclick=\"startModule({{ rec.module_id }})\">\n                                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                                    <polyline points=\"9 18 15 12 9 6\"></polyline>\n                                </svg>\n                            </button>\n                        </div>\n                        {% endfor %}\n                    {% else %}\n                    <div class=\"empty-recommendations\">\n                        <p>{{ t('no_recommendations', lang) }}</p>\n                    </div>\n                    {% endif %}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n{% endblock %}\n\n{% block scripts %}\n<script src=\"{{ url_for('static', filename='js/universal-category-system.js') }}\"></script>\n<script src=\"{{ url_for('static', filename='js/subject_view.js') }}\"></script>\n<script>\n// Инициализация системы категорий\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Система автоматически инициализируется через universal-category-system.js\n    // Дополнительная настройка не требуется\n});\n\nfunction startModule(moduleId) {\n    window.location.href = '/{{ lang }}/learning-map/module/' + moduleId + '/start';\n}\n</script>\n{% endblock %}",
    "metadata": {
      "file_size": 31572,
      "lines_count": 503,
      "has_extends": true,
      "has_includes": false,
      "blocks_count": 4,
      "variables_count": 115
    }
  },
  "grapesjs_config": {
    "components": [
      {
        "id": "component_0",
        "type": "div",
        "content": "<!-- Анимированные декоративные элементы -->\n    <div class=\"floating-shape shape-1\">",
        "styles": {},
        "attributes": {
          "class": "floating-shape shape-1"
        },
        "editable": true,
        "draggable": true,
        "droppable": true,
        "category": "content"
      },
      {
        "id": "component_1",
        "type": "div",
        "content": "<div class=\"left-column\">\n            <div class=\"section-header\">\n                <h2></h2>",
        "styles": {},
        "attributes": {
          "class": "left-column"
        },
        "editable": true,
        "draggable": true,
        "droppable": true,
        "category": "content"
      },
      {
        "id": "component_2",
        "type": "div",
        "content": "<div class=\"progress-bar-fill\" style=\"width: %;\">",
        "styles": {
          "width": "%"
        },
        "attributes": {
          "class": "progress-bar-fill"
        },
        "editable": true,
        "draggable": true,
        "droppable": true,
        "category": "content"
      },
      {
        "id": "component_3",
        "type": "div",
        "content": "<div class=\"progress-circle\" \n                         data-progress=\"\"\n                         role=\"progressbar\" \n                         aria-valuenow=\"\" \n                         aria-valuemin=\"0\" \n                         aria-valuemax=\"100\"\n                         aria-label=\"Overall progress\">\n                        <div class=\"circle-background\">",
        "styles": {},
        "attributes": {
          "class": "progress-circle",
          "progress": "",
          "role": "progressbar",
          "valuenow": "",
          "valuemin": "0",
          "valuemax": "100",
          "label": "Overall progress"
        },
        "editable": true,
        "draggable": true,
        "droppable": true,
        "category": "content"
      }
    ],
    "style": [
      {
        "selectors": [
          {
            "name": "body"
          }
        ],
        "style": {
          "--Анимированные декоративные элементы -->\n    <div class=\"floating-shape shape-1\"></div>\n    <div class=\"floating-shape shape-2\"></div>\n    <div class=\"floating-shape shape-3\"></div>\n    <div class=\"floating-shape shape-4\"></div>\n    \n    <div class=\"main-container\">\n        <div class=\"left-column\">\n            <div class=\"section-header\">\n                <h2>{{ t('exam', lang) }}</h2>\n            </div>\n            \n            <div class=\"learning-paths\">\n                {% for path in learning_paths %}\n                <div class=\"learning-path-item\">\n                    <button \n                        class=\"learning-path-button {% if path.id == 1 %}knowledge-center{% elif path.id == 2 %}communication{% elif path.id == 3 %}preclinical{% elif path.id == 4 %}workstation{% elif path.id == 5 %}bi-toets{% elif path.id == 6 %}virtual-patients{% endif %}\" \n                        data-path=\"{{ path.id }}\"\n                    >\n                        <div class=\"path-button-content\">\n                            {% if path.id == 1 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 2 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 3 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M9 3h6v2H9zM8 3h8l-1 9-2 2h-2l-2-2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <path d=\"M8 14v.5A5.5 5.5 0 0 0 13.5 20h1a5.5 5.5 0 0 0 5.5-5.5V14\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 4 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    <rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></rect>\n                                </svg>\n                            {% elif path.id == 5 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M9 11H7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-2m-6 0V3a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v8m-6 0h6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                </svg>\n                            {% elif path.id == 6 %}\n                                <svg class=\"icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                                    <path d=\"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z\" fill=\"currentColor\"/>\n                                </svg>\n                            {% endif %}\n                            <span>{{ path.name }}</span>\n                        </div>\n                        <svg class=\"chevron-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\">\n                            <polyline points=\"9 18 15 12 9 6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></polyline>\n                        </svg>\n                    </button>\n                    \n                    <div class=\"subject-list {% if selected_subject and selected_subject.learning_path_id == path.id %}expanded{% endif %}\" id=\"path-{{ path.id }}-subjects\">\n                        {% if path.id == 6 %}\n                            <a href=\"{{ url_for('virtual_patient_bp.scenarios_list', lang=lang) }}\" class=\"subject-item\">\n                                <span class=\"subject-name\">{{ t('clinical_cases', lang) | default('Клинические случаи') }}</span>\n                                <div class=\"subject-progress\">\n                                    <div class=\"progress-bar\">\n                                        <div class=\"progress-fill\" style=\"width": "{{ path.vp_stats.percentage if path.vp_stats else 0 }}%\"></div>\n                                    </div>\n                                    <span class=\"progress-percent\">\n                                        {% if path.vp_stats %}\n                                            {{ path.vp_stats.completed }}/{{ path.vp_stats.total }}\n                                        {% else %}\n                                            {{ t('view_all', lang) | default('Показать все') }}\n                                        {% endif %}\n                                    </span>\n                                </div>\n                            </a>\n                        {% else %}\n                            {% for subject_item in subjects if subject_item.learning_path_id == path.id %}\n                            <a href=\"{{ url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item.id) }}\" \n                               class=\"subject-item {% if selected_subject and selected_subject.id == subject_item.id %}active{% endif %}\">\n                                <span class=\"subject-name\">{{ subject_item.name }}</span>\n                                <div class=\"subject-progress\">\n                                    <div class=\"progress-bar\">\n                                        <div class=\"progress-fill\" style=\"width: {{ subject_item.progress|default(0) }}%\"></div>\n                                    </div>\n                                    <span class=\"progress-percent\">{{ subject_item.progress|default(0) }}%</span>\n                                </div>\n                            </a>\n                            {% endfor %}\n                        {% endif %}\n                    </div>\n                </div>\n                {% endfor %}\n            </div>\n            \n            <!-- Секция с контентом -->\n            {% if content_categories %}\n            <div class=\"section-header\" style=\"margin-top: 2rem",
          "--Темы подкатегории -->\n                            <div class=\"topics-list\" style=\"padding-left": "1rem",
          "--Компактные модули без статистики -->\n                <div class=\"modules-grid-compact\">\n                    {% for module in subject_modules %}\n                    <div class=\"module-card-compact\" data-module-id=\"{{ module.id }}\">\n                        <div class=\"module-icon-compact\">\n                            <i class=\"bi bi-book\"></i>\n                        </div>\n                        <div class=\"module-info-compact\">\n                            <h3>{{ module.title }}</h3>\n                            {% if module.is_premium and not user.has_subscription %}\n                                <span class=\"badge premium-badge\">{{ t('premium', lang) }}</span>\n                            {% endif %}\n                        </div>\n                        <a href=\"{{ url_for('learning_map_bp.start_module_redirect', lang=lang, module_id=module.id) }}\" \n                           class=\"module-btn-compact\">\n                            {% if module.progress == 100 %}{{ t('repeat', lang) }}\n                            {% elif module.progress > 0 %}{{ t('continue', lang) }}\n                            {% else %}{{ t('start', lang) }}{% endif %}\n                        </a>\n                    </div>\n                    {% endfor %}\n                </div>\n                {% endif %}\n\n                {% if virtual_patients %}\n                <div class=\"virtual-patients-section\">\n                    <h3 class=\"virtual-patients-title\">\n                        <div class=\"vp-icon\">\n                            <i class=\"bi bi-person-hearts\"></i>\n                        </div>\n                        {{ t('virtual_patients_title', lang) | default('Виртуальные пациенты') }}\n                    </h3>\n                    \n                    <div class=\"virtual-patients-grid\">\n                        {% for scenario in virtual_patients %}\n                        <div class=\"vp-card\">\n                            <div>\n                                <div class=\"vp-card-header\">\n                                    <div class=\"vp-title\">{{ scenario.title }}</div>\n                                    <div class=\"vp-difficulty difficulty-{{ scenario.difficulty|default('medium')|lower }}\">\n                                        {{ scenario.difficulty|default('medium')|title }}\n                                    </div>\n                                </div>\n                                \n                                <div class=\"vp-description\">\n                                    {{ scenario.description|default('')|truncate(120) }}\n                                </div>\n                                \n                                {% if scenario.user_progress and scenario.user_progress.attempts_count > 0 %}\n                                <div class=\"vp-progress\">\n                                    <div class=\"vp-progress-bar\">\n                                        <div class=\"vp-progress-fill\" style=\"width": "{{ scenario.user_progress.percentage|default(0) }}%\"></div>\n                                    </div>\n                                    <div class=\"vp-progress-text\">\n                                        <span>\n                                            {% if scenario.user_progress.completed %}\n                                                {{ t('completed', lang) }}\n                                            {% else %}\n                                                {{ t('in_progress_attempts', lang, count=scenario.user_progress.attempts_count) | default(scenario.user_progress.attempts_count ~ \" \" ~ t('attempts_short', lang)) }}\n                                            {% endif %}\n                                        </span>\n                                        <span>{{ scenario.user_progress.score|default(0) }}/{{ scenario.user_progress.max_score|default(100) }}</span>\n                                    </div>\n                                </div>\n                                {% endif %}\n                            </div>\n                            \n                            <div class=\"vp-actions\">\n                                {% if scenario.is_premium and not user.has_subscription %}\n                                <a href=\"{{ url_for('main_bp.subscribe', lang=lang) }}\" class=\"vp-btn premium\">\n                                    <i class=\"bi bi-star-fill me-1\"></i> {{ t('premium', lang) }}\n                                </a>\n                                {% else %}\n                                <a href=\"{{ url_for('virtual_patient_bp.start_scenario', lang=lang, scenario_id=scenario.id) }}\" \n                                   class=\"vp-btn {% if scenario.user_progress and scenario.user_progress.completed %}completed{% endif %}\">\n                                    <i class=\"bi bi-play-fill me-1\"></i>\n                                    {% if scenario.user_progress and scenario.user_progress.completed %}\n                                        {{ t('try_again', lang) }}\n                                    {% elif scenario.user_progress and scenario.user_progress.attempts_count > 0 %}\n                                        {{ t('continue_vp', lang) | default(t('continue', lang)) }}\n                                    {% else %}\n                                        {{ t('start', lang) }}\n                                    {% endif %}\n                                </a>\n                                {% endif %}\n                                \n                                {% if scenario.user_progress and scenario.user_progress.completed and scenario.user_progress.best_attempt_id %}\n                                <a href=\"{{ url_for('virtual_patient_bp.results', lang=lang, attempt_id=scenario.user_progress.best_attempt_id) }}\" \n                                   class=\"vp-btn\">\n                                    <i class=\"bi bi-chart-line me-1\"></i> {{ t('results', lang) }}\n                                </a>\n                                {% endif %}\n                            </div>\n                        </div>\n                        {% endfor %}\n                    </div>\n                    \n                    <div class=\"view-all-vp\">\n                        <a href=\"{{ url_for('subject_view_bp.all_virtual_patients', lang=lang) }}\">\n                            {{ t('view_all_scenarios', lang) }} <i class=\"bi bi-arrow-right ms-1\"></i>\n                        </a>\n                    </div>\n                </div>\n                {% endif %}\n            </div>\n            {% elif selected_path %}\n            <div class=\"subjects-grid\">\n                {% set filtered_subjects = subjects|selectattr(\"learning_path_id\", \"equalto\", selected_path.id)|list %}\n                {% if filtered_subjects %}\n                    {% for subject_item_path_filtered in filtered_subjects %}\n                    <div class=\"subject-card\">\n                        <a href=\"{{ url_for('subject_view_bp.view_subject', lang=lang, subject_id=subject_item_path_filtered.id) }}\" class=\"subject-link\">\n                            <div class=\"card-content\">\n                                <div class=\"card-icon\">\n                                    <svg class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                                        <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                        <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"></path>\n                                    </svg>\n                                </div>\n                                <div class=\"card-info\">\n                                    <h3>{{ subject_item_path_filtered.name }}</h3>\n                                    <p>{{ subject_item_path_filtered.description|default('')|truncate(80) }}</p>\n                                    <div class=\"card-footer\">\n                                        <div class=\"progress-bar-container\"><div class=\"progress-bar-fill\" style=\"width: {{ subject_item_path_filtered.progress|default(0) }}%",
          "--subject-view-bg": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
          "--text-primary": "#333333",
          "--bg-primary": "#ffffff",
          "--subject-view-border": "rgba(255, 255, 255, 0.2)",
          "--subject-view-text": "rgba(255, 255, 255, 0.9)",
          "--subject-view-button-bg": "rgba(255, 255, 255, 0.1)",
          "--subject-view-button-text": "white",
          "--category-knowledge": "linear-gradient(135deg, #3498db, #2980b9)",
          "--category-communication": "linear-gradient(135deg, #9b59b6, #8e44ad)",
          "--category-preclinical": "linear-gradient(135deg, #1abc9c, #16a085)",
          "--category-workstation": "linear-gradient(135deg, #e74c3c, #c0392b)",
          "--category-bi-toets": "linear-gradient(135deg, #f39c12, #e67e22)",
          "--category-virtual-patients": "linear-gradient(135deg, #667eea, #764ba2)"
        }
      }
    ],
    "storage": {
      "type": "remote",
      "autosave": true,
      "autoload": true,
      "stepsBeforeSave": 1
    },
    "panels": {
      "defaults": [
        {
          "id": "basic-actions",
          "el": ".panel__basic-actions",
          "buttons": [
            {
              "id": "visibility",
              "active": true,
              "className": "btn-toggle-borders",
              "label": "<u>B</u>",
              "command": "sw-visibility"
            }
          ]
        }
      ]
    },
    "deviceManager": {
      "devices": [
        {
          "name": "Desktop",
          "width": ""
        },
        {
          "name": "Tablet",
          "width": "768px",
          "widthMedia": "992px"
        },
        {
          "name": "Mobile",
          "width": "320px",
          "widthMedia": "480px"
        }
      ]
    },
    "plugins": [
      "gjs-preset-webpage",
      "gjs-plugin-ckeditor"
    ],
    "pluginsOpts": {
      "gjs-preset-webpage": {},
      "gjs-plugin-ckeditor": [
        "position: absolute; top: 0; left: 0; z-index: 100;"
      ]
    }
  },
  "conversion_metadata": {
    "converter_version": "1.0.0",
    "template_path": "learning/subject_view.html",
    "conversion_date": "/Users/evgenijbutov/Desktop/demo/flask-app 2",
    "preserved_logic_count": 28
  }
}