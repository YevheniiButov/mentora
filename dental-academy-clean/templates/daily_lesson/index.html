{% extends "base.html" %}

{% block title %}Daily Medical Terminology Lesson{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <!-- Header -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="h3 mb-1">Daily Medical Terminology Lesson</h1>
                    <p class="text-muted mb-0">Learn medical terms with spaced repetition</p>
                </div>
                <div class="text-end">
                    <div class="badge bg-primary fs-6">{{ total_terms_studied }}/{{ total_terms }} studied</div>
                    <div class="badge bg-success fs-6">{{ total_terms_mastered }} mastered</div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card bg-primary text-white">
                        <div class="card-body text-center">
                            <h4 class="card-title">{{ total_terms_studied }}</h4>
                            <p class="card-text">Terms Studied</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-success text-white">
                        <div class="card-body text-center">
                            <h4 class="card-title">{{ total_terms_mastered }}</h4>
                            <p class="card-text">Mastered</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-warning text-white">
                        <div class="card-body text-center">
                            <h4 class="card-title">{{ today_due }}</h4>
                            <p class="card-text">Due Today</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-info text-white">
                        <div class="card-body text-center">
                            <h4 class="card-title">{{ categories|length }}</h4>
                            <p class="card-text">Categories</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Categories Grid -->
            <div class="row">
                {% for category in categories %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <h5 class="card-title mb-0">{{ category.name.replace('_', ' ').title() }}</h5>
                                <span class="badge bg-secondary">{{ category.total }} terms</span>
                            </div>
                            
                            <!-- Progress Bar -->
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <small class="text-muted">Progress</small>
                                    <small class="text-muted">{{ category.progress_percent }}%</small>
                                </div>
                                <div class="progress" style="height: 8px;">
                                    <div class="progress-bar bg-primary" role="progressbar" 
                                         style="width: {{ category.progress_percent }}%"></div>
                                </div>
                            </div>

                            <!-- Stats -->
                            <div class="row text-center mb-3">
                                <div class="col-3">
                                    <div class="text-primary fw-bold">{{ category.new }}</div>
                                    <small class="text-muted">New</small>
                                </div>
                                <div class="col-3">
                                    <div class="text-warning fw-bold">{{ category.learning }}</div>
                                    <small class="text-muted">Learning</small>
                                </div>
                                <div class="col-3">
                                    <div class="text-success fw-bold">{{ category.mastered }}</div>
                                    <small class="text-muted">Mastered</small>
                                </div>
                                <div class="col-3">
                                    <div class="text-danger fw-bold">{{ category.due_today }}</div>
                                    <small class="text-muted">Due</small>
                                </div>
                            </div>

                            <!-- Action Button -->
                            <div class="d-grid">
                                <a href="{{ url_for('daily_lesson.start_lesson', category=category.name) }}" 
                                   class="btn btn-primary">
                                    Start Lesson
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Quick Actions -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Quick Actions</h5>
                            <div class="row">
                                <div class="col-md-3 mb-2">
                                    <a href="{{ url_for('daily_lesson.stats') }}" class="btn btn-outline-primary w-100">
                                        View Statistics
                                    </a>
                                </div>
                                <div class="col-md-3 mb-2">
                                    <a href="{{ url_for('flashcard.categories') }}" class="btn btn-outline-secondary w-100">
                                        Flashcard Categories
                                    </a>
                                </div>
                                <div class="col-md-3 mb-2">
                                    <a href="{{ url_for('flashcard.due_reviews') }}" class="btn btn-outline-warning w-100">
                                        Due Reviews
                                    </a>
                                </div>
                                <div class="col-md-3 mb-2">
                                    <a href="{{ url_for('dashboard.index') }}" class="btn btn-outline-info w-100">
                                        Back to Dashboard
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}





