{% extends "base.html" %}

{% block title %}{{ t('faq_title', lang) | default('FAQ') }} - Mentora{% endblock %}

{% block page_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/modern-theme.css') }}">
<style>
.faq-section {
    padding: 80px 0;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    min-height: 100vh;
}

.faq-header {
    text-align: center;
    margin-bottom: 4rem;
}

.faq-title {
    font-size: 3rem;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 1rem;
}

.faq-subtitle {
    font-size: 1.25rem;
    color: #64748b;
    max-width: 600px;
    margin: 0 auto;
}

.faq-container {
    max-width: 900px;
    margin: 0 auto;
}

.faq-category {
    margin-bottom: 3rem;
}

.category-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #3ECDC1;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.category-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #3ECDC1, #44A08D);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
}

.faq-accordion {
    background: white;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    overflow: hidden;
}

.faq-item {
    border-bottom: 1px solid #e2e8f0;
}

.faq-item:last-child {
    border-bottom: none;
}

.faq-question {
    background: none;
    border: none;
    width: 100%;
    padding: 1.5rem 2rem;
    text-align: left;
    font-size: 1.1rem;
    font-weight: 600;
    color: #1e293b;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all 0.3s ease;
}

.faq-question:hover {
    background: #f8fafc;
    color: #3ECDC1;
}

.faq-question.active {
    background: #f0fdfa;
    color: #3ECDC1;
}

.faq-icon {
    font-size: 1.25rem;
    transition: transform 0.3s ease;
}

.faq-question.active .faq-icon {
    transform: rotate(180deg);
}

.faq-answer {
    padding: 0 2rem;
    max-height: 0;
    overflow: hidden;
    transition: all 0.3s ease;
    background: #f8fafc;
}

.faq-answer.active {
    padding: 1.5rem 2rem;
    max-height: 500px;
}

.faq-answer p {
    margin-bottom: 1rem;
    color: #475569;
    line-height: 1.6;
}

.faq-answer p:last-child {
    margin-bottom: 0;
}

.faq-answer ul {
    margin: 1rem 0;
    padding-left: 1.5rem;
}

.faq-answer li {
    margin-bottom: 0.5rem;
    color: #475569;
}

.contact-cta {
    background: linear-gradient(135deg, #3ECDC1, #44A08D);
    color: white;
    padding: 3rem 2rem;
    border-radius: 20px;
    text-align: center;
    margin-top: 4rem;
}

.contact-cta h3 {
    font-size: 1.75rem;
    font-weight: 600;
    margin-bottom: 1rem;
}

.contact-cta p {
    font-size: 1.1rem;
    margin-bottom: 2rem;
    opacity: 0.9;
}

.contact-btn {
    background: white;
    color: #3ECDC1;
    border: none;
    padding: 1rem 2rem;
    border-radius: 50px;
    font-weight: 600;
    text-decoration: none;
    display: inline-block;
    transition: all 0.3s ease;
}

.contact-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    color: #3ECDC1;
}

@media (max-width: 768px) {
    .faq-title {
        font-size: 2rem;
    }
    
    .faq-question {
        padding: 1rem 1.5rem;
        font-size: 1rem;
    }
    
    .faq-answer.active {
        padding: 1rem 1.5rem;
    }
    
    .category-title {
        font-size: 1.25rem;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="faq-section">
    <div class="container">
        <div class="faq-header">
            <h1 class="faq-title">{{ t('faq_title', lang) | default('Frequently Asked Questions') }}</h1>
            <p class="faq-subtitle">
                {{ t('faq_subtitle', lang) | default('Find answers to the most common questions about our platform') }}
            </p>
        </div>

        <div class="faq-container">
            <!-- General Questions -->
            <div class="faq-category">
                <h2 class="category-title">
                    <div class="category-icon">
                        <i class="bi bi-question-circle"></i>
                    </div>
                    {{ t('faq_general', lang) | default('General Questions') }}
                </h2>
                
                <div class="faq-accordion">
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_what_is_mentora', lang) | default('What is Mentora?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_what_is_mentora_answer', lang) | default('Mentora is a comprehensive platform for medical education in the Netherlands. We provide structured learning paths, diagnostic testing, and preparation for the BIG exam for healthcare professionals.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_languages', lang) | default('What languages are supported?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_languages_answer', lang) | default('We support 8 languages: Dutch, English, Spanish, Portuguese, Ukrainian, Persian, Turkish, and Russian. You can change the language using the language selector in the top navigation.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_registration', lang) | default('How do I register?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_registration_answer', lang) | default('Click the "Register" button in the top navigation, fill in your details, and verify your email address. You can also register using DigiD if you have a Dutch social security number.') }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Diagnostic Testing -->
            <div class="faq-category">
                <h2 class="category-title">
                    <div class="category-icon">
                        <i class="bi bi-clipboard-check"></i>
                    </div>
                    {{ t('faq_diagnostic', lang) | default('Diagnostic Testing') }}
                </h2>
                
                <div class="faq-accordion">
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_what_is_diagnostic', lang) | default('What is a diagnostic test?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_what_is_diagnostic_answer', lang) | default('A diagnostic test is an adaptive assessment that evaluates your knowledge across different medical domains. It uses IRT (Item Response Theory) to provide accurate ability estimates and personalized learning recommendations.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_diagnostic_types', lang) | default('What types of diagnostic tests are available?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_diagnostic_types_answer', lang) | default('We offer several types: Express (quick assessment), Preliminary (3 questions per domain), Full (comprehensive), Readiness (6 questions per domain), and Comprehensive (most thorough). Each type provides different levels of detail.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_irt_system', lang) | default('How does the IRT system work?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_irt_system_answer', lang) | default('IRT (Item Response Theory) adapts questions based on your performance. If you answer correctly, questions become more difficult. If you answer incorrectly, they become easier. This provides a more accurate assessment of your abilities.') }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Learning System -->
            <div class="faq-category">
                <h2 class="category-title">
                    <div class="category-icon">
                        <i class="bi bi-book"></i>
                    </div>
                    {{ t('faq_learning', lang) | default('Learning System') }}
                </h2>
                
                <div class="faq-accordion">
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_learning_map', lang) | default('What is the Learning Map?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_learning_map_answer', lang) | default('The Learning Map is your personalized study guide. It shows your progress across different medical domains, recommends next steps, and helps you track your preparation for the BIG exam.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_domains', lang) | default('What are domains?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_domains_answer', lang) | default('Domains are different areas of medical knowledge, such as Pharmacology, Therapeutic Dentistry, Surgical Dentistry, Pediatric Dentistry, etc. Each domain has specific learning objectives and assessment criteria.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_virtual_patients', lang) | default('What are Virtual Patients?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_virtual_patients_answer', lang) | default('Virtual Patients are interactive clinical scenarios where you can practice diagnosis and treatment decisions in a safe environment. They help you develop clinical reasoning skills.') }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BIG Exam -->
            <div class="faq-category">
                <h2 class="category-title">
                    <div class="category-icon">
                        <i class="bi bi-award"></i>
                    </div>
                    {{ t('faq_big_exam', lang) | default('BIG Exam') }}
                </h2>
                
                <div class="faq-accordion">
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_what_is_big', lang) | default('What is the BIG exam?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_what_is_big_answer', lang) | default('The BIG exam is the official examination for healthcare professionals in the Netherlands. It assesses your knowledge and skills to ensure you can practice safely in the Dutch healthcare system.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_big_preparation', lang) | default('How should I prepare for the BIG exam?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_big_preparation_answer', lang) | default('Start with a diagnostic test to identify your strengths and weaknesses. Use the Learning Map to follow a structured study plan. Practice with virtual patients and take regular assessments to track your progress.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_big_documents', lang) | default('What documents do I need?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_big_documents_answer', lang) | default('You need your medical diploma, language certificates (Dutch/English), and proof of identity. Check the BIG website for the complete list of required documents for your specific profession.') }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technical Support -->
            <div class="faq-category">
                <h2 class="category-title">
                    <div class="category-icon">
                        <i class="bi bi-gear"></i>
                    </div>
                    {{ t('faq_technical', lang) | default('Technical Support') }}
                </h2>
                
                <div class="faq-accordion">
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_login_issues', lang) | default('I cannot log in. What should I do?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_login_issues_answer', lang) | default('Check your email and password. If you forgot your password, use the "Forgot Password" link. For DigiD users, ensure your DigiD session is active. Contact support if problems persist.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_mobile_issues', lang) | default('Does the platform work on mobile devices?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_mobile_issues_answer', lang) | default('Yes, our platform is fully responsive and works on smartphones and tablets. However, for the best experience with diagnostic tests, we recommend using a desktop or laptop computer.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_diagnostic_not_working', lang) | default('The diagnostic test is not working. What should I do?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_diagnostic_not_working_answer', lang) | default('Try refreshing the page or clearing your browser cache. Ensure you have a stable internet connection. If the problem persists, contact our technical support team.') }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Community -->
            <div class="faq-category">
                <h2 class="category-title">
                    <div class="category-icon">
                        <i class="bi bi-people"></i>
                    </div>
                    {{ t('faq_community', lang) | default('Community') }}
                </h2>
                
                <div class="faq-accordion">
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_forum_usage', lang) | default('How do I use the forum?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_forum_usage_answer', lang) | default('The forum is a place to discuss medical topics, ask questions, and share experiences. You can browse existing topics or create new ones. Please follow our community guidelines for respectful communication.') }}</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            {{ t('faq_forum_rules', lang) | default('What are the forum rules?') }}
                            <i class="bi bi-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-answer">
                            <p>{{ t('faq_forum_rules_answer', lang) | default('Be respectful, stay on topic, and provide helpful information. Do not share personal medical advice or spam. Moderators may remove inappropriate content.') }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact CTA -->
        <div class="contact-cta">
            <h3>{{ t('faq_need_help', lang) | default('Still need help?') }}</h3>
            <p>{{ t('faq_contact_us', lang) | default('If you cannot find the answer to your question, feel free to contact us.') }}</p>
            <a href="{{ url_for('main.contact', lang=lang) }}" class="contact-btn">
                {{ t('contact_us', lang) | default('Contact Us') }}
            </a>
        </div>
    </div>
</div>

<script>
function toggleFAQ(button) {
    const answer = button.nextElementSibling;
    const isActive = button.classList.contains('active');
    
    // Close all other FAQ items
    document.querySelectorAll('.faq-question').forEach(q => {
        q.classList.remove('active');
        q.nextElementSibling.classList.remove('active');
    });
    
    // Toggle current item
    if (!isActive) {
        button.classList.add('active');
        answer.classList.add('active');
    }
}

// Smooth scroll for anchor links
document.addEventListener('DOMContentLoaded', function() {
    // Add smooth scrolling to all links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});
</script>
{% endblock %}
