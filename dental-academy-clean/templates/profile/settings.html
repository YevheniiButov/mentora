{% extends "base.html" %}

{% block title %}{{ t('settings', lang) | default('–ù–∞—Å—Ç—Ä–æ–π–∫–∏') }} - Mentora{% endblock %}

{% block extra_css %}
<style>
    .settings-container {
        min-height: 80vh;
        padding: 2rem 0;
        margin-top: 60px; /* –û—Ç—Å—Ç—É–ø –ø–æ–¥ —à–∞–ø–∫—É */
    }
    
    .settings-header {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
        padding: 2rem 0;
        margin-bottom: 2rem;
        border-radius: 0 0 16px 16px;
        position: relative;
        overflow: hidden;
    }
    
    .settings-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="dots" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23dots)"/></svg>');
        opacity: 0.3;
    }
    
    .settings-header-content {
        position: relative;
        z-index: 1;
        text-align: center;
    }
    
    .settings-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        margin: 0 auto 1rem;
        border: 3px solid rgba(255, 255, 255, 0.3);
    }
    
    .settings-title {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .settings-subtitle {
        font-size: 1rem;
        opacity: 0.9;
        font-weight: 500;
    }
    
    .settings-content {
        max-width: 800px;
        margin: 0 auto;
    }
    
    .settings-section {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border: 1px solid #e2e8f0;
    }
    
    .section-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    
    .section-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        color: white;
    }
    
    .section-icon.language {
        background: linear-gradient(135deg, #667eea, #764ba2);
    }
    
    .section-icon.theme {
        background: linear-gradient(135deg, #f093fb, #f5576c);
    }
    
    .section-icon.notifications {
        background: linear-gradient(135deg, #4facfe, #00f2fe);
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
    
    .form-label {
        display: block;
        font-weight: 600;
        color: #4a5568;
        margin-bottom: 0.5rem;
        font-size: 1rem;
    }
    
    .form-control {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: #f8fafc;
    }
    
    .form-control:focus {
        outline: none;
        border-color: #667eea;
        background: white;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .form-select {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.5rem center;
        background-repeat: no-repeat;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
    }
    
    .btn-save {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 0.75rem 2rem;
        border-radius: 10px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .btn-save:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }
    
    .btn-back {
        background: #f1f5f9;
        color: #4a5568;
        border: 2px solid #e2e8f0;
        padding: 0.75rem 1.5rem;
        border-radius: 10px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        margin-right: 1rem;
    }
    
    .btn-back:hover {
        background: #e2e8f0;
        color: #2d3748;
        text-decoration: none;
    }
    
    .coming-soon-notice {
        background: linear-gradient(135deg, #fbbf24, #f59e0b);
        color: #92400e;
        padding: 1.5rem;
        border-radius: 12px;
        margin-bottom: 2rem;
        text-align: center;
        border: 1px solid #f59e0b;
    }
    
    .coming-soon-notice h3 {
        margin: 0 0 0.5rem 0;
        font-size: 1.2rem;
        font-weight: 600;
    }
    
    .coming-soon-notice p {
        margin: 0;
        opacity: 0.9;
    }
    
    .language-flag {
        width: 24px;
        height: 24px;
        border-radius: 4px;
        margin-right: 0.5rem;
        display: inline-block;
    }
    
    .theme-preview {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        border: 2px solid #e2e8f0;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .theme-preview:hover {
        transform: scale(1.1);
        border-color: #667eea;
    }
    
    .theme-preview.active {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
    }
    
    .theme-light {
        background: linear-gradient(135deg, #ffffff, #f8fafc);
    }
    
    .theme-dark {
        background: linear-gradient(135deg, #1a202c, #2d3748);
    }
    
    .theme-auto {
        background: linear-gradient(135deg, #ffffff 50%, #1a202c 50%);
    }
    
    @media (max-width: 768px) {
        .settings-container {
            margin-top: 50px; /* –ú–æ–±–∏–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –ø–æ–¥ —à–∞–ø–∫—É */
        }
        
        .settings-header {
            padding: 1.5rem 0;
        }
        
        .settings-icon {
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
        }
        
        .settings-title {
            font-size: 1.5rem;
        }
        
        .settings-section {
            padding: 1.5rem;
        }
        
        .section-title {
            font-size: 1.3rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="settings-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–±—Ä–∞–Ω –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    
    <div class="container">
        <div class="settings-content">
            <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —É–±—Ä–∞–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            
            <form method="POST" action="{{ url_for('profile.settings') }}">
                <!-- –Ø–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div class="settings-section">
                    <h2 class="section-title">
                        <div class="section-icon language">
                            <i class="fas fa-language"></i>
                        </div>
                        {{ t('language_settings', lang) | default('–Ø–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏') }}
                    </h2>
                    
                    <div class="form-group">
                        <label class="form-label">
                            {{ t('interface_language', lang) | default('–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞') }}
                        </label>
                        <select name="language" class="form-control form-select">
                            <option value="nl" {% if user.language == 'nl' %}selected{% endif %}>
                                üá≥üá± {{ t('dutch', lang) | default('Nederlands') }}
                            </option>
                            <option value="en" {% if user.language == 'en' %}selected{% endif %}>
                                üá¨üáß {{ t('english', lang) | default('English') }}
                            </option>
                            <option value="ru" {% if user.language == 'ru' %}selected{% endif %}>
                                üá∑üá∫ {{ t('russian', lang) | default('–†—É—Å—Å–∫–∏–π') }}
                            </option>
                            <option value="es" {% if user.language == 'es' %}selected{% endif %}>
                                üá™üá∏ {{ t('spanish', lang) | default('Espa√±ol') }}
                            </option>
                            <option value="pt" {% if user.language == 'pt' %}selected{% endif %}>
                                üáµüáπ {{ t('portuguese', lang) | default('Portugu√™s') }}
                            </option>
                            <option value="uk" {% if user.language == 'uk' %}selected{% endif %}>
                                üá∫üá¶ {{ t('ukrainian', lang) | default('–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞') }}
                            </option>
                            <option value="fa" {% if user.language == 'fa' %}selected{% endif %}>
                                üáÆüá∑ {{ t('persian', lang) | default('ŸÅÿßÿ±ÿ≥€å') }}
                            </option>
                            <option value="tr" {% if user.language == 'tr' %}selected{% endif %}>
                                üáπüá∑ {{ t('turkish', lang) | default('T√ºrk√ße') }}
                            </option>
                        </select>
                    </div>
                </div>
                
                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã -->
                <div class="settings-section">
                    <h2 class="section-title">
                        <div class="section-icon theme">
                            <i class="fas fa-palette"></i>
                        </div>
                        {{ t('theme_settings', lang) | default('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã') }}
                        <span class="coming-soon-badge" style="background: #fbbf24; color: #92400e; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-left: 0.5rem;">
                            {{ t('coming_soon', lang) | default('–°–∫–æ—Ä–æ') }}
                        </span>
                    </h2>
                    
                    <div class="form-group">
                        <label class="form-label">
                            {{ t('color_theme', lang) | default('–¶–≤–µ—Ç–æ–≤–∞—è —Ç–µ–º–∞') }}
                        </label>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="theme" value="light" {% if not user.theme or user.theme == 'light' %}checked{% endif %} style="display: none;">
                                <div class="theme-preview theme-light {% if not user.theme or user.theme == 'light' %}active{% endif %}"></div>
                                <span>{{ t('light_theme', lang) | default('–°–≤–µ—Ç–ª–∞—è') }}</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="theme" value="dark" {% if user.theme == 'dark' %}checked{% endif %} style="display: none;">
                                <div class="theme-preview theme-dark {% if user.theme == 'dark' %}active{% endif %}"></div>
                                <span>{{ t('dark_theme', lang) | default('–¢–µ–º–Ω–∞—è') }}</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="theme" value="auto" {% if user.theme == 'auto' %}checked{% endif %} style="display: none;">
                                <div class="theme-preview theme-auto {% if user.theme == 'auto' %}active{% endif %}"></div>
                                <span>{{ t('auto_theme', lang) | default('–ê–≤—Ç–æ') }}</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
                <div class="settings-section">
                    <h2 class="section-title">
                        <div class="section-icon notifications">
                            <i class="fas fa-bell"></i>
                        </div>
                        {{ t('notification_settings', lang) | default('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π') }}
                    </h2>
                    
                    <div class="form-group">
                        <label class="form-label">
                            {{ t('email_notifications', lang) | default('Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è') }}
                        </label>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="email_notifications" value="all" checked style="display: none;">
                                <div style="width: 20px; height: 20px; border: 2px solid #e2e8f0; border-radius: 50%; position: relative;">
                                    <div style="width: 10px; height: 10px; background: #667eea; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"></div>
                                </div>
                                <span>{{ t('all_notifications', lang) | default('–í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è') }}</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="email_notifications" value="important" style="display: none;">
                                <div style="width: 20px; height: 20px; border: 2px solid #e2e8f0; border-radius: 50%;"></div>
                                <span>{{ t('important_only', lang) | default('–¢–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ') }}</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="radio" name="email_notifications" value="none" style="display: none;">
                                <div style="width: 20px; height: 20px; border: 2px solid #e2e8f0; border-radius: 50%;"></div>
                                <span>{{ t('no_notifications', lang) | default('–û—Ç–∫–ª—é—á–∏—Ç—å') }}</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="settings-section">
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <a href="{{ url_for('profile.profile') }}" class="btn-back">
                            <i class="fas fa-arrow-left"></i>
                            {{ t('back_to_profile', lang) | default('–ù–∞–∑–∞–¥ –∫ –ø—Ä–æ—Ñ–∏–ª—é') }}
                        </a>
                        <button type="submit" class="btn-save">
                            <i class="fas fa-save"></i>
                            {{ t('save_settings', lang) | default('–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏') }}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã
    const themeInputs = document.querySelectorAll('input[name="theme"]');
    const themePreviews = document.querySelectorAll('.theme-preview');
    
    themeInputs.forEach((input, index) => {
        input.addEventListener('change', function() {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –ø—Ä–µ–≤—å—é
            themePreviews.forEach(preview => preview.classList.remove('active'));
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É
            themePreviews[index].classList.add('active');
        });
    });
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –ø—Ä–µ–≤—å—é —Ç–µ–º—ã
    themePreviews.forEach((preview, index) => {
        preview.addEventListener('click', function() {
            themeInputs[index].checked = true;
            themeInputs[index].dispatchEvent(new Event('change'));
        });
    });
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    const notificationInputs = document.querySelectorAll('input[name="email_notifications"]');
    const notificationRadios = document.querySelectorAll('input[name="email_notifications"] + div');
    
    notificationInputs.forEach((input, index) => {
        input.addEventListener('change', function() {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫
            notificationRadios.forEach(radio => {
                radio.style.background = 'transparent';
                radio.style.borderColor = '#e2e8f0';
            });
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É
            if (input.checked) {
                notificationRadios[index].style.background = '#667eea';
                notificationRadios[index].style.borderColor = '#667eea';
            }
        });
    });
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∞–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    notificationRadios.forEach((radio, index) => {
        radio.addEventListener('click', function() {
            notificationInputs[index].checked = true;
            notificationInputs[index].dispatchEvent(new Event('change'));
        });
    });
});
</script>
{% endblock %}
