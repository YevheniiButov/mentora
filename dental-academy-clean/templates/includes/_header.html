{% from "includes/_macros.html" import language_url %}

<header class="modern-header" x-data="headerNav()">
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <!-- Logo -->
      <a class="navbar-brand" href="/{{ lang }}/">
        <div class="logo-container">
          <img class="logo logo-light" src="{{ url_for('static', filename='images/logo.png') }}" alt="Mentora Light" height="40">
          <img class="logo logo-dark" src="{{ url_for('static', filename='images/logo_black.png') }}" alt="Mentora Dark" height="40">
        </div>
      </a>
      
      <!-- Mobile Toggle -->
      <button class="navbar-toggler" 
              type="button" 
              @click="toggleMobileMenu()"
              :aria-expanded="mobileMenuOpen"
              aria-label="Toggle navigation">
        <span class="hamburger-line" :class="{ 'active': mobileMenuOpen }"></span>
        <span class="hamburger-line" :class="{ 'active': mobileMenuOpen }"></span>
        <span class="hamburger-line" :class="{ 'active': mobileMenuOpen }"></span>
      </button>
      
      <!-- Navigation -->
      <div class="navbar-collapse" 
           id="navbarMain"
           :class="{ 'show': (isDesktop || mobileMenuOpen) }"
           x-show="isDesktop || mobileMenuOpen"
           x-cloak
           x-init="console.log('Navbar collapse initialized, isDesktop:', isDesktop, 'mobileMenuOpen:', mobileMenuOpen); $el.style.display = (isDesktop || mobileMenuOpen) ? 'flex' : 'none';"
           :style="(isDesktop || mobileMenuOpen) ? 'display: flex !important; visibility: visible !important; opacity: 1 !important;' : 'display: none !important; visibility: hidden !important; opacity: 0 !important;'"
           x-transition:enter="transition ease-out duration-200"
           x-transition:enter-start="opacity-0 transform -translate-y-2"
           x-transition:enter-end="opacity-100 transform translate-y-0"
           x-transition:leave="transition ease-in duration-150"
           x-transition:leave-start="opacity-100 transform translate-y-0"
           x-transition:leave-end="opacity-0 transform -translate-y-2"
           @click.away="if (!isDesktop) { mobileMenuOpen = false; console.log('Menu closed by click away'); }">
        <ul class="navbar-nav me-auto">
          <!-- Hoofdpagina - –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞ -->
          <li class="nav-item">
            <a class="nav-link {{ 'active' if request.endpoint and request.endpoint == 'main.index' }}" 
               href="/{{ lang }}/"
               @click="closeMobileMenu()">
              {{ t('home', lang)|default('Home') }}
            </a>
          </li>
          
          <!-- Learning Map - —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ -->
          {% if current_user.is_authenticated %}
          <li class="nav-item">
            <a class="nav-link {{ 'active' if request.endpoint and (request.endpoint == 'learning_map_bp.learning_map' or request.endpoint.startswith('profession_map_bp')) }}" 
               href="/{{ lang|default('en') }}/learning-map"
               @click="closeMobileMenu()">
              {{ t('learning_map', lang|default('en'))|default('Learning Map') }}
            </a>
          </li>
          <!-- Knowledge Base —Å–∫—Ä—ã—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
          <!-- <li class="nav-item">
            <a class="nav-link {{ 'active' if request.endpoint and request.endpoint == 'daily_learning.knowledge_base' }}" 
               href="/{{ lang|default('en') }}/knowledge-base"
               @click="closeMobileMenu()">
              {{ t('knowledge_base', lang|default('en'))|default('Knowledge Base') }}
            </a>
          </li> -->
          {% endif %}

          <!-- Community - –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞ -->
          <li class="nav-item">
            <a class="nav-link {{ 'active' if request.endpoint and request.endpoint == 'main.community' }}" 
               href="/{{ lang|default('en') }}/community"
               @click="closeMobileMenu()">
              {{ t('community', lang|default('en'))|default('Community') }}
            </a>
          </li>
          
          <!-- Over BIG - –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞ -->
          <li class="nav-item">
            <a class="nav-link" 
               href="/{{ lang|default('en') }}/big-info"
               @click="closeMobileMenu()">
              {{ t('about_big', lang|default('en'))|default('About BIG') }}
            </a>
          </li>
        </ul>
        
        <!-- Right Side Actions -->
        <div class="navbar-actions d-flex align-items-center">
          <!-- Language Dropdown -->
          <div class="dropdown me-3 language-dropdown" 
               x-data="{ open: false }"
               x-init="console.log('Language dropdown initialized, open:', open)"
               @click.away="open = false"
               style="position: relative; z-index: 9999;">
            <button class="btn language-btn-modern" 
                    type="button" 
                    @click.stop.prevent="open = !open; console.log('Language dropdown clicked, open:', open); setTimeout(() => { const menu = document.querySelector('.language-menu'); console.log('Menu element:', menu); console.log('Menu style:', menu ? menu.style.cssText : 'not found'); console.log('Menu computed display:', menu ? window.getComputedStyle(menu).display : 'not found'); }, 100);"
                    :aria-expanded="open"
                    style="pointer-events: auto !important; cursor: pointer !important;"
                    title="{{ t('language', lang)|default('–Ø–∑—ã–∫') }}: {{ lang|upper }}">
              <span class="language-icon"><i class="bi bi-globe2"></i></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end language-menu" 
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 transform scale-95 -translate-y-2"
                x-transition:enter-end="opacity-100 transform scale-100 translate-y-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 transform scale-100 translate-y-0"
                x-transition:leave-end="opacity-0 transform scale-95 -translate-y-2"
                style="z-index: 10000 !important; position: absolute !important; top: calc(100% + 0.5rem) !important; right: 0 !important; display: none !important;"
                :style="open ? 'display: block !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;' : 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;'"
                x-cloak
                @click.stop="open = false">
              <li><a class="dropdown-item {% if lang == 'nl' %}active{% endif %}" 
                     href="{{ language_url('nl') }}"
                     onclick="console.log('üåê Language click: Nederlands, URL:', this.href);">
                <span class="fi fi-nl me-2"></span> Nederlands{% if lang == 'nl' %} <i class="bi bi-check-lg ms-1"></i>{% endif %}
              </a></li>
              <li><a class="dropdown-item {% if lang == 'en' %}active{% endif %}" 
                     href="{{ language_url('en') }}"
                     onclick="">
                <span class="fi fi-gb me-2"></span> English{% if lang == 'en' %} <i class="bi bi-check-lg ms-1"></i>{% endif %}
              </a></li>
              <li><a class="dropdown-item {% if lang == 'es' %}active{% endif %}" 
                     href="{{ language_url('es') }}"
                     onclick="">
                <span class="fi fi-es me-2"></span> Espa√±ol{% if lang == 'es' %} <i class="bi bi-check-lg ms-1"></i>{% endif %}
              </a></li>
              <li><a class="dropdown-item {% if lang == 'pt' %}active{% endif %}" 
                     href="{{ language_url('pt') }}"
                     onclick="">
                <span class="fi fi-pt me-2"></span> Portugu√™s{% if lang == 'pt' %} <i class="bi bi-check-lg ms-1"></i>{% endif %}
              </a></li>
              <li><a class="dropdown-item {% if lang == 'uk' %}active{% endif %}" 
                     href="{{ language_url('uk') }}"
                     onclick="">
                <span class="fi fi-ua me-2"></span> –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞{% if lang == 'uk' %} <i class="bi bi-check-lg ms-1"></i>{% endif %}
              </a></li>
              <li><a class="dropdown-item {% if lang == 'fa' %}active{% endif %}" 
                     href="{{ language_url('fa') }}"
                     onclick="">
                <span class="fi fi-ir me-2"></span> ŸÅÿßÿ±ÿ≥€å{% if lang == 'fa' %} <i class="bi bi-check-lg ms-1"></i>{% endif %}
              </a></li>
              <li><a class="dropdown-item {% if lang == 'ar' %}active{% endif %}" 
                     href="{{ language_url('ar') }}"
                     onclick="">
                <span class="fi fi-sa me-2"></span> ÿßŸÑÿπÿ±ÿ®Ÿäÿ©{% if lang == 'ar' %} <i class="bi bi-check-lg ms-1"></i>{% endif %}
              </a></li>
              <li><a class="dropdown-item {% if lang == 'tr' %}active{% endif %}" 
                     href="{{ language_url('tr') }}"
                     onclick="">
                <span class="fi fi-tr me-2"></span> T√ºrk√ße{% if lang == 'tr' %} <i class="bi bi-check-lg ms-1"></i>{% endif %}
              </a></li>
              <li><a class="dropdown-item {% if lang == 'ru' %}active{% endif %}" 
                     href="{{ language_url('ru') }}"
                     onclick="">
                <span class="fi fi-ru me-2"></span> –†—É—Å—Å–∫–∏–π{% if lang == 'ru' %} <i class="bi bi-check-lg ms-1"></i>{% endif %}
              </a></li>
            </ul>
          </div>
          
          {% if current_user.is_authenticated %}
          <!-- User Menu with Everything Inside -->
          <div class="dropdown" 
               x-data="{ open: false }"
               x-init="console.log('User dropdown initialized, open:', open)"
               @click.away="open = false"
               style="position: relative; z-index: 1002;">
            <button class="btn user-btn-modern" 
                    type="button" 
                    @click.stop.prevent="open = !open; console.log('User dropdown clicked, open:', open); setTimeout(() => { const menu = document.querySelector('.user-dropdown'); console.log('Menu element:', menu); console.log('Menu style:', menu ? menu.style.cssText : 'not found'); console.log('Menu computed display:', menu ? window.getComputedStyle(menu).display : 'not found'); }, 100);"
                    :aria-expanded="open"
                    title="{{ current_user.get_display_name() }}">
              <span class="user-icon"><i class="bi bi-person-circle"></i></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end user-dropdown" 
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 transform scale-95 -translate-y-2"
                x-transition:enter-end="opacity-100 transform scale-100 translate-y-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 transform scale-100 translate-y-0"
                x-transition:leave-end="opacity-0 transform scale-95 -translate-y-2"
                style="position: absolute !important; top: calc(100% + 0.5rem) !important; right: 0 !important; display: none !important;"
                :style="open ? 'display: block !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;' : 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;'"
                x-cloak
                @click.stop="open = false">
              <!-- User Info Header -->
              <li class="dropdown-header">
                <i class="bi bi-person-badge fs-5 me-1"></i> <strong>Dr. {{ current_user.get_display_name() }}</strong>
                <br>
                <small class="text-muted">
                  {% if current_user.profession == 'tandarts' %}
                    {{ t('dentist', lang)|default('Dentist') }}
                  {% elif current_user.profession == 'huisarts' %}
                    {{ t('general_practitioner', lang)|default('General Practitioner') }}
                  {% else %}
                    {{ t('medical_professional', lang)|default('Medical Professional') }}
                  {% endif %}
                </small>
              </li>
              
              <li><hr class="dropdown-divider"></li>
              
              <!-- Profile -->
              <li><a class="dropdown-item" href="/{{ lang }}/profile">
                <i class="bi bi-person-gear fs-5 me-2"></i>
                {{ t('edit_profile', lang)|default('Edit profile') }}
              </a></li>
              

              
              <li><hr class="dropdown-divider"></li>
              
              <!-- Logout -->
              {% if current_user.is_digid_user() %}
              <li><a class="dropdown-item text-danger" href="/digid/logout">
                <i class="bi bi-box-arrow-right fs-5 me-2"></i> DigiD 
                {{ t('logout', lang)|default('Logout') }}
              </a></li>
              {% else %}
              <li><a class="dropdown-item text-danger" href="/auth/{{ lang }}/logout">
                <i class="bi bi-box-arrow-right fs-5 me-2"></i>
                {{ t('logout', lang)|default('Logout') }}
              </a></li>
              {% endif %}
            </ul>
          </div>
          {% else %}
          <!-- Settings Menu for Guests -->
          <div class="dropdown" 
               x-data="{ open: false }"
               x-init="console.log('Settings dropdown initialized, open:', open)"
               @click.away="open = false"
               style="position: relative; z-index: 1002;">
            <button class="btn user-btn-modern" 
                    type="button" 
                    @click.stop.prevent="open = !open; console.log('Settings dropdown clicked, open:', open)"
                    :aria-expanded="open"
                    title="{{ t('settings', lang)|default('Settings') }}">
              <span class="settings-icon"><i class="bi bi-gear-fill"></i></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end user-dropdown" 
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 transform scale-95 -translate-y-2"
                x-transition:enter-end="opacity-100 transform scale-100 translate-y-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 transform scale-100 translate-y-0"
                x-transition:leave-end="opacity-0 transform scale-95 -translate-y-2"
                style="position: absolute !important; top: calc(100% + 0.5rem) !important; right: 0 !important; display: none !important;"
                :style="open ? 'display: block !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;' : 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;'"
                x-cloak
                @click.stop="open = false">

              
              <li><hr class="dropdown-divider"></li>
              
              <!-- Login -->
              <li><a class="dropdown-item" href="/{{ lang }}/auth/login">
                <i class="bi bi-box-arrow-in-right fs-5 me-2"></i>
                {{ t('login', lang)|default('Login') }}
              </a></li>
              <!-- Register -->
              <li><a class="dropdown-item" href="/{{ lang }}/auth/register">
                <i class="bi bi-person-plus fs-5 me-2"></i>
                {{ t('register', lang)|default('Register') }}
              </a></li>
            </ul>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
/* ===== –†–ê–î–ò–ö–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –®–ê–ü–ö–ò - –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ô –ü–†–ò–û–†–ò–¢–ï–¢ ===== */

/* –ü–û–õ–ù–û–ï –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï BOOTSTRAP –°–¢–ò–õ–ï–ô */
header.modern-header {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  height: 70px !important;
  min-height: 70px !important;
  max-height: 70px !important;
  z-index: 1000 !important;
  background: rgba(255, 255, 255, 0.95) !important;
  backdrop-filter: blur(10px) !important;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;
  display: flex !important;
  align-items: center !important;
  padding: 0 !important;
  margin: 0 !important;
  overflow: visible !important;
  transition: all 0.3s ease !important;
}

/* Dark theme –¥–ª—è —à–∞–ø–∫–∏ - –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è */
html[data-theme="dark"] header.modern-header,
[data-theme="dark"] header.modern-header {
  background: rgba(42, 58, 79, 0.95) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3) !important;
}

/* Dark theme –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é */
[data-theme="dark"] header.modern-header .navbar-collapse {
  background: rgba(15, 23, 42, 0.98) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4) !important;
}

[data-theme="dark"] header.modern-header .navbar-toggler span {
  background: rgba(248, 250, 252, 0.9) !important;
}

header.modern-header nav.navbar {
  width: 100% !important;
  height: 100% !important;
  min-height: 100% !important;
  max-height: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-wrap: nowrap !important;
}

header.modern-header nav.navbar .container {
  width: 100% !important;
  max-width: 1200px !important;
  height: 100% !important;
  min-height: 100% !important;
  max-height: 100% !important;
  margin: 0 auto !important;
  padding: 0 1.5rem !important;
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  flex-wrap: nowrap !important;
  flex-direction: row !important;
}

header.modern-header .navbar-brand {
  display: flex !important;
  align-items: center !important;
  height: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
  flex-shrink: 0 !important;
  order: 1 !important;
  background: transparent !important;
  background-color: transparent !important;
  background-image: none !important;
}

header.modern-header .navbar-brand .logo-container {
  background: transparent !important;
  background-color: transparent !important;
  background-image: none !important;
  display: flex !important;
  align-items: center !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  box-shadow: none !important;
}

header.modern-header .navbar-brand img,
header.modern-header .navbar-brand .logo-container img,
header.modern-header .navbar-brand .logo-container .logo {
  height: 40px !important;
  width: auto !important;
  max-height: 40px !important;
  object-fit: contain !important;
  background: transparent !important;
  background-color: transparent !important;
  background-image: none !important;
  border: none !important;
  box-shadow: none !important;
}


header.modern-header .navbar-collapse {
  /* display —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Alpine.js x-show –∏ :style */
  /* display: flex !important; */
  align-items: center !important;
  justify-content: space-between !important;
  flex: 1 !important;
  height: 100% !important;
  margin: 0 1rem !important;
  flex-wrap: nowrap !important;
  flex-direction: row !important;
  order: 2 !important;
}

header.modern-header .navbar-nav {
  display: flex !important;
  align-items: center !important;
  flex-direction: row !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  list-style: none !important;
  flex-wrap: nowrap !important;
  gap: 0.5rem !important;
}

header.modern-header .navbar-nav .nav-item {
  display: flex !important;
  align-items: center !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
}

header.modern-header .navbar-nav .nav-link {
  display: flex !important;
  align-items: center !important;
  height: auto !important;
  padding: 0.5rem 1rem !important;
  margin: 0 !important;
  color: #333 !important;
  text-decoration: none !important;
  border-radius: 8px !important;
  transition: all 0.3s ease !important;
  white-space: nowrap !important;
  flex-shrink: 0 !important;
}

header.modern-header .navbar-actions {
  display: flex !important;
  align-items: center !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  gap: 0.5rem !important;
  flex-wrap: nowrap !important;
  flex-direction: row !important;
  flex-shrink: 0 !important;
}

header.modern-header .dropdown,
header.modern-header .btn,
header.modern-header .dropdown-toggle {
  display: flex !important;
  align-items: center !important;
  height: auto !important;
  padding: 0.5rem 1rem !important;
  margin: 0 !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
  border-radius: 8px !important;
  background: rgba(255, 255, 255, 0.8) !important;
  color: #333 !important;
  text-decoration: none !important;
  transition: all 0.3s ease !important;
  white-space: nowrap !important;
  flex-shrink: 0 !important;
}

header.modern-header .navbar-toggler {
  display: none !important;
  order: 3 !important;
}



/* –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */
@media (max-width: 992px) {
  header.modern-header {
    height: 60px !important;
    min-height: 60px !important;
    max-height: 60px !important;
  }
  
  header.modern-header .navbar-brand img {
    height: 32px !important;
    max-height: 32px !important;
  }
  
  header.modern-header .navbar-toggler {
    display: block !important;
    border: none !important;
    background: none !important;
    padding: 0.25rem !important;
    margin-left: auto !important;
  }
  
  header.modern-header .navbar-collapse {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    right: 0 !important;
    background: rgba(255, 255, 255, 0.98) !important;
    backdrop-filter: blur(20px) !important;
    border-radius: 0 0 16px 16px !important;
    padding: 1rem !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
    flex-direction: column !important;
    align-items: stretch !important;
    height: auto !important;
    z-index: 1001 !important;
    /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  /* Alpine.js —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ x-show –∏ :style */
  header.modern-header .navbar-collapse.show {
    /* display —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Alpine.js x-show –∏ :style */
    /* display: flex !important; */
  }
  
  header.modern-header .navbar-nav {
    flex-direction: column !important;
    width: 100% !important;
    height: auto !important;
    gap: 0.5rem !important;
  }
  
  header.modern-header .navbar-actions {
    flex-direction: column !important;
    width: 100% !important;
    height: auto !important;
    margin-top: 1rem !important;
    padding-top: 1rem !important;
    border-top: 1px solid rgba(0, 0, 0, 0.1) !important;
  }
}

/* –ü–õ–ê–ù–®–ï–¢–´ (768px - 1024px) - –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ü–†–ê–í–ò–õ–ê */
@media (min-width: 768px) and (max-width: 1024px) {
  header.modern-header {
    height: 65px !important;
  }
  
  header.modern-header .navbar-brand img {
    height: 36px !important;
  }
  
  /* –ù–ê –ü–õ–ê–ù–®–ï–¢–ê–• –ù–ê–í–ò–ì–ê–¶–ò–Ø –û–°–¢–ê–ï–¢–°–Ø –ì–û–†–ò–ó–û–ù–¢–ê–õ–¨–ù–û–ô */
  header.modern-header .navbar-collapse {
    position: static !important;
    /* display —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Alpine.js x-show –∏ :style */
    /* display: flex !important; */
    flex-direction: row !important;
    background: transparent !important;
    backdrop-filter: none !important;
    border-radius: 0 !important;
    padding: 0 !important;
    box-shadow: none !important;
    height: 100% !important;
    z-index: auto !important;
  }
  
  header.modern-header .navbar-nav {
    flex-direction: row !important;
    height: 100% !important;
    gap: 0.25rem !important;
  }
  
  header.modern-header .navbar-actions {
    flex-direction: row !important;
    height: 100% !important;
    margin-top: 0 !important;
    padding-top: 0 !important;
    border-top: none !important;
    gap: 0.25rem !important;
  }
  
  /* –°–ö–†–´–í–ê–ï–ú –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –ù–ê –ü–õ–ê–ù–®–ï–¢–ê–• */
  header.modern-header .navbar-toggler {
    display: none !important;
  }
  
  /* –£–ú–ï–ù–¨–®–ê–ï–ú –†–ê–ó–ú–ï–†–´ –≠–õ–ï–ú–ï–ù–¢–û–í */
  header.modern-header .nav-link,
  header.modern-header .dropdown-toggle,
  header.modern-header .btn {
    padding: 0.4rem 0.8rem !important;
    font-size: 0.9rem !important;
  }
}

/* –¢–û–õ–¨–ö–û –¢–ï–õ–ï–§–û–ù–´ (–¥–æ 768px) */
@media (max-width: 767px) {
  header.modern-header {
    height: 60px !important;
  }
  
  header.modern-header .navbar-brand img {
    height: 32px !important;
  }
  
  header.modern-header .navbar-toggler {
    display: block !important;
  }
  
  header.modern-header .navbar-collapse {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    right: 0 !important;
    background: rgba(255, 255, 255, 0.98) !important;
    backdrop-filter: blur(20px) !important;
    border-radius: 0 0 16px 16px !important;
    padding: 1rem !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
    flex-direction: column !important;
    align-items: stretch !important;
    height: auto !important;
    z-index: 1001 !important;
    /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  /* Alpine.js —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ x-show –∏ :style */
  header.modern-header .navbar-collapse.show {
    /* display —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Alpine.js x-show –∏ :style */
    /* display: flex !important; */
  }
}

/* ===== –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –°–¢–ò–õ–ò –®–ê–ü–ö–ò ===== */

/* –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */


.modern-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border-bottom: 1px solid var(--border-color);
  transition: all var(--transition-slow);
  box-shadow: var(--shadow-sm);
  height: var(--header-height);
  display: flex;
  align-items: center;
}

.modern-header.scrolled {
  background: var(--glass-hover);
  box-shadow: var(--shadow-lg);
}

.modern-header.hidden {
  transform: translateY(-100%);
}

.navbar {
  padding: 0;
  height: 100%;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.navbar .container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1.5rem;
  height: 100%;
  flex-wrap: nowrap;
}

.navbar-brand {
  font-weight: 800;
  font-size: 1.5rem;
  transition: transform var(--transition-normal);
  text-decoration: none;
  display: flex;
  align-items: center;
  height: 100%;
}

.navbar-brand:hover {
  transform: scale(1.05);
}

.navbar-brand img {
  transition: all var(--transition-normal);
  height: 40px;
  width: auto;
}

.navbar-brand:hover img {
  filter: brightness(1.1);
}

/* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
.navbar-collapse {
  /* display —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Alpine.js x-show –∏ :style */
  /* display: flex; */
  justify-content: space-between;
  align-items: center;
  flex: 1;
  height: 100%;
  flex-wrap: nowrap;
}

.navbar-nav {
  display: flex;
  align-items: center;
  margin: 0;
  padding: 0;
  list-style: none;
  height: 100%;
  flex-wrap: nowrap;
}

.navbar-nav .nav-item {
  display: flex;
  align-items: center;
  height: 100%;
}

.navbar-actions {
  display: flex;
  align-items: center;
  margin-left: auto;
  height: 100%;
  flex-wrap: nowrap;
  gap: 0.5rem;
}

/* Hamburger Menu */
.navbar-toggler {
  border: none;
  padding: 0.5rem;
  background: var(--glass-bg);
  border-radius: var(--radius-md);
  width: 40px;
  height: 40px;
  position: relative;
  transition: all var(--transition-normal);
  display: none;
}

.navbar-toggler:focus {
  box-shadow: none;
}

.navbar-toggler span {
  display: block;
  width: 20px;
  height: 2px;
  background: var(--text-primary);
  margin: 4px auto;
  transition: all var(--transition-normal);
  border-radius: 1px;
}

/* –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ hamburger –¥–ª—è Alpine.js */
.navbar-toggler span.hamburger-line.active:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}

.navbar-toggler span.hamburger-line.active:nth-child(2) {
  opacity: 0;
}

.navbar-toggler span.hamburger-line.active:nth-child(3) {
  transform: rotate(-45deg) translate(7px, -6px);
}

/* –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º Bootstrap –∫–ª–∞—Å—Å–æ–º */
.navbar-toggler:not(.collapsed) span:nth-child(1),
.navbar-toggler[aria-expanded="true"] span:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}

.navbar-toggler:not(.collapsed) span:nth-child(2),
.navbar-toggler[aria-expanded="true"] span:nth-child(2) {
  opacity: 0;
}

.navbar-toggler:not(.collapsed) span:nth-child(3),
.navbar-toggler[aria-expanded="true"] span:nth-child(3) {
  transform: rotate(-45deg) translate(7px, -6px);
}

/* Navigation Links */
.nav-link {
  color: var(--text-secondary) !important;
  font-weight: 500;
  padding: 0.5rem 1rem !important;
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
  position: relative;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  height: 100%;
  white-space: nowrap;
}

/* –£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ */
[data-theme="dark"] header.modern-header .nav-link,
[data-theme="dark"] .nav-link {
  color: rgba(248, 250, 252, 0.9) !important;
}

[data-theme="dark"] header.modern-header .nav-link:hover,
[data-theme="dark"] .nav-link:hover {
  color: #3ECDC1 !important;
  background: rgba(255, 255, 255, 0.05) !important;
}

[data-theme="dark"] header.modern-header .nav-link.active,
[data-theme="dark"] .nav-link.active {
  color: #3ECDC1 !important;
  background: rgba(62, 205, 193, 0.1) !important;
}

/* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —à–∞–ø–∫–µ */
[data-theme="dark"] header.modern-header .btn,
[data-theme="dark"] header.modern-header .dropdown-toggle,
[data-theme="dark"] header.modern-header .language-btn-modern {
  color: rgba(248, 250, 252, 0.9) !important;
  border-color: rgba(255, 255, 255, 0.2) !important;
}

[data-theme="dark"] header.modern-header .dropdown-menu {
  background: rgba(30, 41, 59, 0.95) !important;
  border-color: rgba(255, 255, 255, 0.1) !important;
  color: rgba(248, 250, 252, 0.9) !important;
}

[data-theme="dark"] header.modern-header .dropdown-item {
  color: rgba(248, 250, 252, 0.9) !important;
}

[data-theme="dark"] header.modern-header .dropdown-item:hover {
  background: rgba(62, 205, 193, 0.1) !important;
  color: #3ECDC1 !important;
}

.nav-link::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  transform: translateX(-50%);
  transition: width var(--transition-normal);
}

.nav-link:hover::before {
  width: 80%;
}

.nav-link:hover {
  color: var(--primary-color) !important;
  background: var(--glass-bg);
  transform: translateY(-2px);
}

.nav-link.active {
  color: var(--primary-color) !important;
  background: var(--glass-bg);
  box-shadow: var(--shadow-sm);
}

.nav-link.active::before {
  width: 80%;
}

/* Dropdown Styles */
.dropdown-toggle,
.btn {
  border-radius: var(--radius-md) !important;
  transition: all var(--transition-normal);
  border: 1px solid var(--border-color) !important;
  display: flex;
  align-items: center;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.8);
  color: var(--text-primary);
  text-decoration: none;
  height: auto;
  white-space: nowrap;
  flex-shrink: 0;
  cursor: pointer;
  pointer-events: auto !important;
  z-index: 1001;
  position: relative;
}

.dropdown-toggle:hover,
.btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
  background: rgba(255, 255, 255, 1);
}

/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è dropdown-menu - Alpine.js —É–ø—Ä–∞–≤–ª—è–µ—Ç display —á–µ—Ä–µ–∑ x-show */
.dropdown-menu {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  backdrop-filter: var(--glass-blur);
  padding: 0.5rem;
  margin-top: 0.5rem;
  animation: dropdownSlide 0.3s ease;
  min-width: 220px;
  z-index: 1050 !important;
  position: absolute !important;
  max-height: 70vh !important;
  overflow-y: auto !important;
  /* –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º display –∑–¥–µ—Å—å - Alpine.js —É–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ x-show */
}

/* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º Bootstrap display –¥–ª—è Alpine.js dropdown */
/* –ò—Å–ø–æ–ª—å–∑—É–µ–º :style –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è display, —Ç–∞–∫ –∫–∞–∫ Bootstrap –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å x-show */

/* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–≥–¥–∞ :style —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç display: block */
.dropdown[x-data] .dropdown-menu[style*="display: block"] {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* –°–∫—Ä—ã–≤–∞–µ–º –∫–æ–≥–¥–∞ :style —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç display: none */
.dropdown[x-data] .dropdown-menu[style*="display: none"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}



/* –ì–†–ê–î–ò–ï–ù–¢–ù–ê–Ø –¢–ï–ú–ê - –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–õ–Ø DROPDOWN */
[data-theme="gradient"] .dropdown-menu {
  background: rgba(0, 0, 0, 0.8) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(25px) !important;
  color: #ffffff !important;
}

[data-theme="gradient"] .dropdown-item {
  color: #ffffff !important;
}

[data-theme="gradient"] .dropdown-item:hover {
  background: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
}

/* –î–£–ë–õ–ò–†–£–Æ–©–ò–ï–°–Ø –°–¢–ò–õ–ò –£–î–ê–õ–ï–ù–´ - –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø –°–¢–ò–õ–ò –ù–ò–ñ–ï */

/* –ú–û–ë–ò–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–õ–Ø –ü–û–ó–ò–¶–ò–û–ù–ò–†–û–í–ê–ù–ò–Ø */
@media (max-width: 767px) {
  .dropdown-menu {
    position: static !important;
    width: 100% !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    margin-top: 0.5rem !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    border: none !important;
    box-shadow: none !important;
    max-height: none !important;
    overflow-y: visible !important;
    transform: none !important;
    max-width: 100% !important;
    min-width: auto !important;
  }
  
  .language-menu {
    position: static !important;
    width: 100% !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    margin-top: 0.5rem !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    border: none !important;
    box-shadow: none !important;
    transform: none !important;
    max-width: 100% !important;
    min-width: auto !important;
  }
  
  /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º inline —Å—Ç–∏–ª–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö - –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä */
  .language-menu[style*="position: absolute"],
  .language-menu[style*="right: 0"],
  .language-dropdown .language-menu {
    position: static !important;
    right: auto !important;
    left: auto !important;
    top: auto !important;
    transform: none !important;
  }
  
  /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º :style binding –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —á–µ—Ä–µ–∑ CSS */
  .language-menu[style*="display: block"] {
    position: static !important;
    right: auto !important;
    left: auto !important;
    top: auto !important;
    width: 100% !important;
    max-width: 100% !important;
    min-width: auto !important;
  }
  
  /* –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –æ–±—Ä–µ–∑–∞—é—Ç –º–µ–Ω—é */
  .navbar-actions,
  .navbar-collapse,
  .navbar {
    overflow: visible !important;
  }
}

@keyframes dropdownSlide {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.dropdown-item {
  color: var(--text-secondary);
  padding: 0.75rem 1rem;
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-weight: 500;
  text-decoration: none;
  border: none;
  background: none;
  width: 100%;
  text-align: left;
}

.dropdown-item:hover {
  background: var(--glass-bg);
  color: var(--primary-color);
  transform: translateX(5px);
}

.dropdown-item.active {
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  color: white;
}

.dropdown-item.text-danger {
  color: var(--danger-color);
}

.dropdown-item.text-danger:hover {
  background: rgba(231, 76, 60, 0.1);
  color: var(--danger-color);
}

.dropdown-item i {
  width: 16px;
  text-align: center;
  transition: transform var(--transition-normal);
}

.dropdown-item:hover i {
  transform: scale(1.1);
}

.dropdown-header {
  padding: 1rem;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 0.5rem;
}

.dropdown-header.border-bottom {
  border-bottom: 1px solid var(--border-color);
}

/* User Info Styles */
.user-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.user-details strong {
  color: var(--text-primary);
  font-size: 1rem;
}

.user-details small {
  font-size: 0.8rem;
  opacity: 0.8;
}

/* User Stats in Dropdown */
.user-stats {
  text-align: center;
}

.stat-item {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin-bottom: 0.5rem;
}

.level-badge {
  background: linear-gradient(45deg, var(--primary-color), var(--primary-dark));
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: var(--radius-full);
  font-size: 0.8rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.25rem;
  box-shadow: var(--shadow-sm);
}

.xp-counter {
  color: var(--text-secondary);
  font-size: 0.8rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.achievements-link-wrapper {
  display: flex;
  justify-content: center;
}

.achievements-link {
  color: var(--accent-color);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: var(--radius-md);
  transition: all var(--transition-normal);
}

.achievements-link:hover {
  background: var(--glass-bg);
  transform: scale(1.05);
}

/* Language Button */
.language-btn {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  min-width: 70px;
  justify-content: center;
}

/* User Button */
.user-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)) !important;
  border: none !important;
  position: relative;
  overflow: visible;
  padding: 0.5rem 1rem !important;
}

.user-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.5s ease;
}

.user-btn:hover::before {
  left: 100%;
}

.user-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(62, 205, 193, 0.3);
}

.user-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
}

/* Button Enhancements */
.btn {
  border-radius: var(--radius-md) !important;
  font-weight: 600;
  transition: all var(--transition-normal);
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem 1rem !important;
}

.btn-primary {
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)) !important;
  border: none !important;
  position: relative;
  overflow: visible;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(62, 205, 193, 0.3);
}

.btn-outline-primary {
  border-color: var(--primary-color) !important;
  color: var(--primary-color) !important;
  background: transparent;
}

.btn-outline-primary:hover {
  background: var(--primary-color) !important;
  border-color: var(--primary-color) !important;
  color: white !important;
  transform: translateY(-2px);
}

/* Theme Toggle in Dropdown */
.theme-toggle-inline {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-normal);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  width: 100%;
  text-align: left;
  padding: 0.75rem 1rem;
  border-radius: var(--radius-md);
}

.theme-toggle-inline:hover {
  background: var(--glass-bg);
  color: var(--primary-color);
  transform: translateX(5px);
}

.theme-icon {
  font-size: 1rem;
  transition: transform var(--transition-normal);
  width: 16px;
  text-align: center;
}

.theme-toggle-inline:hover .theme-icon {
  transform: rotate(180deg);
}

/* ===== –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–¢–°–¢–£–ü–û–í ===== */

/* –£–ë–ò–†–ê–ï–ú –≥–ª–æ–±–∞–ª—å–Ω—ã–π padding-top —É body */
body {
  padding-top: 0 !important;
  margin: 0;
}

/* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã –¢–û–õ–¨–ö–û –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ */
.main-content {
  margin-top: var(--header-height);
  min-height: calc(100vh - var(--header-height));
  padding-top: 0 !important;
}

/* –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è hero-—Å–µ–∫—Ü–∏–∏ */
.hero-section {
  padding-top: calc(var(--header-height) + 2rem);
  min-height: 100vh;
}

/* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∫–∞—Ä—Ç—ã –æ–±—É—á–µ–Ω–∏—è */
.learning-map-container .main-container {
  margin-top: var(--header-height);
  min-height: calc(100vh - var(--header-height));
}

/* Mobile Responsive */
@media (max-width: 992px) {
  
  /* –£–ª—É—á—à–µ–Ω–Ω—ã–π hamburger menu */
  .navbar-toggler {
    display: flex !important;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 44px;
    height: 44px;
    padding: 8px;
    border: none;
    background: transparent;
    cursor: pointer;
    transition: all 0.3s ease;
    order: 3;
    margin-left: auto;
  }

  .hamburger-line {
    display: block;
    width: 24px;
    height: 2px;
    background: var(--text-primary);
    margin: 2px 0;
    transition: all 0.3s ease;
    border-radius: 1px;
  }

  .navbar-toggler[aria-expanded="true"] .hamburger-line:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }

  .navbar-toggler[aria-expanded="true"] .hamburger-line:nth-child(2) {
    opacity: 0;
  }

  .navbar-toggler[aria-expanded="true"] .hamburger-line:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -6px);
  }
  
  .navbar-brand {
    order: 1;
  }
  
  .navbar-collapse {
    order: 4;
    width: 100%;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    margin-top: 1rem;
    padding: 1.5rem;
    box-shadow: var(--shadow-xl);
    backdrop-filter: var(--glass-blur);
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    flex-direction: column;
    align-items: stretch;
    max-height: calc(100vh - 100%);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .navbar-nav {
    flex-direction: column;
    width: 100%;
    gap: 0.5rem;
  }

  .nav-link {
    margin: 0;
    padding: 1rem;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 500;
    transition: all 0.3s ease;
    min-height: 44px;
    display: flex;
    align-items: center;
  }

  .nav-link:hover,
  .nav-link.active {
    background: rgba(102, 126, 234, 0.1);
    transform: translateX(5px);
  }

  .navbar-actions {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border-color);
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 0.75rem;
    margin-left: 0;
  }

  .dropdown {
    width: 100%;
  }

  .dropdown-toggle {
    width: 100%;
    justify-content: space-between;
    padding: 1rem;
    min-height: 44px;
  }

  .dropdown-menu {
    width: 100%;
    margin-top: 0.5rem;
  }

  .dropdown-item {
    padding: 1rem;
    min-height: 44px;
    display: flex;
    align-items: center;
  }

  .guest-actions {
    flex-direction: column !important;
    gap: 0.5rem;
  }

  .guest-actions .btn {
    width: 100%;
    justify-content: center;
  }

  .user-dropdown {
    position: static !important;
    transform: none !important;
    border: none;
    box-shadow: none;
    background: var(--glass-bg);
    margin-top: 1rem;
  }
  
  .hero-section {
    padding-top: calc(var(--header-mobile-height) + 1rem);
  }
}

@media (max-width: 576px) {
  .navbar {
    padding: 0.75rem 0;
  }
  
  .navbar-brand img {
    height: 32px;
  }
  
  .btn span {
    display: none;
  }
  
  .language-btn {
    min-width: 45px;
  }
}

/* ===== –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –Ø–ó–´–ö–û–í–û–ô –ö–ù–û–ü–ö–ò –ë–ï–ó BOOTSTRAP –ö–û–ù–§–õ–ò–ö–¢–û–í ===== */
.language-dropdown {
  position: relative !important;
  z-index: 9999 !important;
  display: inline-block !important;
}

.language-dropdown .language-btn {
  pointer-events: auto !important;
  cursor: pointer !important;
  user-select: none !important;
  border: 1px solid var(--primary-color) !important;
  background: rgba(255, 255, 255, 0.9) !important;
  color: var(--primary-color) !important;
  transition: all 0.3s ease !important;
  font-weight: 500 !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.25rem !important;
}

.language-dropdown .language-btn:hover,
.language-dropdown .language-btn:focus {
  background-color: var(--primary-color) !important;
  color: white !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
  outline: none !important;
}

.language-dropdown .language-btn[aria-expanded="true"] {
  background-color: var(--primary-color) !important;
  color: white !important;
}

.language-menu {
  position: absolute !important;
  top: calc(100% + 0.5rem) !important;
  right: 0 !important;
  z-index: 10000 !important;
  min-width: 180px !important;
  border: 1px solid rgba(0, 0, 0, 0.15) !important;
  border-radius: 8px !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
  background: white !important;
  backdrop-filter: blur(10px) !important;
  padding: 0.5rem 0 !important;
  list-style: none !important;
  margin: 0 !important;
  /* Alpine.js —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ x-show */
}

/* –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –î–õ–Ø –¢–ï–ú–ù–û–ô –¢–ï–ú–´ */
[data-theme="dark"] .language-menu {
  background: rgba(30, 41, 59, 0.95) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  backdrop-filter: blur(20px) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4) !important;
}

[data-theme="gradient"] .language-menu {
  background: rgba(0, 0, 0, 0.8) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  backdrop-filter: blur(25px) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6) !important;
}

/* Alpine.js —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ x-show */

.language-menu .dropdown-item {
  padding: 0.5rem 1rem !important;
  font-size: 0.9rem !important;
  transition: all 0.2s ease !important;
  border: none !important;
  cursor: pointer !important;
  color: #333 !important;
}

.language-menu .dropdown-item:hover {
  background-color: var(--primary-color) !important;
  color: white !important;
  transform: translateX(2px) !important;
}

.language-menu .dropdown-item.active {
  background-color: rgba(var(--primary-color), 0.1) !important;
  color: var(--primary-color) !important;
  font-weight: 600 !important;
}



/* –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –¢–ï–ö–°–¢–ê –î–õ–Ø –ì–†–ê–î–ò–ï–ù–¢–ù–û–ô –¢–ï–ú–´ */
[data-theme="gradient"] .language-menu .dropdown-item {
  color: #ffffff !important;
}

[data-theme="gradient"] .language-menu .dropdown-item:hover {
  background-color: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
}

[data-theme="gradient"] .language-menu .dropdown-item.active {
  background-color: rgba(255, 255, 255, 0.1) !important;
  color: #ffffff !important;
}

/* –ú–æ–±–∏–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —è–∑—ã–∫–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ */
@media (max-width: 768px) {
  .language-dropdown {
    width: 100% !important;
    position: relative !important;
  }
  
  .language-dropdown .dropdown-toggle {
    width: 100% !important;
    justify-content: space-between !important;
  }
  
  /* –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ—Ö inline —Å—Ç–∏–ª–µ–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
  .language-dropdown .language-menu,
  .language-menu.language-menu,
  ul.language-menu.dropdown-menu {
    position: static !important;
    width: 100% !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    bottom: auto !important;
    margin-top: 0.5rem !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    border: none !important;
    box-shadow: none !important;
    background: rgba(255, 255, 255, 0.05) !important;
    transform: none !important;
    max-width: 100% !important;
    min-width: auto !important;
    max-height: none !important;
    overflow: visible !important;
    overflow-y: visible !important;
    overflow-x: visible !important;
  }
  
  /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º inline —Å—Ç–∏–ª–∏ —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä—ã */
  .language-menu[style*="position"],
  .language-menu[style*="right"],
  .language-menu[style*="absolute"] {
    position: static !important;
    right: auto !important;
    left: auto !important;
    top: auto !important;
    transform: none !important;
  }
  
  /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º :style binding –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —á–µ—Ä–µ–∑ CSS */
  .language-menu[style*="display: block"],
  .language-menu[style*="visibility: visible"] {
    position: static !important;
    right: auto !important;
    left: auto !important;
    top: auto !important;
    width: 100% !important;
    max-width: 100% !important;
    min-width: auto !important;
  }
  
  /* –¢–ï–ú–ù–ê–Ø –¢–ï–ú–ê –ù–ê –ú–û–ë–ò–õ–¨–ù–´–• */
  [data-theme="dark"] .language-menu {
    background: rgba(30, 41, 59, 0.95) !important;
  }
  
  [data-theme="gradient"] .language-menu {
    background: rgba(0, 0, 0, 0.8) !important;
  }
  
  /* –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –æ–±—Ä–µ–∑–∞—é—Ç –º–µ–Ω—é */
  .navbar-actions,
  .navbar-collapse,
  .navbar,
  header {
    overflow: visible !important;
    overflow-x: visible !important;
    overflow-y: visible !important;
  }
  
  /* –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ dropdown –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –æ–±—Ä–µ–∑–∞–µ—Ç */
  .language-dropdown {
    overflow: visible !important;
  }
  }
</style>

<!-- ===== –°–¢–ò–õ–ò –î–õ–Ø INLINE –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–Ø –¢–ï–ú ===== -->
<style>
.theme-switcher-inline {
  display: flex !important;
  gap: 0.5rem !important;
  padding: 0.5rem 1rem !important;
  justify-content: center !important;
  align-items: center !important;
  background: rgba(0, 0, 0, 0.02) !important;
  border-radius: 8px !important;
  margin: 0.25rem 0 !important;
}

.theme-btn {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 36px !important;
  height: 36px !important;
  border: 2px solid transparent !important;
  border-radius: 50% !important;
  background: transparent !important;
  color: var(--text-secondary, #666) !important;
  font-size: 16px !important;
  cursor: pointer !important;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
  position: relative !important;
  overflow: hidden !important;
}

.theme-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: var(--primary-color, #3ECDC1);
  opacity: 0.1;
  transform: translate(-50%, -50%);
  transition: all 0.3s ease;
  z-index: 0;
}

.theme-btn:hover::before {
  width: 100%;
  height: 100%;
}

.theme-btn:hover {
  color: var(--primary-color, #3ECDC1) !important;
  transform: translateY(-3px) scale(1.05) !important;
  box-shadow: 
    0 8px 25px rgba(62, 205, 193, 0.25),
    0 2px 0 rgba(255, 255, 255, 0.3) inset !important;
  background: var(--bg-surface, rgba(255, 255, 255, 0.15)) !important;
}

.theme-btn:active {
  transform: translateY(0) scale(0.95) !important;
}

.theme-btn i {
  position: relative;
  z-index: 1;
}

/* ===== –°–û–°–¢–û–Ø–ù–ò–Ø –ê–ö–¢–ò–í–ù–´–• –¢–ï–ú ===== */
.theme-btn.active {
  color: #ffffff !important;
  border-color: var(--primary-color, #3ECDC1) !important;
  background: var(--primary-color, #3ECDC1) !important;
  box-shadow: 
    0 4px 15px rgba(62, 205, 193, 0.3),
    0 0 0 3px rgba(62, 205, 193, 0.1) !important;
  transform: scale(1.1) !important;
}

.theme-btn.active::before {
  width: 100%;
  height: 100%;
  opacity: 0.2;
  background: #ffffff;
}

/* ===== –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ö–ê–ñ–î–û–ô –¢–ï–ú–´ ===== */
.theme-btn[data-theme="light"]:hover {
  color: #f59e0b !important;
  border-color: #f59e0b !important;
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2) !important;
}

.theme-btn[data-theme="light"].active {
  background: #f59e0b !important;
  border-color: #f59e0b !important;
  box-shadow: 
    0 4px 15px rgba(245, 158, 11, 0.3),
    0 0 0 3px rgba(245, 158, 11, 0.1) !important;
}

.theme-btn[data-theme="dark"]:hover {
  color: #8b5cf6 !important;
  border-color: #8b5cf6 !important;
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2) !important;
}

.theme-btn[data-theme="dark"].active {
  background: #8b5cf6 !important;
  border-color: #8b5cf6 !important;
  box-shadow: 
    0 4px 15px rgba(139, 92, 246, 0.3),
    0 0 0 3px rgba(139, 92, 246, 0.1) !important;
}

.theme-btn[data-theme="gradient"]:hover {
  color: #06b6d4 !important;
  border-color: #06b6d4 !important;
  box-shadow: 0 4px 12px rgba(6, 182, 212, 0.2) !important;
}

.theme-btn[data-theme="gradient"].active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  border-color: #667eea !important;
  box-shadow: 
    0 4px 15px rgba(102, 126, 234, 0.3),
    0 0 0 3px rgba(102, 126, 234, 0.1) !important;
}

/* ===== –ê–ù–ò–ú–ê–¶–ò–Ø –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø ===== */
@keyframes themeSwitch {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1.1);
  }
}

.theme-btn.switching {
  animation: themeSwitch 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .theme-switcher-inline {
    padding: 0.75rem 1rem !important;
    gap: 0.75rem !important;
  }
  
  .theme-btn {
    width: 40px !important;
    height: 40px !important;
    font-size: 18px !important;
  }
}
</style>

<!-- ===== –°–û–í–†–ï–ú–ï–ù–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ö–û–ú–ü–ê–ö–¢–ù–´–• –ö–ù–û–ü–û–ö ===== -->
<style>
/* ===== –ö–û–ú–ü–ê–ö–¢–ù–´–ï –ö–ù–û–ü–ö–ò –Ø–ó–´–ö–ê –ò –ü–†–û–§–ò–õ–Ø ===== */
.language-btn-modern,
.user-btn-modern {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 44px !important;
  height: 44px !important;
  border: none !important;
  border-radius: 50% !important;
  background: var(--bg-surface-alpha, rgba(255, 255, 255, 0.1)) !important;
  backdrop-filter: blur(10px) !important;
  color: var(--text-primary, #333) !important;
  font-size: 18px !important;
  cursor: pointer !important;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
  position: relative !important;
  overflow: hidden !important;
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.1),
    0 1px 0 rgba(255, 255, 255, 0.2) inset !important;
  text-decoration: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

.language-btn-modern::before,
.user-btn-modern::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: var(--primary-color, #3ECDC1);
  opacity: 0.15;
  transform: translate(-50%, -50%);
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  z-index: 0;
}

.language-btn-modern:hover::before,
.user-btn-modern:hover::before {
  width: 120%;
  height: 120%;
  opacity: 0.2;
}

.language-btn-modern:hover,
.user-btn-modern:hover {
  color: var(--primary-color, #3ECDC1) !important;
  border: none !important;
  transform: translateY(-3px) scale(1.05) !important;
  box-shadow: 
    0 8px 25px rgba(62, 205, 193, 0.25),
    0 2px 0 rgba(255, 255, 255, 0.3) inset !important;
  background: var(--bg-surface, rgba(255, 255, 255, 0.15)) !important;
}

.language-btn-modern:active,
.user-btn-modern:active {
  transform: translateY(-1px) scale(0.98) !important;
  box-shadow: 
    0 4px 15px rgba(62, 205, 193, 0.2),
    0 1px 0 rgba(255, 255, 255, 0.2) inset !important;
}

.language-btn-modern i,
.user-btn-modern i {
  position: relative;
  z-index: 1;
  font-size: 18px !important;
  transition: all 0.3s ease !important;
}

.language-btn-modern:hover i,
.user-btn-modern:hover i {
  transform: scale(1.1) !important;
}

/* ===== –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø USER AVATAR ===== */
.user-btn-modern .user-avatar {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 100% !important;
  height: 100% !important;
  position: relative !important;
  z-index: 1 !important;
}

.user-btn-modern .user-avatar i {
  font-size: 20px !important;
}

/* ===== –ê–ù–ò–ú–ê–¶–ò–Ø –ü–£–õ–¨–°–ê–¶–ò–ò ===== */
@keyframes buttonPulse {
  0% {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 0 0 0 rgba(62, 205, 193, 0.4);
  }
  50% {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 0 0 8px rgba(62, 205, 193, 0);
  }
  100% {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 0 0 0 rgba(62, 205, 193, 0);
  }
}

.language-btn-modern:focus,
.user-btn-modern:focus {
  outline: none !important;
  animation: buttonPulse 1.5s infinite !important;
}

/* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ===== */
@media (max-width: 768px) {
  .language-btn-modern,
  .user-btn-modern {
    width: 40px !important;
    height: 40px !important;
    font-size: 16px !important;
  }
  
  .user-btn-modern .user-avatar i {
    font-size: 18px !important;
  }
}

@media (max-width: 576px) {
  .language-btn-modern,
  .user-btn-modern {
    width: 38px !important;
    height: 38px !important;
    font-size: 15px !important;
  }
  
  .user-btn-modern .user-avatar i {
    font-size: 17px !important;
  }
}

/* ===== LOADING STATE ===== */
.language-btn-modern.loading,
.user-btn-modern.loading {
  pointer-events: none !important;
  opacity: 0.7 !important;
}

.language-btn-modern.loading::after,
.user-btn-modern.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  border: 2px solid transparent;
  border-top: 2px solid var(--primary-color, #3ECDC1);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  animation: spin 1s linear infinite;
  z-index: 2;
}

@keyframes spin {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* ===== –¢–ï–ú–ù–ê–Ø –¢–ï–ú–ê –î–õ–Ø –ö–ù–û–ü–û–ö ===== */
[data-theme="dark"] .language-btn-modern,
[data-theme="dark"] .user-btn-modern {
  background: rgba(30, 41, 59, 0.8) !important;
  color: #f8fafc !important;
  border: none !important;
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.3),
    0 1px 0 rgba(255, 255, 255, 0.1) inset !important;
}

[data-theme="dark"] .language-btn-modern:hover,
[data-theme="dark"] .user-btn-modern:hover {
  background: rgba(30, 41, 59, 0.9) !important;
  color: #3ECDC1 !important;
  border: none !important;
  box-shadow: 
    0 8px 25px rgba(62, 205, 193, 0.3),
    0 2px 0 rgba(255, 255, 255, 0.2) inset !important;
}

/* ===== –ì–†–ê–î–ò–ï–ù–¢–ù–ê–Ø –¢–ï–ú–ê –î–õ–Ø –ö–ù–û–ü–û–ö ===== */
[data-theme="gradient"] .language-btn-modern,
[data-theme="gradient"] .user-btn-modern {
  background: rgba(0, 0, 0, 0.4) !important;
  color: #ffffff !important;
  border: none !important;
  backdrop-filter: blur(15px) !important;
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.4),
    0 1px 0 rgba(255, 255, 255, 0.2) inset !important;
}

[data-theme="gradient"] .language-btn-modern:hover,
[data-theme="gradient"] .user-btn-modern:hover {
  background: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
  border: none !important;
  box-shadow: 
    0 8px 25px rgba(255, 255, 255, 0.2),
    0 2px 0 rgba(255, 255, 255, 0.3) inset !important;
}

/* ===== –£–ë–ò–†–ê–ï–ú –ë–ï–õ–´–ï –ö–û–ù–¢–ï–ô–ù–ï–†–´ –í–û–ö–†–£–ì –ö–ù–û–ü–û–ö ===== */

/* –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ —è–∑—ã–∫–∞ –∏ –ø—Ä–æ—Ñ–∏–ª—è */
.language-btn-modern,
.user-btn-modern {
  /* –£–ë–ò–†–ê–ï–ú –ë–ï–õ–´–ô –§–û–ù */
  background: transparent !important;
  /* –£–ë–ò–†–ê–ï–ú –ì–†–ê–ù–ò–¶–´ */
  border: none !important;
  /* –£–ë–ò–†–ê–ï–ú PADDING */
  padding: 0 !important;
  /* –†–ê–ó–ú–ï–†–´ */
  width: 44px !important;
  height: 44px !important;
  border-radius: 50% !important;
  /* –¶–ï–ù–¢–†–ò–†–û–í–ê–ù–ò–ï –ò–ö–û–ù–ö–ò */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  /* –ö–£–†–°–û–† */
  cursor: pointer !important;
  /* –ê–ù–ò–ú–ê–¶–ò–Ø */
  transition: all 0.3s ease !important;
  /* –¶–í–ï–¢ –ò–ö–û–ù–ö–ò */
  color: #6b7280 !important;
  font-size: 20px !important;
}

/* Hover —ç—Ñ—Ñ–µ–∫—Ç –±–µ–∑ –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞ */
.language-btn-modern:hover,
.user-btn-modern:hover {
  background: rgba(62, 205, 193, 0.1) !important;
  color: #3ECDC1 !important;
  transform: scale(1.1) !important;
  border: none !important;
}

/* –£–±–∏—Ä–∞–µ–º Bootstrap —Å—Ç–∏–ª–∏ –¥–ª—è dropdown –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ */
.language-dropdown,
.navbar-actions .dropdown {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–±—â–∏–µ —Å—Ç–∏–ª–∏ header –¥–ª—è dropdown –∫–Ω–æ–ø–æ–∫ */
header.modern-header .dropdown,
header.modern-header .btn {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
}

/* –£–±–∏—Ä–∞–µ–º —Ñ–æ–Ω —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ navbar-actions */
header.modern-header .navbar-actions {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  gap: 1rem !important;
}

/* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è dropdown-toggle */
.language-dropdown .dropdown-toggle,
.navbar-actions .dropdown-toggle {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
  width: 44px !important;
  height: 44px !important;
  border-radius: 50% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  color: #6b7280 !important;
  font-size: 20px !important;
}

/* Focus —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–µ–∑ –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞ */
.language-btn-modern:focus,
.user-btn-modern:focus,
.language-btn-modern:focus-visible,
.user-btn-modern:focus-visible {
  background: rgba(62, 205, 193, 0.1) !important;
  border: none !important;
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(62, 205, 193, 0.3) !important;
}

/* Active —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–µ–∑ –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞ */
.language-btn-modern:active,
.user-btn-modern:active {
  background: rgba(62, 205, 193, 0.2) !important;
  transform: scale(0.95) !important;
  border: none !important;
}

/* –£–±–∏—Ä–∞–µ–º –±–µ–ª—ã–π —Ñ–æ–Ω —É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ */
.navbar-actions .dropdown,
.navbar-actions .language-dropdown {
  background: transparent !important;
  border: none !important;
}

/* –£–±–∏—Ä–∞–µ–º box-shadow —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π */
.navbar-actions * {
  box-shadow: none !important;
  border: none !important;
}

/* –£–±–∏—Ä–∞–µ–º padding —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ actions */
.navbar-actions {
  padding: 0 !important;
  margin: 0 !important;
  background: transparent !important;
}

/* –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫–∏ */
.language-btn-modern i,
.user-btn-modern i {
  font-size: inherit !important;
  color: inherit !important;
}

/* –£–±–∏—Ä–∞–µ–º –ª—é–±—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –±–µ–ª—ã–µ —Ñ–æ–Ω—ã */
.language-dropdown *,
.user-dropdown * {
  background: transparent !important;
  border: none !important;
}

/* –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è dropdown –º–µ–Ω—é (–Ω–µ –∫–Ω–æ–ø–æ–∫) */
.dropdown-menu {
  background: white !important;
  border: 1px solid rgba(0, 0, 0, 0.15) !important;
  border-radius: 8px !important;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175) !important;
}

/* ===== –£–î–ê–õ–Ø–ï–ú –°–¢–ê–†–´–ï –°–¢–ò–õ–ò –°–í–ï–¢–õ–û–ô –¢–ï–ú–´ ===== */

[data-theme="light"] .language-btn-modern:hover,
[data-theme="light"] .user-btn-modern:hover {
  background: rgba(62, 205, 193, 0.1) !important;
  color: #20b2aa !important;
  border: none !important;
}

/* ===== –¢–ï–ú–ù–ê–Ø –¢–ï–ú–ê –ë–ï–ó –ë–ï–õ–û–ì–û –§–û–ù–ê ===== */
[data-theme="dark"] .language-btn-modern,
[data-theme="dark"] .user-btn-modern {
  background: transparent !important;
  color: #e2e8f0 !important;
  border: none !important;
}

[data-theme="dark"] .language-btn-modern:hover,
[data-theme="dark"] .user-btn-modern:hover {
  background: rgba(62, 205, 193, 0.2) !important;
  color: #3ECDC1 !important;
  border: none !important;
}

/* ===== –ì–†–ê–î–ò–ï–ù–¢–ù–ê–Ø –¢–ï–ú–ê –ë–ï–ó –ë–ï–õ–û–ì–û –§–û–ù–ê ===== */
[data-theme="gradient"] .language-btn-modern,
[data-theme="gradient"] .user-btn-modern {
  background: transparent !important;
  color: rgba(255, 255, 255, 0.8) !important;
  border: none !important;
}

[data-theme="gradient"] .language-btn-modern:hover,
[data-theme="gradient"] .user-btn-modern:hover {
  background: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
  border: none !important;
}

/* ===== –°–í–ï–¢–õ–ê–Ø –¢–ï–ú–ê –ë–ï–ó –ë–ï–õ–û–ì–û –§–û–ù–ê ===== */
[data-theme="light"] .language-btn-modern,
[data-theme="light"] .user-btn-modern {
  background: transparent !important;
  color: #64748b !important;
  border: none !important;
}

/* ===== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –ë–ï–ó –ë–ï–õ–û–ì–û –§–û–ù–ê ===== */
@media (max-width: 768px) {
  .language-btn-modern,
  .user-btn-modern {
    width: 40px !important;
    height: 40px !important;
    font-size: 18px !important;
    background: transparent !important;
    border: none !important;
  }
}

@media (max-width: 576px) {
  .language-btn-modern,
  .user-btn-modern {
    width: 38px !important;
    height: 38px !important;
    font-size: 16px !important;
    background: transparent !important;
    border: none !important;
  }
}
</style>

<script>
// Alpine.js –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–ø–∫–æ–π
// –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≥–ª–æ–±–∞–ª—å–Ω–æ–π –¥–ª—è Alpine.js
window.headerNav = function() {
  return {
    mobileMenuOpen: false,
    isDesktop: false,
    
    init() {
      // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
      this.mobileMenuOpen = false;
      
      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      this.checkDesktop();
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –µ—Å–ª–∏ —ç—Ç–æ –¥–µ—Å–∫—Ç–æ–ø
      if (this.isDesktop) {
        this.mobileMenuOpen = false;
      } else {
        // –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –º–µ–Ω—é –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç–æ
        this.mobileMenuOpen = false;
      }
      
      console.log('HeaderNav initialized:', {
        isDesktop: this.isDesktop,
        mobileMenuOpen: this.mobileMenuOpen,
        windowWidth: window.innerWidth
      });
      
      // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
      const handleResize = () => {
        const wasDesktop = this.isDesktop;
        this.checkDesktop();
        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø
        if (this.isDesktop) {
          this.mobileMenuOpen = false;
        }
      };
      
      window.addEventListener('resize', handleResize);
    },
    
    checkDesktop() {
      this.isDesktop = window.innerWidth >= 992;
    },
    
    toggleMobileMenu() {
      // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –º–µ–Ω—é
      if (this.isDesktop) {
        this.mobileMenuOpen = false;
        return;
      }
      this.mobileMenuOpen = !this.mobileMenuOpen;
      console.log('Mobile menu toggled:', this.mobileMenuOpen);
    },
    
    closeMobileMenu() {
      if (!this.isDesktop) {
        this.mobileMenuOpen = false;
      }
    }
  }
}

// –¢–∞–∫–∂–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
function headerNav() {
  return window.headerNav();
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Alpine.js
document.addEventListener('DOMContentLoaded', function() {
  // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ Alpine.js
  setTimeout(function() {
    if (typeof Alpine !== 'undefined') {
      console.log('‚úÖ Alpine.js –∑–∞–≥—Ä—É–∂–µ–Ω');
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ dropdown —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
      const dropdowns = document.querySelectorAll('.dropdown[x-data]');
      console.log(`üîç –ù–∞–π–¥–µ–Ω–æ ${dropdowns.length} dropdown —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å x-data`);
      
      dropdowns.forEach((dropdown, index) => {
        const button = dropdown.querySelector('button');
        const menu = dropdown.querySelector('.dropdown-menu');
        console.log(`Dropdown ${index + 1}:`, {
          hasButton: !!button,
          hasMenu: !!menu,
          buttonClasses: button ? button.className : 'none',
          menuClasses: menu ? menu.className : 'none'
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        if (button) {
          button.addEventListener('click', function(e) {
            console.log(`üñ±Ô∏è –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ dropdown ${index + 1}`, e);
            console.log('Event target:', e.target);
            console.log('Event currentTarget:', e.currentTarget);
            console.log('Alpine data:', Alpine.$data ? Alpine.$data(dropdown) : 'Alpine.$data not available');
            console.log('Dropdown element:', dropdown);
            console.log('Has x-data:', dropdown.hasAttribute('x-data'));
          }, true); // –ò—Å–ø–æ–ª—å–∑—É–µ–º capture phase –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –¥–æ Alpine
        }
      });
    } else {
      console.error('‚ùå Alpine.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω!');
    }
  }, 500);
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const header = document.querySelector('.modern-header');
  let lastScrollTop = 0;
  const scrollThreshold = 50;

  // Header scroll behavior
  if (header) {
    window.addEventListener('scroll', function() {
      let currentScroll = window.pageYOffset || document.documentElement.scrollTop;
      
      // Add scrolled class for styling
      if (currentScroll > 10) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      
      lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
    }, { passive: true });
  }

  // Close mobile menu when clicking outside - –û–¢–ö–õ–Æ–ß–ï–ù–û (–∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å base.html)
  // document.addEventListener('click', function(e) {
  //   const navbar = document.querySelector('.navbar-collapse');
  //   const toggle = document.querySelector('.navbar-toggler');
  //   
  //   if (navbar && navbar.classList.contains('show') && 
  //       !navbar.contains(e.target) && 
  //       !toggle.contains(e.target)) {
  //     const bsCollapse = bootstrap.Collapse.getInstance(navbar);
  //     if (bsCollapse) {
  //       bsCollapse.hide();
  //     }
  //   }
  // });

  // Auto-close mobile menu when clicking nav links - –û–¢–ö–õ–Æ–ß–ï–ù–û (–∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å base.html)
  // document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
  //   link.addEventListener('click', function() {
  //     const navbar = document.querySelector('.navbar-collapse');
  //     if (navbar && navbar.classList.contains('show')) {
  //       const bsCollapse = bootstrap.Collapse.getInstance(navbar);
  //       if (bsCollapse) {
  //         bsCollapse.hide();
  //       }
  //     }
  //   });
  // });
});
</script>

<script>
// ===== INLINE THEME SWITCHER CONTROLLER =====
document.addEventListener('DOMContentLoaded', function() {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è inline –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —Ç–µ–º
  
  const themeButtons = document.querySelectorAll('.theme-btn');
  const currentTheme = localStorage.getItem('theme') || 'light';
  
  // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
  function updateActiveButton(activeTheme) {
    themeButtons.forEach(btn => {
      btn.classList.remove('active');
      if (btn.dataset.theme === activeTheme) {
        btn.classList.add('active');
      }
    });
  }
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
  updateActiveButton(currentTheme);
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ç–µ–º
  themeButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const selectedTheme = this.dataset.theme;
      
      // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
      this.classList.add('switching');
      setTimeout(() => {
        this.classList.remove('switching');
      }, 400);
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
      if (window.themeController) {
        window.themeController.setTheme(selectedTheme);
      } else {
        // Fallback –µ—Å–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
        localStorage.setItem('theme', selectedTheme);
        document.documentElement.setAttribute('data-theme', selectedTheme);
      }
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
      updateActiveButton(selectedTheme);
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º dropdown –º–µ–Ω—é (Alpine.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä–æ–µ—Ç —á–µ—Ä–µ–∑ @click.away)
      
      // –¢–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º hover —ç—Ñ—Ñ–µ–∫—Ç—ã
    button.addEventListener('mouseenter', function() {
      if (!this.classList.contains('active')) {
        this.style.transform = 'translateY(-2px) scale(1.05)';
      }
    });
    
    button.addEventListener('mouseleave', function() {
      if (!this.classList.contains('active')) {
        this.style.transform = '';
      }
    });
  });
  
  // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã –æ—Ç –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
  window.addEventListener('themechange', function(e) {
    updateActiveButton(e.detail.theme);
  });
  
  // –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–∞ data-theme
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
        const newTheme = document.documentElement.getAttribute('data-theme');
        updateActiveButton(newTheme);
      }
    });
  });
  
  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ['data-theme']
  });
  
  // Inline –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
});
</script>

<script>
// ===== –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ï –≠–§–§–ï–ö–¢–´ –î–õ–Ø –ö–û–ú–ü–ê–ö–¢–ù–´–• –ö–ù–û–ü–û–ö =====
document.addEventListener('DOMContentLoaded', function() {
  
  const modernButtons = document.querySelectorAll('.language-btn-modern, .user-btn-modern');
  
  modernButtons.forEach(button => {
    // –≠—Ñ—Ñ–µ–∫—Ç –ø—É–ª—å—Å–∞—Ü–∏–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ
    button.addEventListener('click', function(e) {
      // –°–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –≤–æ–ª–Ω—ã
      const ripple = document.createElement('div');
      const rect = this.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const x = e.clientX - rect.left - size / 2;
      const y = e.clientY - rect.top - size / 2;
      
      ripple.style.cssText = `
        position: absolute;
        left: ${x}px;
        top: ${y}px;
        width: ${size}px;
        height: ${size}px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(62, 205, 193, 0.4) 0%, transparent 70%);
        transform: scale(0);
        animation: rippleEffect 0.6s ease-out;
        pointer-events: none;
        z-index: 10;
      `;
      
      this.appendChild(ripple);
      
      // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
      setTimeout(() => {
        if (ripple.parentNode) {
          ripple.parentNode.removeChild(ripple);
        }
      }, 600);
    });
    
    // –≠—Ñ—Ñ–µ–∫—Ç –º–∞–≥–Ω–µ—Ç–∏–∑–º–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
    button.addEventListener('mouseenter', function() {
      this.style.transform = 'translateY(-2px) scale(1.05) rotate(1deg)';
    });
    
    button.addEventListener('mouseleave', function() {
      this.style.transform = '';
    });
  });
  
  // –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
});

// ===== SMART DROPDOWN POSITIONING =====
document.addEventListener('DOMContentLoaded', function() {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è dropdown
  
  function adjustDropdownPosition(dropdown, toggle) {
    if (!dropdown || !toggle) return;
    
    const rect = toggle.getBoundingClientRect();
    const dropdownRect = dropdown.getBoundingClientRect();
    const viewportHeight = window.innerHeight;
    const viewportWidth = window.innerWidth;
    
    // –°–±—Ä–æ—Å —Å—Ç–∏–ª–µ–π –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    dropdown.style.position = 'absolute';
    dropdown.style.top = '';
    dropdown.style.bottom = '';
    dropdown.style.left = '';
    dropdown.style.right = '';
    dropdown.style.transform = '';
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–º–µ—â–∞–µ—Ç—Å—è –ª–∏ dropdown —Å–Ω–∏–∑—É
    const spaceBelow = viewportHeight - rect.bottom;
    const spaceAbove = rect.top;
    const dropdownHeight = dropdownRect.height || 300; // –ø—Ä–∏–º–µ—Ä–Ω–∞—è –≤—ã—Å–æ—Ç–∞
    
    if (spaceBelow >= dropdownHeight + 10) {
      // –†–∞–∑–º–µ—â–∞–µ–º —Å–Ω–∏–∑—É
      dropdown.style.top = '100%';
      dropdown.style.marginTop = '0.5rem';
    } else if (spaceAbove >= dropdownHeight + 10) {
      // –†–∞–∑–º–µ—â–∞–µ–º —Å–≤–µ—Ä—Ö—É
      dropdown.style.bottom = '100%';
      dropdown.style.marginBottom = '0.5rem';
    } else {
      // –†–∞–∑–º–µ—â–∞–µ–º –≤ –¥–æ—Å—Ç—É–ø–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
      if (spaceBelow > spaceAbove) {
        dropdown.style.top = '100%';
        dropdown.style.marginTop = '0.5rem';
        dropdown.style.maxHeight = `${spaceBelow - 20}px`;
      } else {
        dropdown.style.bottom = '100%';
        dropdown.style.marginBottom = '0.5rem';
        dropdown.style.maxHeight = `${spaceAbove - 20}px`;
      }
      dropdown.style.overflowY = 'auto';
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    const spaceRight = viewportWidth - rect.right;
    const dropdownWidth = dropdown.offsetWidth || 220;
    
    if (dropdown.classList.contains('dropdown-menu-end')) {
      if (spaceRight < dropdownWidth && rect.left > dropdownWidth) {
        dropdown.style.right = '0';
      }
    } else {
      if (rect.left + dropdownWidth > viewportWidth && spaceRight < dropdownWidth) {
        dropdown.style.right = '0';
        dropdown.style.left = 'auto';
      }
    }
  }
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö dropdown
  document.addEventListener('show.bs.dropdown', function(e) {
    const toggle = e.target;
    const dropdown = toggle.nextElementSibling;
    
    if (dropdown && dropdown.classList.contains('dropdown-menu')) {
      // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
      setTimeout(() => {
        adjustDropdownPosition(dropdown, toggle);
      }, 10);
    }
  });
  
  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
  window.addEventListener('resize', function() {
    document.querySelectorAll('.dropdown-menu.show').forEach(dropdown => {
      const toggle = dropdown.previousElementSibling;
      adjustDropdownPosition(dropdown, toggle);
    });
  });
  
  // –£–º–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ dropdown –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
});

// –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
const modernButtonStyles = document.createElement('style');
modernButtonStyles.textContent = `
  @keyframes rippleEffect {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    100% {
      transform: scale(2);
      opacity: 0;
    }
  }
`;
document.head.appendChild(modernButtonStyles);
</script>

<!-- ===== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –¢–ï–ú–ù–û–ô –¢–ï–ú–´ –° –í–´–°–û–ö–û–ô –°–ü–ï–¶–ò–§–ò–ß–ù–û–°–¢–¨–Æ ===== -->
<style>
/* –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –î–õ–Ø –¢–ï–ú–ù–û–ô –¢–ï–ú–´ */
html[data-theme="dark"] .dropdown-menu,
html[data-theme="dark"] .language-menu,
[data-theme="dark"] .dropdown-menu.show,
[data-theme="dark"] .language-menu.show {
  background: rgba(30, 41, 59, 0.95) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  color: #f8fafc !important;
}

html[data-theme="dark"] .dropdown-item,
html[data-theme="dark"] .language-menu .dropdown-item {
  color: #f8fafc !important;
  background: transparent !important;
}

html[data-theme="dark"] .dropdown-item:hover,
html[data-theme="dark"] .language-menu .dropdown-item:hover {
  background: rgba(62, 205, 193, 0.2) !important;
  color: #ffffff !important;
}

html[data-theme="dark"] .dropdown-header {
  color: #f8fafc !important;
  border-bottom-color: rgba(255, 255, 255, 0.1) !important;
}

html[data-theme="dark"] .user-details strong {
  color: #f8fafc !important;
}

html[data-theme="dark"] .user-details small {
  color: #cbd5e1 !important;
}

/* –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û–ï –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –î–õ–Ø –ì–†–ê–î–ò–ï–ù–¢–ù–û–ô –¢–ï–ú–´ */
html[data-theme="gradient"] .dropdown-menu,
html[data-theme="gradient"] .language-menu,
[data-theme="gradient"] .dropdown-menu.show,
[data-theme="gradient"] .language-menu.show {
  background: rgba(0, 0, 0, 0.8) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
}

html[data-theme="gradient"] .dropdown-item,
html[data-theme="gradient"] .language-menu .dropdown-item {
  color: #ffffff !important;
  background: transparent !important;
}

html[data-theme="gradient"] .dropdown-item:hover,
html[data-theme="gradient"] .language-menu .dropdown-item:hover {
  background: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
}
</style>

<!-- ===== –°–¢–ò–õ–ò –î–õ–Ø INLINE –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–Ø –¢–ï–ú ===== -->

<!-- ===== –ö–†–ê–°–ò–í–´–ï –ó–ù–ê–ß–ö–ò –î–õ–Ø –ù–ê–í–ò–ì–ê–¶–ò–ò ===== -->
<style>
/* ===== –ê–ù–ò–ú–ò–†–û–í–ê–ù–ù–´–ï –ó–ù–ê–ß–ö–ò –ú–ï–ù–Æ ===== */
.language-icon,
.user-icon,
.settings-icon {
  display: inline-block !important;
  font-size: 24px !important;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
  position: relative !important;
  z-index: 1 !important;
}

/* –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
.language-btn-modern:hover .language-icon {
  transform: rotate(15deg) scale(1.1) !important;
  filter: drop-shadow(0 0 8px rgba(62, 205, 193, 0.6)) !important;
}

.user-btn-modern:hover .user-icon {
  transform: scale(1.15) !important;
  filter: drop-shadow(0 0 8px rgba(62, 205, 193, 0.6)) !important;
}

.user-btn-modern:hover .settings-icon {
  transform: rotate(90deg) scale(1.1) !important;
  filter: drop-shadow(0 0 8px rgba(62, 205, 193, 0.6)) !important;
}

/* –ü—É–ª—å—Å–∏—Ä—É—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è */
@keyframes iconPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.dropdown.show .language-icon,
.dropdown.show .user-icon,
.dropdown.show .settings-icon {
  animation: iconPulse 1.5s ease-in-out infinite !important;
  filter: drop-shadow(0 0 12px rgba(62, 205, 193, 0.8)) !important;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è Bootstrap –∏–∫–æ–Ω–æ–∫ */
.language-icon i,
.user-icon i,
.settings-icon i {
  color: #3ECDC1 !important;
}

/* –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ */
@keyframes iconGlow {
  0% {
    filter: drop-shadow(0 0 5px rgba(62, 205, 193, 0.3));
  }
  50% {
    filter: drop-shadow(0 0 20px rgba(62, 205, 193, 0.8));
  }
  100% {
    filter: drop-shadow(0 0 5px rgba(62, 205, 193, 0.3));
  }
}

.language-btn-modern:active .language-icon,
.user-btn-modern:active .user-icon,
.user-btn-modern:active .settings-icon {
  animation: iconGlow 0.3s ease-out !important;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 768px) {
  .language-icon,
  .user-icon,
  .settings-icon {
    font-size: 20px !important;
    margin-right: 6px !important;
  }
}

/* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
html[data-theme="dark"] .language-icon i,
html[data-theme="dark"] .user-icon i,
html[data-theme="dark"] .settings-icon i {
  color: #64FFDA !important;
}

/* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è —Ç–µ–º–∞ */
html[data-theme="gradient"] .language-icon i,
html[data-theme="gradient"] .user-icon i,
html[data-theme="gradient"] .settings-icon i {
  color: #ffffff !important;
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5)) !important;
}
</style>

<script>
// ===== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –¢–ï–ú–ê–ú–ò –ò –ì–ê–õ–û–ß–ö–ê–ú–ò =====
document.addEventListener('DOMContentLoaded', function() {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ç–µ–º —Å –≥–∞–ª–æ—á–∫–∞–º–∏
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–∞–ª–æ—á–µ–∫ –≤ –º–µ–Ω—é —Ç–µ–º
  function updateThemeCheckmarks() {
    const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
    
    // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –≥–∞–ª–æ—á–∫–∏
    document.querySelectorAll('.theme-checkmark').forEach(check => {
      check.style.display = 'none';
    });
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–∞–ª–æ—á–∫—É –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ç–µ–º—ã
    const activeCheck = document.getElementById(currentTheme + '-check');
    if (activeCheck) {
      activeCheck.style.display = 'inline';
    }
  }
  
  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é setTheme –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥–∞–ª–æ—á–µ–∫
  const originalSetTheme = window.setTheme;
  window.setTheme = function(theme) {
    if (originalSetTheme) {
      originalSetTheme(theme);
    } else if (window.DentalAcademy && window.DentalAcademy.themeManager) {
      window.DentalAcademy.themeManager.setTheme(theme);
    } else {
      // Fallback –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä —Ç–µ–º –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
    }
    updateThemeCheckmarks();
  };
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
  window.toggleTheme = function() {
    const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≤ –º–µ–Ω—é
    const themeIcon = document.querySelector('.theme-btn[data-theme="toggle"] i');
    if (themeIcon) {
      if (newTheme === 'dark') {
        themeIcon.className = 'bi bi-sun fs-5 me-2';
      } else {
        themeIcon.className = 'bi bi-moon-stars fs-5 me-2';
      }
    }
  };
  
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–∞–ª–æ—á–µ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  setTimeout(updateThemeCheckmarks, 100);
  
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–∞–ª–æ—á–µ–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
        updateThemeCheckmarks();
      }
    });
  });
  
  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ['data-theme']
  });
  
  // –°–∏—Å—Ç–µ–º–∞ —Ç–µ–º —Å –≥–∞–ª–æ—á–∫–∞–º–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
});
</script>

<style>
.language-btn-modern,
.user-btn-modern {
  padding: 0.5rem !important;
  width: 40px !important;
  height: 40px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  border-radius: 50% !important;
}

/* ===== –°–¢–ò–õ–ò –õ–û–ì–û–¢–ò–ü–ê –î–õ–Ø –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –¢–ï–ú–´ (–¢–û–ß–ù–û –ö–ê–ö –í –ö–ê–†–¢–ï –û–ë–£–ß–ï–ù–ò–Ø) ===== */
/* –£–±–∏—Ä–∞–µ–º –í–°–ï –≤–æ–∑–º–æ–∂–Ω—ã–µ –±–µ–ª—ã–µ —Ñ–æ–Ω—ã */
header.modern-header .navbar-brand,
header.modern-header .navbar-brand *,
.logo-container,
.logo-container *,
.logo-container .logo,
.logo-container img {
  background: transparent !important;
  background-color: transparent !important;
  background-image: none !important;
}

.logo-container {
  display: flex !important;
  align-items: center !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  box-shadow: none !important;
}

/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö –ª–æ–≥–æ—Ç–∏–ø–æ–≤ */
.logo-container .logo {
  background: transparent !important;
  background-color: transparent !important;
}

/* –¢–û–ß–ù–û –ö–ê–ö –í –ö–ê–†–¢–ï –û–ë–£–ß–ï–ù–ò–Ø - –ø—Ä—è–º—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –±–µ–∑ .logo-container */
.logo-dark {
  display: none;
}

[data-theme="dark"] .logo-light {
  display: none !important;
}

[data-theme="dark"] .logo-dark {
  display: inline-block !important;
}
</style>

<script>
// –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–æ—Ç–∏–ø–æ–≤
document.addEventListener('DOMContentLoaded', function() {
  const checkLogos = () => {
    const theme = document.documentElement.getAttribute('data-theme');
    const logoLight = document.querySelector('.logo-container .logo-light');
    const logoDark = document.querySelector('.logo-container .logo-dark');
    
    if (logoLight && logoDark) {
      const lightDisplay = window.getComputedStyle(logoLight).display;
      const darkDisplay = window.getComputedStyle(logoDark).display;
      
      console.log('üé® Theme:', theme);
      console.log('üü¶ Logo Light display:', lightDisplay);
      console.log('‚ö´ Logo Dark display:', darkDisplay);
      
      if (theme === 'dark' && darkDisplay === 'none') {
        console.warn('‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞: —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–∞, –Ω–æ —Ç–µ–º–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø —Å–∫—Ä—ã—Ç!');
      }
      if (theme === 'light' && lightDisplay === 'none') {
        console.warn('‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞: —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–∞, –Ω–æ —Å–≤–µ—Ç–ª—ã–π –ª–æ–≥–æ—Ç–∏–ø —Å–∫—Ä—ã—Ç!');
      }
    }
  };
  
  checkLogos();
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã
  const observer = new MutationObserver(checkLogos);
  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ['data-theme']
  });
  
  window.addEventListener('themechange', checkLogos);
});
</script>
