{% extends "admin/base.html" %}

{% block title %}–°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å{% endblock %}

{% block extra_css %}
<style>
.notification-card {
    background: white;
    border-radius: 15px;
    padding: 25px;
    margin-bottom: 20px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    border-left: 5px solid #667eea;
}

.notification-item {
    background: white;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    border-left: 4px solid #28a745;
    transition: transform 0.3s ease;
}

.notification-item:hover {
    transform: translateY(-2px);
}

.notification-item.info {
    border-left-color: #17a2b8;
}

.notification-item.warning {
    border-left-color: #ffc107;
}

.notification-item.error {
    border-left-color: #dc3545;
}

.notification-item.success {
    border-left-color: #28a745;
}

.notification-header {
    display: flex;
    justify-content-between;
    align-items-center;
    margin-bottom: 15px;
}

.notification-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #333;
}

.notification-meta {
    display: flex;
    align-items: center;
    gap: 10px;
}

.notification-type {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
}

.notification-type.info {
    background: #d1ecf1;
    color: #0c5460;
}

.notification-type.warning {
    background: #fff3cd;
    color: #856404;
}

.notification-type.error {
    background: #f8d7da;
    color: #721c24;
}

.notification-type.success {
    background: #d4edda;
    color: #155724;
}

.priority-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
}

.priority-badge.low {
    background: #e2e3e5;
    color: #383d41;
}

.priority-badge.normal {
    background: #d1ecf1;
    color: #0c5460;
}

.priority-badge.high {
    background: #fff3cd;
    color: #856404;
}

.priority-badge.critical {
    background: #f8d7da;
    color: #721c24;
}

.notification-message {
    color: #666;
    line-height: 1.6;
    margin-bottom: 15px;
}

.notification-actions {
    display: flex;
    justify-content-between;
    align-items: center;
}

.notification-time {
    color: #999;
    font-size: 0.9rem;
}

.action-buttons {
    background: white;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.action-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    margin-right: 10px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
}

.action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    color: white;
    text-decoration: none;
}

.action-btn.success {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
}

.action-btn.warning {
    background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);
    color: #333;
}

.action-btn.danger {
    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
}

.filter-controls {
    background: white;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.filter-group {
    margin-bottom: 15px;
}

.filter-group:last-child {
    margin-bottom: 0;
}

.filter-label {
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
    display: block;
}

.filter-select {
    width: 100%;
    padding: 8px 12px;
    border: 2px solid #e9ecef;
    border-radius: 6px;
    background: white;
    color: #495057;
    transition: border-color 0.3s ease;
}

.filter-select:focus {
    outline: none;
    border-color: #667eea;
}

.filter-btn {
    background: #667eea;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s ease;
    margin-right: 10px;
}

.filter-btn:hover {
    background: #5a6fd8;
}

.clear-btn {
    background: #6c757d;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s ease;
}

.clear-btn:hover {
    background: #5a6268;
}

.stats-summary {
    background: white;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
}

.stat-item {
    text-align: center;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: bold;
    color: #667eea;
}

.stat-label {
    color: #666;
    font-size: 0.9rem;
    margin-top: 5px;
}

.create-notification-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
}

.modal-content {
    background-color: white;
    margin: 5% auto;
    padding: 30px;
    border-radius: 15px;
    width: 80%;
    max-width: 600px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

.modal-header {
    display: flex;
    justify-content-between;
    align-items: center;
    margin-bottom: 20px;
}

.modal-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #333;
}

.close {
    color: #aaa;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover {
    color: #000;
}

.form-group {
    margin-bottom: 20px;
}

.form-label {
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
    display: block;
}

.form-control {
    width: 100%;
    padding: 10px 12px;
    border: 2px solid #e9ecef;
    border-radius: 6px;
    background: white;
    color: #495057;
    transition: border-color 0.3s ease;
}

.form-control:focus {
    outline: none;
    border-color: #667eea;
}

.form-control.textarea {
    min-height: 100px;
    resize: vertical;
}
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h3 mb-0">üì¢ –°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h1>
            <p class="text-muted">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è–º–∏ —Å–∏—Å—Ç–µ–º—ã</p>
        </div>
        <div>
            <button class="action-btn" onclick="openCreateModal()">
                ‚ûï –°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            </button>
            <button class="action-btn success" onclick="markAllRead()">
                ‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
            </button>
        </div>
    </div>

    <!-- Statistics Summary -->
    <div class="stats-summary">
        <h5 class="mb-3">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h5>
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-value">{{ total_notifications }}</div>
                <div class="stat-label">–í—Å–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">{{ active_notifications }}</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">{{ unread_notifications }}</div>
                <div class="stat-label">–ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö</div>
            </div>
        </div>
    </div>

    <!-- Filter Controls -->
    <div class="filter-controls">
        <form method="GET" action="{{ url_for('admin.system_notifications') }}">
            <div class="row">
                <div class="col-md-3">
                    <div class="filter-group">
                        <label class="filter-label">üìù –¢–∏–ø</label>
                        <select name="type" class="filter-select">
                            <option value="all" {% if type_filter == 'all' %}selected{% endif %}>–í—Å–µ —Ç–∏–ø—ã</option>
                            <option value="info" {% if type_filter == 'info' %}selected{% endif %}>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</option>
                            <option value="warning" {% if type_filter == 'warning' %}selected{% endif %}>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</option>
                            <option value="error" {% if type_filter == 'error' %}selected{% endif %}>–û—à–∏–±–∫–∞</option>
                            <option value="success" {% if type_filter == 'success' %}selected{% endif %}>–£—Å–ø–µ—Ö</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="filter-group">
                        <label class="filter-label">‚ö° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                        <select name="priority" class="filter-select">
                            <option value="all" {% if priority_filter == 'all' %}selected{% endif %}>–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                            <option value="low" {% if priority_filter == 'low' %}selected{% endif %}>–ù–∏–∑–∫–∏–π</option>
                            <option value="normal" {% if priority_filter == 'normal' %}selected{% endif %}>–û–±—ã—á–Ω—ã–π</option>
                            <option value="high" {% if priority_filter == 'high' %}selected{% endif %}>–í—ã—Å–æ–∫–∏–π</option>
                            <option value="critical" {% if priority_filter == 'critical' %}selected{% endif %}>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="filter-group">
                        <label class="filter-label">üìä –°—Ç–∞—Ç—É—Å</label>
                        <select name="status" class="filter-select">
                            <option value="all" {% if status_filter == 'all' %}selected{% endif %}>–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option value="active" {% if status_filter == 'active' %}selected{% endif %}>–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="inactive" {% if status_filter == 'inactive' %}selected{% endif %}>–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="filter-group">
                        <label class="filter-label">&nbsp;</label>
                        <div>
                            <button type="submit" class="filter-btn">üîç –§–∏–ª—å—Ç—Ä</button>
                            <a href="{{ url_for('admin.system_notifications') }}" class="clear-btn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</a>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- Notifications List -->
    {% if notifications and notifications.items %}
        {% for notification in notifications.items %}
        <div class="notification-item {{ notification.notification_type }}">
            <div class="notification-header">
                <div class="notification-title">{{ notification.title }}</div>
                <div class="notification-meta">
                    <span class="notification-type {{ notification.notification_type }}">
                        {{ notification.notification_type }}
                    </span>
                    <span class="priority-badge {{ notification.priority }}">
                        {{ notification.priority }}
                    </span>
                    <span class="notification-time">
                        {{ notification.created_at.strftime('%d.%m.%Y %H:%M') }}
                    </span>
                </div>
            </div>
            
            <div class="notification-message">
                {{ notification.message }}
            </div>
            
            <div class="notification-actions">
                <div>
                    {% if notification.action_url %}
                    <a href="{{ notification.action_url }}" class="btn btn-sm btn-primary">
                        {{ notification.action_text or '–ü–µ—Ä–µ–π—Ç–∏' }}
                    </a>
                    {% endif %}
                    
                    {% if not notification.is_read %}
                    <button class="btn btn-sm btn-outline-success" onclick="markAsRead({{ notification.id }})">
                        ‚úÖ –ü—Ä–æ—á–∏—Ç–∞–Ω–æ
                    </button>
                    {% endif %}
                </div>
                
                <div>
                    {% if notification.is_active %}
                    <button class="btn btn-sm btn-outline-warning" onclick="deactivateNotification({{ notification.id }})">
                        ‚è∏Ô∏è –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                    {% else %}
                    <button class="btn btn-sm btn-outline-success" onclick="activateNotification({{ notification.id }})">
                        ‚ñ∂Ô∏è –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                    {% endif %}
                    
                    <button class="btn btn-sm btn-outline-danger" onclick="deleteNotification({{ notification.id }})">
                        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}

        <!-- Pagination -->
        {% if notifications.pages > 1 %}
        <nav aria-label="Notifications pagination">
            <ul class="pagination justify-content-center">
                {% if notifications.has_prev %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('admin.system_notifications', page=notifications.prev_num, type=type_filter, priority=priority_filter, status=status_filter) }}">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
                    </li>
                {% endif %}
                
                {% for page_num in notifications.iter_pages() %}
                    {% if page_num %}
                        {% if page_num != notifications.page %}
                            <li class="page-item">
                                <a class="page-link" href="{{ url_for('admin.system_notifications', page=page_num, type=type_filter, priority=priority_filter, status=status_filter) }}">{{ page_num }}</a>
                            </li>
                        {% else %}
                            <li class="page-item active">
                                <span class="page-link">{{ page_num }}</span>
                            </li>
                        {% endif %}
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link">‚Ä¶</span>
                        </li>
                    {% endif %}
                {% endfor %}
                
                {% if notifications.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('admin.system_notifications', page=notifications.next_num, type=type_filter, priority=priority_filter, status=status_filter) }}">–°–ª–µ–¥—É—é—â–∞—è</a>
                    </li>
                {% endif %}
            </ul>
        </nav>
        {% endif %}

    {% else %}
        <div class="text-center py-5">
            <i class="fas fa-bell fa-4x text-muted mb-3"></i>
            <h4 class="text-muted">–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h3>
            <p class="text-muted">–°–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å</p>
            <button class="action-btn" onclick="openCreateModal()">
                ‚ûï –°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            </button>
        </div>
    {% endif %}
</div>

<!-- Create Notification Modal -->
<div id="createNotificationModal" class="create-notification-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">–°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h2>
            <span class="close" onclick="closeCreateModal()">&times;</span>
        </div>
        
        <form id="createNotificationForm">
            <div class="form-group">
                <label class="form-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                <input type="text" name="title" class="form-control" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                <textarea name="message" class="form-control textarea" required></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">–¢–∏–ø</label>
                <select name="type" class="form-control" required>
                    <option value="info">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</option>
                    <option value="warning">–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</option>
                    <option value="error">–û—à–∏–±–∫–∞</option>
                    <option value="success">–£—Å–ø–µ—Ö</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                <select name="priority" class="form-control" required>
                    <option value="low">–ù–∏–∑–∫–∏–π</option>
                    <option value="normal" selected>–û–±—ã—á–Ω—ã–π</option>
                    <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                    <option value="critical">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">URL –¥–µ–π—Å—Ç–≤–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                <input type="url" name="action_url" class="form-control">
            </div>
            
            <div class="form-group">
                <label class="form-label">–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                <input type="text" name="action_text" class="form-control" placeholder="–ü–µ—Ä–µ–π—Ç–∏">
            </div>
            
            <div class="form-group">
                <button type="submit" class="action-btn">–°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
                <button type="button" class="action-btn warning" onclick="closeCreateModal()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function openCreateModal() {
    document.getElementById('createNotificationModal').style.display = 'block';
}

function closeCreateModal() {
    document.getElementById('createNotificationModal').style.display = 'none';
}

function markAsRead(notificationId) {
    alert('–§—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ—Ç–∫–∏ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
}

function markAllRead() {
    if (confirm('–û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ?')) {
        alert('–§—É–Ω–∫—Ü–∏—è –º–∞—Å—Å–æ–≤–æ–π –æ—Ç–º–µ—Ç–∫–∏ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
    }
}

function activateNotification(notificationId) {
    alert('–§—É–Ω–∫—Ü–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
}

function deactivateNotification(notificationId) {
    alert('–§—É–Ω–∫—Ü–∏—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
}

function deleteNotification(notificationId) {
    if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ?')) {
        alert('–§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
    }
}

// Handle form submission
document.getElementById('createNotificationForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const data = {
        title: formData.get('title'),
        message: formData.get('message'),
        type: formData.get('type'),
        priority: formData.get('priority'),
        action_url: formData.get('action_url'),
        action_text: formData.get('action_text')
    };
    
    fetch('{{ url_for("admin.create_notification") }}', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            alert('–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ!');
            closeCreateModal();
            location.reload();
        } else {
            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: ' + data.error);
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è');
    });
});

// Close modal when clicking outside
window.onclick = function(event) {
    const modal = document.getElementById('createNotificationModal');
    if (event.target == modal) {
        closeCreateModal();
    }
}

// Add hover effects
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.notification-item').forEach(item => {
        item.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-2px)';
            this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)';
        });
        
        item.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 4px 15px rgba(0,0,0,0.1)';
        });
    });
});

// Auto-refresh every 30 seconds
setTimeout(function() {
    location.reload();
}, 30000);
</script>
{% endblock %}
