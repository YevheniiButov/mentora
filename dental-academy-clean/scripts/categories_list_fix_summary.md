# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ TypeError –≤ categories_list

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞

**–û—à–∏–±–∫–∞:** `TypeError: categories_list() missing 1 required positional argument: 'lang'`

**–ú–µ—Å—Ç–æ:** `routes/content_navigation.py`, —Ñ—É–Ω–∫—Ü–∏—è `categories_list`

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–∏—á–∏–Ω–∞:** –§—É–Ω–∫—Ü–∏—è `categories_list` –∏–º–µ–ª–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä `lang`, –Ω–æ Flask –Ω–µ –º–æ–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `<lang>` –≤ —Ñ—É–Ω–∫—Ü–∏—é.

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** Flask blueprint –∏—Å–ø–æ–ª—å–∑—É–µ—Ç URL –ø–∞—Ä–∞–º–µ—Ç—Ä `<lang>` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `before_request()` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `g.lang`, –Ω–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–∏.

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –§–∞–π–ª: `routes/content_navigation.py`

**–§—É–Ω–∫—Ü–∏—è `categories_list`:**
```python
# –ë—ã–ª–æ:
def categories_list(lang):

# –°—Ç–∞–ª–æ:
def categories_list():
    # –ü–æ–ª—É—á–∞–µ–º lang –∏–∑ g –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º 'en' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    lang = getattr(g, 'lang', 'en')
```

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã `url_for`:**
```python
# –ë—ã–ª–æ:
return redirect(url_for('.categories_list', lang=lang))

# –°—Ç–∞–ª–æ:
return redirect(url_for('.categories_list'))
```

### 2. –®–∞–±–ª–æ–Ω—ã (4 —Ñ–∞–π–ª–∞)

**–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `url_for` –≤ —à–∞–±–ª–æ–Ω–∞—Ö:**
```html
<!-- –ë—ã–ª–æ: -->
<a href="{{ url_for('content_nav.categories_list', lang=lang) }}">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>

<!-- –°—Ç–∞–ª–æ: -->
<a href="{{ url_for('content_nav.categories_list') }}">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `templates/content/lesson_view.html`
- `templates/content/category_view.html`
- `templates/content/subcategory_view.html`
- `templates/content/topic_view.html`

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ —è–∑—ã–∫–æ–≤:
1. **URL:** `/<lang>/learn/...`
2. **before_request():** –ò–∑–≤–ª–µ–∫–∞–µ—Ç `lang` –∏–∑ `request.view_args` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `g.lang`
3. **–§—É–Ω–∫—Ü–∏–∏:** –ü–æ–ª—É—á–∞—é—Ç `lang` –∏–∑ `g` —Å –ø–æ–º–æ—â—å—é `getattr(g, 'lang', 'en')`
4. **–®–∞–±–ª–æ–Ω—ã:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç `url_for` –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `lang`

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å:** Flask –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** `getattr(g, 'lang', 'en')` —Å fallback
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –≤–æ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö blueprint
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –ú–µ–Ω—å—à–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ `categories_list` - —É–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä lang
- ‚úÖ `view_category` - –æ–±–Ω–æ–≤–ª–µ–Ω url_for
- ‚úÖ `view_subcategory` - –æ–±–Ω–æ–≤–ª–µ–Ω url_for
- ‚úÖ `view_topic` - –æ–±–Ω–æ–≤–ª–µ–Ω url_for
- ‚úÖ `view_lesson` - –æ–±–Ω–æ–≤–ª–µ–Ω url_for

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã:
- ‚úÖ `lesson_view.html` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏
- ‚úÖ `category_view.html` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏
- ‚úÖ `subcategory_view.html` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏
- ‚úÖ `topic_view.html` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```
TypeError: categories_list() missing 1 required positional argument: 'lang'
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `categories_list` —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `lang`
- ‚úÖ Flask –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç `lang` —á–µ—Ä–µ–∑ URL
- ‚úÖ –í—Å–µ redirect —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ —à–∞–±–ª–æ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

## üìù –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

**–ü—Ä–∏–Ω—Ü–∏–ø:** –í Flask blueprint —Å URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
1. –ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏
2. –ü–æ–ª—É—á–∞–π—Ç–µ –∏—Ö –∏–∑ `g` –æ–±—ä–µ–∫—Ç–∞ –≤ `before_request()`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `getattr(g, 'param', 'default')` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è

**–ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è blueprint —Ñ—É–Ω–∫—Ü–∏–π:**
```python
@bp.route("/<lang>/path")
def my_function():
    lang = getattr(g, 'lang', 'en')
    # ... –ª–æ–≥–∏–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏
```

üöÄ **–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ!** 