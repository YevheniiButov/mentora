# Скрипты управления Mentora Clean

Эта директория содержит скрипты для управления приложением Mentora Clean.

## Доступные скрипты

### 1. `create_demo_users.py`
Создает демо пользователей DigiD для разработки и тестирования.

**Функции:**
- Создание 3 тестовых пользователей (студент, преподаватель, администратор)
- Проверка на существующих пользователей
- Генерация уникальных BSN и DigiD username
- Логирование процесса создания
- Обработка ошибок

**Использование:**
```bash
python3 scripts/create_demo_users.py
```

**Создаваемые пользователи:**
- BSN: 123456789 | Jan Jansen | Студент
- BSN: 987654321 | Maria de Vries | Преподаватель
- BSN: 111222333 | Admin User | Администратор

**Пароль:** `demo123456` (для всех пользователей)

### 2. `migrate_to_digid.py`
Мигрирует существующих пользователей в DigiD формат.

**Функции:**
- Анализ существующих пользователей
- Генерация BSN по алгоритму 11-proef
- Создание уникальных DigiD username
- Установка флагов DigiD
- Создание подробного отчета
- Логирование процесса миграции

**Использование:**
```bash
python3 scripts/migrate_to_digid.py
```

**Генерируемые файлы:**
- `scripts/migration_report.txt` - Отчет о миграции
- `scripts/migrate_to_digid.log` - Логи миграции

## Логи

Все скрипты создают логи в директории `scripts/`:

- `scripts/demo_users_creation.log` - Логи создания демо пользователей
- `scripts/migrate_to_digid.log` - Логи миграции пользователей

## Безопасность

⚠️ **ВАЖНО:** 
- Демо пользователи создаются только для разработки
- Не используйте эти скрипты в production без модификации
- Пароли демо пользователей известны и небезопасны
- BSN генерируются случайно и не являются реальными

## Требования

Для работы скриптов требуется:
- Python 3.7+
- Flask приложение с настроенной базой данных
- Модели User с поддержкой DigiD полей
- Конфигурация в `config.py`

## Примеры использования

### Создание демо пользователей
```bash
cd /path/to/dental-academy-clean
python3 scripts/create_demo_users.py
```

### Миграция существующих пользователей
```bash
cd /path/to/dental-academy-clean
python3 scripts/migrate_to_digid.py
```

### Проверка логов
```bash
tail -f scripts/demo_users_creation.log
tail -f scripts/migrate_to_digid.log
```

## Структура файлов

```
scripts/
├── __init__.py
├── README.md
├── create_demo_users.py
├── migrate_to_digid.py
├── demo_users_creation.log
├── migrate_to_digid.log
└── migration_report.txt
```

## Устранение неполадок

### Ошибка импорта
Убедитесь, что вы запускаете скрипты из корневой директории проекта.

### Ошибка подключения к БД
Проверьте настройки базы данных в `config.py` и убедитесь, что БД доступна.

### Ошибка создания пользователей
Проверьте логи в соответствующих файлах для деталей ошибок.

## Разработка

При создании новых скриптов следуйте этим принципам:

1. **Логирование:** Используйте модуль `logging` для всех операций
2. **Обработка ошибок:** Всегда обрабатывайте исключения
3. **Подтверждение:** Запрашивайте подтверждение для критических операций
4. **Отчеты:** Создавайте отчеты о выполненных операциях
5. **Безопасность:** Не используйте реальные данные в демо скриптах 