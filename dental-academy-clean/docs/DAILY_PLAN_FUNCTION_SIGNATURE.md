# üìã –°–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `generate_daily_plan()`

## üîß –§—É–Ω–∫—Ü–∏—è

```python
def generate_daily_plan(self, user_id: int, target_minutes: int = 30) -> Dict:
```

## üì• –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

### `user_id: int`
- **–¢–∏–ø**: `int`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π**: –î–∞
- **–ü—Ä–∏–º–µ—Ä**: `6`

### `target_minutes: int = 30`
- **–¢–∏–ø**: `int`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –¶–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è –≤ –º–∏–Ω—É—Ç–∞—Ö
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π**: –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30)
- **–ü—Ä–∏–º–µ—Ä**: `45`

## üì§ –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

### –¢–∏–ø: `Dict`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:

```python
{
    'success': True,
    'user_id': int,
    'generated_at': str,  # ISO —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
    'target_minutes': int,
    'total_estimated_time': int,
    'abilities': Dict[str, float],
    'weak_domains': List[str],
    'domain_priorities': Dict[str, float],
    'daily_plan': {
        'theory_section': {
            'title': str,
            'icon': str,
            'estimated_time': int,
            'items': List[Dict]
        },
        'practice_section': {
            'title': str,
            'icon': str,
            'estimated_time': int,
            'items': List[Dict]
        },
        'review_section': {
            'title': str,
            'icon': str,
            'estimated_time': int,
            'items': List[Dict]
        }
    }
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—à–∏–±–∫–∏:

```python
{
    'success': False,
    'error': str,
    'daily_plan': Dict  # Fallback –ø–ª–∞–Ω
}
```

## üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### 1. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `success` | `bool` | –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–Ω–∞ |
| `user_id` | `int` | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `generated_at` | `str` | –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (ISO —Ñ–æ—Ä–º–∞—Ç) |
| `target_minutes` | `int` | –¶–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è |
| `total_estimated_time` | `int` | –û–±—â–µ–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è |
| `abilities` | `Dict[str, float]` | –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–æ –¥–æ–º–µ–Ω–∞–º |
| `weak_domains` | `List[str]` | –°–ø–∏—Å–æ–∫ —Å–ª–∞–±—ã—Ö –¥–æ–º–µ–Ω–æ–≤ |
| `domain_priorities` | `Dict[str, float]` | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–æ–º–µ–Ω–æ–≤ |

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `daily_plan`

#### `theory_section`
```python
{
    'title': '–¢–µ–æ—Ä–∏—è',
    'icon': 'bi bi-book',
    'estimated_time': int,  # –º–∏–Ω—É—Ç—ã
    'items': [
        {
            'id': int,
            'type': 'lesson',
            'title': str,
            'domain': str,
            'difficulty': int,  # 0-100
            'estimated_time': int,  # –º–∏–Ω—É—Ç—ã
            'content': str  # –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
        }
    ]
}
```

#### `practice_section`
```python
{
    'title': '–ü—Ä–∞–∫—Ç–∏–∫–∞',
    'icon': 'bi bi-pencil-square',
    'estimated_time': int,  # –º–∏–Ω—É—Ç—ã
    'items': [
        {
            'id': int,
            'type': 'question',
            'title': str,
            'domain': str,
            'difficulty': int,  # 0-100
            'estimated_time': int,  # –º–∏–Ω—É—Ç—ã
            'question_text': str,  # —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
            'options': List[str]  # –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
        }
    ]
}
```

#### `review_section`
```python
{
    'title': '–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ',
    'icon': 'bi bi-arrow-clockwise',
    'estimated_time': int,  # –º–∏–Ω—É—Ç—ã
    'items': [
        {
            'content_id': int,
            'content_type': 'question',
            'domain': str,
            'overdue_days': int,  # –¥–Ω–µ–π –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ
            'ease_factor': float,  # SM-2 –ø–∞—Ä–∞–º–µ—Ç—Ä
            'repetitions': int,  # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
            'title': str,
            'estimated_time': int  # –º–∏–Ω—É—Ç—ã
        }
    ]
}
```

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `abilities`

```python
{
    'THER': 0.75,    # –¢–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è
    'SURG': 0.60,    # –•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∞—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è
    'ORTH': 0.45,    # –û—Ä—Ç–æ–¥–æ–Ω—Ç–∏—è
    'PEDO': 0.80,    # –î–µ—Ç—Å–∫–∞—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è
    'PERI': 0.65,    # –ü–∞—Ä–æ–¥–æ–Ω—Ç–æ–ª–æ–≥–∏—è
    'ENDO': 0.55,    # –≠–Ω–¥–æ–¥–æ–Ω—Ç–∏—è
    'RAD': 0.70,     # –†–µ–Ω—Ç–≥–µ–Ω–æ–ª–æ–≥–∏—è
    'ANAT': 0.85,    # –ê–Ω–∞—Ç–æ–º–∏—è
    'PHAR': 0.50,    # –§–∞—Ä–º–∞–∫–æ–ª–æ–≥–∏—è
    'COMM': 0.90     # –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
}
```

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `domain_priorities`

```python
{
    'THER': 0.85,    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏–∏
    'SURG': 0.72,    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ö–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–æ–π —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏–∏
    'ORTH': 0.65,    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ä—Ç–æ–¥–æ–Ω—Ç–∏–∏
    # ... –¥—Ä—É–≥–∏–µ –¥–æ–º–µ–Ω—ã
}
```

## üîç –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
from utils.daily_learning_algorithm import DailyLearningAlgorithm

# –°–æ–∑–¥–∞–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º
algorithm = DailyLearningAlgorithm()

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–ª–∞–Ω –Ω–∞ 45 –º–∏–Ω—É—Ç
daily_plan = algorithm.generate_daily_plan(user_id=6, target_minutes=45)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å
if daily_plan['success']:
    print(f"–ü–ª–∞–Ω —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ {daily_plan['total_estimated_time']} –º–∏–Ω—É—Ç")
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–µ–∫—Ü–∏–∏
    theory = daily_plan['daily_plan']['theory_section']
    practice = daily_plan['daily_plan']['practice_section']
    review = daily_plan['daily_plan']['review_section']
    
    print(f"–¢–µ–æ—Ä–∏—è: {len(theory['items'])} —ç–ª–µ–º–µ–Ω—Ç–æ–≤")
    print(f"–ü—Ä–∞–∫—Ç–∏–∫–∞: {len(practice['items'])} —ç–ª–µ–º–µ–Ω—Ç–æ–≤")
    print(f"–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ: {len(review['items'])} —ç–ª–µ–º–µ–Ω—Ç–æ–≤")
else:
    print(f"–û—à–∏–±–∫–∞: {daily_plan['error']}")
```

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—à–∏–±–∫–∏:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω
- –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –û—à–∏–±–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- –û—à–∏–±–∫–∏ –≤—ã–±–æ—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ü—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è fallback –ø–ª–∞–Ω —Å –ø—É—Å—Ç—ã–º–∏ —Å–µ–∫—Ü–∏—è–º–∏.

## üîß –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. **–ê–Ω–∞–ª–∏–∑ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π** - –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö IRT —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–∞–±—ã—Ö –¥–æ–º–µ–Ω–æ–≤** - –≤—ã—è–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–æ–≤ —Å –Ω–∏–∑–∫–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
3. **–ü–æ–∏—Å–∫ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π** - —ç–ª–µ–º–µ–Ω—Ç—ã Spaced Repetition –≥–æ—Ç–æ–≤—ã–µ –∫ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é
4. **–†–∞—Å—á–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –¥–æ–º–µ–Ω–æ–≤
5. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏** - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º
6. **–í—ã–±–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞** - –ø–æ–¥–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞
7. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ Learning Map 