class MobileEnhancements{constructor(){this.isMobile=window.innerWidth<=768;this.isTablet=window.innerWidth>768&&window.innerWidth<=1024;this.init();}init(){this.setupMobileMenu();this.setupTouchEnhancements();this.setupScrollOptimizations();this.setupOrientationHandling();this.setupPerformanceOptimizations();}setupMobileMenu(){const navbarToggler=document.querySelector('.navbar-toggler');const navbarCollapse=document.querySelector('.navbar-collapse');if(!navbarToggler||!navbarCollapse)return;navbarToggler.addEventListener('click',()=>{const isExpanded=navbarToggler.getAttribute('aria-expanded')==='true';if(!isExpanded){navbarCollapse.style.display='block';setTimeout(()=>{navbarCollapse.classList.add('show');},10);}else{navbarCollapse.classList.remove('show');setTimeout(()=>{navbarCollapse.style.display='none';},300);}});document.addEventListener('click',(e)=>{if(!navbarToggler.contains(e.target)&&!navbarCollapse.contains(e.target)){navbarToggler.setAttribute('aria-expanded','false');navbarCollapse.classList.remove('show');}});const navLinks=navbarCollapse.querySelectorAll('.nav-link');navLinks.forEach(link=>{link.addEventListener('click',()=>{navbarToggler.setAttribute('aria-expanded','false');navbarCollapse.classList.remove('show');});});}setupTouchEnhancements(){if(!this.isMobile)return;const touchElements=document.querySelectorAll(` .learning-path-button,.subject-card,.module-card-compact,.step-card,.vp-card,.stat-card,.recommendation-item,.nav-link,.nav-button,.btn `);touchElements.forEach(element=>{element.addEventListener('touchstart',()=>{if(navigator.vibrate){navigator.vibrate(10);}});element.addEventListener('touchstart',()=>{element.style.transform='scale(0.98)';});element.addEventListener('touchend',()=>{element.style.transform='';});element.addEventListener('touchend',(e)=>{e.preventDefault();});});}setupScrollOptimizations(){if(!this.isMobile)return;const scrollElements=document.querySelectorAll(` .middle-column,.right-column,.navbar-collapse `);scrollElements.forEach(element=>{element.style.webkitOverflowScrolling='touch';element.style.scrollBehavior='smooth';});const learningMapContainer=document.querySelector('.learning-map-container');if(learningMapContainer){learningMapContainer.addEventListener('scroll',this.throttle(()=>{requestAnimationFrame(()=>{});},16));}}setupOrientationHandling(){window.addEventListener('orientationchange',()=>{setTimeout(()=>{this.handleOrientationChange();},100);});window.addEventListener('resize',this.throttle(()=>{this.handleOrientationChange();},250));}handleOrientationChange(){const isLandscape=window.innerWidth>window.innerHeight;const learningMapContainer=document.querySelector('.learning-map-container');if(learningMapContainer){if(isLandscape&&this.isMobile){learningMapContainer.style.marginTop='60px';learningMapContainer.style.padding='0.75rem';}else{learningMapContainer.style.marginTop='80px';learningMapContainer.style.padding='1rem';}}const navbarCollapse=document.querySelector('.navbar-collapse');if(navbarCollapse){if(isLandscape&&this.isMobile){navbarCollapse.style.maxHeight='60vh';}else{navbarCollapse.style.maxHeight='calc(100vh-100%)';}}}setupPerformanceOptimizations(){if(!this.isMobile)return;const animatedElements=document.querySelectorAll(` .learning-path-button,.subject-card,.module-card-compact,.step-card,.vp-card,.stat-card,.recommendation-item `);animatedElements.forEach(element=>{element.style.willChange='transform';element.style.transform='translateZ(0)';});const images=document.querySelectorAll('img');images.forEach(img=>{if(this.isMobile){img.loading='lazy';}});}throttle(func,limit){let inThrottle;return function(){const args=arguments;const context=this;if(!inThrottle){func.apply(context,args);inThrottle=true;setTimeout(()=>inThrottle=false,limit);}}}handleErrors(){window.addEventListener('error',(e)=>{console.error('Mobile Enhancement Error:',e.error);});window.addEventListener('unhandledrejection',(e)=>{console.error('Mobile Enhancement Promise Error:',e.reason);});}}document.addEventListener('DOMContentLoaded',()=>{const mobileEnhancements=new MobileEnhancements();mobileEnhancements.handleErrors();window.mobileEnhancements=mobileEnhancements;});class LearningMapMobileEnhancements{constructor(){this.init();}init(){this.setupLearningMapOptimizations();this.setupCardInteractions();this.setupProgressIndicators();}setupLearningMapOptimizations(){const learningMapContainer=document.querySelector('.learning-map-container');if(!learningMapContainer)return;if(window.innerWidth<=768){learningMapContainer.style.gridTemplateColumns='1fr';learningMapContainer.style.gap='1rem';}learningMapContainer.addEventListener('scroll',this.throttle(()=>{requestAnimationFrame(()=>{});},16));}setupCardInteractions(){const cards=document.querySelectorAll(` .learning-path-button,.subject-card,.module-card-compact `);cards.forEach(card=>{card.addEventListener('touchstart',()=>{card.style.transform='scale(0.98)';card.style.transition='transform 0.1s ease';});card.addEventListener('touchend',()=>{card.style.transform='';card.style.transition='transform 0.2s ease';});card.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();card.click();}});});}setupProgressIndicators(){const progressBars=document.querySelectorAll('.progress-bar-fill');progressBars.forEach(bar=>{const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const progress=bar.style.width||'0%';bar.style.transition='width 1s ease';bar.style.width=progress;}});});observer.observe(bar);});}throttle(func,limit){let inThrottle;return function(){const args=arguments;const context=this;if(!inThrottle){func.apply(context,args);inThrottle=true;setTimeout(()=>inThrottle=false,limit);}}}}class BigInfoMobileEnhancements{constructor(){this.init();}init(){this.setupBigInfoNavigation();this.setupMobileOptimizations();}setupBigInfoNavigation(){const navButtons=document.querySelectorAll('.nav-button');if(navButtons.length===0)return;navButtons.forEach(button=>{button.addEventListener('touchstart',(e)=>{e.preventDefault();button.style.transform='scale(0.95)';if(navigator.vibrate){navigator.vibrate(10);}});button.addEventListener('touchend',(e)=>{e.preventDefault();button.style.transform='';setTimeout(()=>{button.click();},50);});button.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();button.click();}});});}setupMobileOptimizations(){if(window.innerWidth<=768){const navButtonsContainer=document.querySelector('.nav-buttons');if(navButtonsContainer){navButtonsContainer.style.overflowX='auto';navButtonsContainer.style.webkitOverflowScrolling='touch';navButtonsContainer.style.scrollbarWidth='none';navButtonsContainer.style.msOverflowStyle='none';const style=document.createElement('style');style.textContent=` .nav-buttons::-webkit-scrollbar{display: none;}`;document.head.appendChild(style);}const contentSections=document.querySelectorAll('.content-section');contentSections.forEach(section=>{section.style.padding='1rem';});}}}if(document.querySelector('.learning-map-container')){document.addEventListener('DOMContentLoaded',()=>{new LearningMapMobileEnhancements();});}if(document.querySelector('.nav-button')){document.addEventListener('DOMContentLoaded',()=>{new BigInfoMobileEnhancements();});}